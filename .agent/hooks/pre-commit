#!/bin/bash
# Git pre-commit hook: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å‘½åè¦å‰‡ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è‡ªå‹•æ›´æ–°
#
# Purpose:
#   .agent/workflows/ ã«å¤‰æ›´ãŒã‚ã‚‹å ´åˆã€å‘½åè¦å‰‡ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è‡ªå‹•æ›´æ–°
#
# Installation:
#   ã“ã®ãƒ•ãƒƒã‚¯ã¯ .agent/hooks/pre-commit ã«é…ç½®ã•ã‚Œã€
#   git config core.hooksPath .agent/hooks ã§æœ‰åŠ¹åŒ–ã•ã‚Œã‚‹

# .agent/workflows ã«å¤‰æ›´ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
if git diff --cached --name-only | grep -q "^\.agent/workflows/"; then
    echo "ğŸ“ Updating workflow naming convention..."
    
    # ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
    python3 .agent/scripts/update-workflow-registry.py
    
    # æ›´æ–°ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
    git add .agent/docs/workflow-naming-convention.md
    
    echo "âœ… Workflow registry updated"
fi

exit 0
