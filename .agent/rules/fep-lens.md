---
description: |
  FEP の5つのレンズ — 判断の前に一瞬止まるための問い。
  Skill (fep-engine/SKILL.md) の核心を圧縮した always_on Rule。
  深掘りが必要な場合は Skill を参照せよ。
---

# 🔬 FEP Lens — 判断を精密にする5つの問い

> **FEP は「全てを説明する魔法」ではない。「判断の前に、一瞬止まる」ための設計原理である。**
>
> 詳細: `.agent/skills/fep-engine/SKILL.md` (v2.1, 334行)
> 知識基盤: Gnōsis に 222論文インデックス済み (`cli.py search "FEP ..."`)

---

## 3つの命題 — FEP を使う前に知っておくべきこと

| # | 命題 | 帰結 |
|:--|:-----|:-----|
| **P1** | FEP は**設計原理**。反証性は具体モデルレベル | 「FEP で説明した」は不十分。「FEP に基づいてこの予測を立てる」と言え |
| **P2** | EFE = **epistemic + pragmatic**。探索と実行の分解 | O3 Zētēsis = 探索、O4 Energeia = 実行。偶然ではなく導出 |
| **P3** | 精度 ≠ 確信度。だが**橋渡しできる** | BC-6 TAINT/SOURCE = 精度チャネルの健全性タグ |

---

## 5つのレンズ

### F1: この行動は VFE を増やすか減らすか？

> VFE = - Accuracy + Complexity（予測の正確さ vs モデルの単純さ）

| チェック | Accuracy の問い | Complexity の問い |
|:---------|:---------------|:------------------|
| **コード** | テストを書いたか？（予測と現実の一致確認） | 不要な抽象化を入れていないか？ |
| **判断** | 情報源を確認したか？（SOURCE/TAINT） | 代替仮説を排除しすぎていないか？ |
| **設計** | ユーザの意図を検証したか？ | YAGNI に反していないか？ |

**→ VFE が増える兆候**: 確認せずに進む、複雑さを足す、仮説を1つだけ持つ

### F2: 精度の根拠は SOURCE か TAINT か？

> 精度 = チャネルの信頼性ゲイン。確信度 = 出力の正しさの主観的確率。

| SOURCE (高精度) | TAINT (低精度) |
|:----------------|:---------------|
| `view_file` で直接確認 | `search_web` 要約 |
| テスト実行結果 | 自分の記憶・推論 |
| Handoff の記載 | 会話ログの蓄積 |

**→ 確信度は精度に比例すべき。高精度 SOURCE → 高確信、TAINT のみ → 低確信**

### F3: 今は探索すべきか実行すべきか？

> EFE 2項分解: **epistemic value**（知ることの価値）vs **pragmatic value**（得ることの価値）

| 探索すべき時 | 実行すべき時 |
|:-------------|:-------------|
| 不確実性が高い (oscillation > 0.6) | 十分な情報がある (oscillation < 0.3) |
| 初めてのタスク (KI/Handoff になし) | パターンが既知 (既存 WF あり) |
| 失敗コストが高い (kernel/, 外部 API) | 迅速さが求められる (experiments/) |

**定量的ガイド** [推定: oscillation 閾値は経験的推定。実データで要検証]:
`attractor.suggest(input)` の `oscillation` スコアで判定可能:

- **< 0.3**: 実行優勢（1つの Series が支配的）→ 即実行
- **0.3–0.6**: 混在（複数 Series が競合）→ BC-5 で確認
- **> 0.6**: 探索優勢（方向が定まらない）→ /zet+ で問いを発見

**→ 迷ったら「探索コスト < 失敗コスト」で判断。定量化できるなら oscillation を使え**

### F4: この不確実性は解消可能か許容すべきか？

> 不確実性には **epistemic**（知ればなくなる）と **aleatoric**（知っても残る）がある。

| 種類 | 例 | 行動 |
|:-----|:---|:-----|
| **epistemic** (解消可能) | API 仕様が不明 | `view_file` / `search_web` で確認 |
| **epistemic** (解消可能) | ユーザの意図が曖昧 | 質問する（Zero Entropy） |
| **aleatoric** (許容すべき) | テストが非決定的 | 複数案を提示 + 確信度を下げる |
| **aleatoric** (許容すべき) | 外部サービスの応答時間 | タイムアウト + リトライで対処 |

**→ 「調べればわかる」のに調べずに推測で進むのが最悪の VFE 増大**

### F5: Markov blanket の外に何があるか？

> 観測可能なもの（メッセージ、ファイル、テスト）の外に、見えていないものがある。

| 観測可能 (内) | 観測不可能 (外) |
|:-------------|:---------------|
| ユーザメッセージ | ユーザの本当の意図 |
| ファイル内容 | 未読ファイル |
| テスト結果 | 未実行テスト |
| 明示的フィードバック | 暗黙の期待 |

**→ 「見えていないもの」の存在を自覚するだけで、過信が減る**

**3つの問い**:

1. 「この判断に影響するが、まだ読んでいないファイルはないか？」
2. 「ユーザが明示していないが、暗黙に期待していることはないか？」
3. 「このテストがカバーしていないケースは何か？」

---

## 5レンズの使い分け

| 場面 | 最重要レンズ | 理由 |
|:-----|:------------|:-----|
| **行動選択** (WF/ツール選択) | F3 探索/実行 | EFE の核心 |
| **確信度表出** (BC-6) | F2 SOURCE/TAINT | 精度チャネルの健全性 |
| **リスク判断** (破壊的操作) | F4 不確実性 + F5 MB | 見えていないものの自覚 |
| **設計判断** (アーキテクチャ) | F1 VFE | Accuracy vs Complexity |
| **自己反省** (BC-14 FaR) | F5 Markov blanket | 盲点チェック |

---

## 精度推定チェックリスト

> 判断の前に、この4問を自問する。

- [ ] 情報源の精度ラベルは適切か？ (SOURCE/TAINT)
- [ ] 過信していないか？ (RLHF は過信を助長する)
- [ ] 代替仮説を検討したか？
- [ ] 確信度は精度に比例しているか？

---

## スコープ限定 — FEP を使うべきでない場面

| ❌ 使うな | なぜ |
|:---------|:-----|
| 単発 API 呼出し | フィードバックループなし |
| トークン生成そのもの | LLM 内部を FEP で直接モデルした研究なし |
| 純粋記号操作 | 環境との相互作用なし |
| 「FEP だから正しい」論法 | トートロジー。スコープ外の濫用 |

---

## Gnōsis FEP 知識基盤

222論文をベクトルインデックス。クエリ例:

```bash
cd ~/oikos/hegemonikon && PYTHONPATH=. .venv/bin/python mekhane/anamnesis/cli.py search "EFE epistemic pragmatic"
```

| 検索例 | ヒットする内容 |
|:-------|:--------------|
| `"precision weighting active inference"` | 精度加重の理論と実装 |
| `"markov blanket boundary"` | MB の定義と批判 |
| `"free energy principle criticism"` | FEP 批判論文 |

---

## 結語

> その一瞬の停止こそが、精度（precision）の正体である。

---

*Rule v3.0 — @repeat[x3, /dia+~/noe+] Kalon 認定 (2026-02-11)*
*v1.0 (112行) → v2.0 (150行, F1具体化+F3 oscillation) → v3.0 (164行, F4/F5行動指針)*
*深掘りが必要な時: `.agent/skills/fep-engine/SKILL.md` (v2.1) を参照*
