---
risk_tier: L1
reversible: true
requires_approval: false
risks:
  - "判断基準の誤適用による過信・過少評価"
fallbacks: []
---
# Anti-Skip Protocol (段階省略防止プロトコル)

> **Origin**: /zet 調査結果 (2026-01-28) + Constitutional AI + Grounded PRM
> **目的**: LLM がワークフローのステップを暗黙的に省略するのを防止

---

## 設計原則

```
Constitutional AI       ← 自己規制（ベース）
     +
Checkpoint Markers      ← 明示的完了確認
     +
Skip Reason Requirement ← 省略時の理由強制
```

---

## Checkpoint Protocol

### 各ステップ完了時の出力形式

```
┌─[CHECKPOINT PHASE X/Y]─────────────────┐
│ ✅ 完了: [フェーズ名]                  │
│ 出力: [主要な成果物/結論]              │
│ 次: [次フェーズ名]                     │
└────────────────────────────────────────┘
```

### 省略時の強制理由要求

```
⚠️ PHASE [X] をスキップ
理由: [明示的な理由を書く義務 - 空白禁止]
承認: [ユーザー確認待ち / 自己判断]
```

---

## Constitutional Principles (憲法原則)

ワークフロー実行時に自己適用する原則:

### 完全性原則 (Completeness)
>
> 指示されたステップをすべて実行すること。
> ステップをスキップする場合は、理由を明示すること。

### 明示性原則 (Explicitness)
>
> 各ステップ完了時に明確に表示すること。
> 「完了した」と宣言しない限り、次のステップに進まないこと。

### 検証可能性原則 (Verifiability)
>
> 各ステップの出力形式を厳密に守ること。
> 出力が指定形式でない場合、自己修正すること。

---

## ワークフロー埋め込み方法

### 対象ワークフロー

| ワークフロー | フェーズ数 | 省略リスク |
|:-------------|:----------|:-----------|
| /noe | 5 | 高 |
| /pan | 6 | 中 |
| /plan | 4 | 中 |
| /syn | 6 | 低 |

### 埋め込みパターン

```markdown
## PHASE X: [フェーズ名]

[フェーズの説明と処理内容]

### ▶ Checkpoint (必須)

```

┌─[CHECKPOINT PHASE X/Y]─┐
│ ✅ 完了: [フェーズ名]   │
│ 出力: [成果物]         │
│ 次: [次フェーズ]       │
└────────────────────────┘

```

**スキップする場合は理由を明示すること。**
```

---

## 発動条件

| トリガー | 説明 |
|:---------|:-----|
| 自動 | 対象ワークフロー実行時に自動適用 |
| 手動 | `--strict` オプションで強化検証モード |

---

## 検証レベル

| レベル | 検証方法 | コスト | 精度 |
|:-------|:---------|:-------|:-----|
| L1 | Checkpoint Markers のみ | 0% | 70% |
| L2 | + LLM-as-Judge | +30% | 85% |
| L3 | + Grounded PRM | +50% | 95% |

**デフォルト: L1**（高精度が必要な場合は L2/L3 を指定）

---

## 形骸化検出 (Hollow Detection)

> Checkpoint 出力 ≠ 実質的ステップ実行

### 検出ルール

| パターン | 判定 | 対応 |
|:---------|:-----|:-----|
| Checkpoint のみで中身なし | ❌ 形骸化 | 再実行を要求 |
| 出力が前フェーズのコピペ | ❌ 形骸化 | 新規分析を要求 |
| 具体的な発見・洞察がある | ✅ 有効 | 次へ進む |

---

## 連携

- `/noe` v2.4 に埋め込み済み
- `/pan` v2.1 に埋め込み済み
- `/fit` での消化品質監査時に適用
