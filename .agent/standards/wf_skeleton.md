# WF 統一骨格 (Canonical Skeleton)

> 全 WF ファイルに適用する構造の標準仕様。
> FBR (R1-R6) と統一骨格 (P1-P7) の両方を遵守すること。

---

## 設計原則

| # | 原則 | 内容 |
|:--|:-----|:-----|
| P1 | 必須セクション 7 | frontmatter, header+制約, サブモジュール表, Status, リマインダ, footer |
| P2 | 任意セクション 6 | 発動条件, 核心概念, モード, 処理フロー, 出力形式, Artifact/連携 |
| P3 | 制約は 2箇所のみ | 冒頭 (header内) + 末尾 (リマインダ)。中間に散在させない |
| P4 | 見出しは `##` のみ | ハブ: `###` は補足のみ。サブ: `##` +`###` 可 |
| P5 | 任意セクション順序固定 | 発動→核心→モード→フロー→出力→保存→連携 |
| P6 | 構造的手段を優先 | テーブル > リスト > テキスト > コードブロック |
| P7 | サブはハブより軽い | frontmatter最小, 制約2箇所, 本体のみ |

---

## FBR ルール (R1-R6)

| # | ルール |
|:--|:-------|
| R1 | セクション順序: 目的→制約→入力→プロセス→出力→例→リマインダ |
| R2 | ネスト2-3層、`####` 禁止 |
| R3 | ASCIIアート全廃 → テーブル/リスト |
| R4 | 制約の冒頭+末尾配置 |
| R5 | 肯定形ベース |
| R6 | 見出し絵文字廃止 |

---

## ハブ骨格

```markdown
---
description: [1行説明]
hegemonikon: [定理名]
version: "[X.Y]"
---

# /[cmd]: [名称] ([定理名])

> **Hegemonikón**: [定理ID 定理名]
> **目的**: [1文]
>
> **制約**: [最重要制約 2行以内]

---

## サブモジュール

| ファイル | 内容 |
|:---------|:-----|

---

## 発動条件              ← 任意
## 核心概念              ← 任意
## モード/派生           ← 任意
## 処理フロー            ← 任意
## 出力形式              ← 任意
## Artifact 保存         ← 任意
## 連携                  ← 任意

---

## Hegemonikón Status

| Module | Workflow | Status |
|:-------|:---------|:-------|

> **制約リマインダ**: [冒頭制約の要約1行]

---

*v[X.Y] — [変更概要] ([日付])*
```

---

## サブモジュール骨格

```markdown
---
description: [1行説明]
parent: /[cmd]
---

# [名称]

> [目的1-2行]
>
> **制約**: [固有の制約]

---

## [本体セクション]

[コンテンツ]

---

> **制約リマインダ**: [制約要約]

*[親WF名] サブモジュール — v[X.Y]*
```

---

## 判定基準 (美のヒューリスティック)

1. この要素は機能を持つか → Yes → 残す候補
2. 同じ機能をより構造的に実現できるか → Yes → 置換
3. どちらも同等 → シンプルな方を選ぶ

> 美は追求しない（目標にしない）。美で評価する（品質のセンサー）。

---

*Canonical Skeleton v1.0 — 2026-02-07*
