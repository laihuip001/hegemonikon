---
description: 設計ドキュメントからGemini/Jules向け作業マニュアルを生成する。
hegemonikon: Praxis-H
modules: [M6]
---

# /manual ワークフロー

> **目的**: 正本となる設計ドキュメントから、Gemini/Jules向けの作業マニュアルを自動生成する。

## 入力

```
/manual <設計ドキュメントパス> [--jules]
```

**例**:
```
/manual kernel/taxis_design.md          # Gemini 向け（デフォルト）
/manual kernel/taxis_design.md --jules  # Jules 向け（GitHub Issue 形式）
```

## 出力モード

| モード | オプション | 出力形式 | 用途 |
|:---|:---|:---|:---|
| **Gemini** | (デフォルト) | Markdown マニュアル | 同期的な単純作業 |
| **Jules** | `--jules` | GitHub Issue 形式 | 夜間バッチ、非同期作業 |


## 実行手順

### Step 1: 設計ドキュメントの分析

指定された設計ドキュメントを読み込み、以下を抽出:

1. **変更の目的**: 何を達成するための変更か
2. **新しい定義**: 追加される概念、表、図
3. **影響範囲**: どのファイルに波及するか

### Step 2: 影響ファイルの特定

以下のパターンで影響ファイルを特定:

| パターン | 影響ファイル |
|----------|-------------|
| 公理変更 | `kernel/*.md`, `README.md` |
| 構造変更 | `STRUCTURE.md`, `docs/ARCHITECTURE.md` |
| Phase変更 | `kernel/doctrine.md`, `CHANGELOG.md` |
| 機能追加 | `kernel/KERNEL_PRACTICE_GUIDE.md` |

---

## ⚠️ 粒度ルール（Gemini補完防止）

> **原則**: Geminiは「言われていないこと」を補完する。
> マニュアルは**補完の余地がない粒度**でなければならない。

### 必須要件

| # | ルール | ❌ NG例 | ✅ OK例 |
|---|--------|---------|---------|
| 1 | **行番号を指定** | 「表を更新」 | 「58行目〜64行目の表を更新」 |
| 2 | **完全コピー可能** | 「Taxis行を追加」 | 「以下を貼り付け: `│ **Taxis** │...`」 |
| 3 | **before/after明示** | 「表記を統一」 | 「【変更前】Kairos → 【変更後】K-series」 |
| 4 | **禁止事項を明記** | （記載なし） | 「列順を変更しない」「命名を変更しない」 |

### 各ファイル変更の記述形式

```markdown
### ファイル: kernel/axiom_hierarchy.md

#### 変更1: 数学的構造表

**位置**: 58行目〜64行目
**操作**: 最終行の後に1行追加

**追加コンテンツ（完全コピー）**:
```
| **Taxis** | 従属関係 | (4+8+12) | **24** | 関係 (構造的) |
```

**変更後の完全形**:
```markdown
| シリーズ | 生成方法 | 積記法 | 数 | 性質 |
|---------|----------|--------|-----|------|
| **P-series** | 核心 × 核心 | 2 × 2 | **4** | 機能 (本質的) |
| **M-series** | 核心 × 選択 | 2 × 4 | **8** | 機能 (様態的) |
| **K-series** | 選択 × 選択 | 4 × 3 | **12** | 修飾 (文脈的) |
| **Taxis** | 従属関係 | (4+8+12) | **24** | 関係 (構造的) |
| **総計** | — | — | **48** | 完全系 |
```

**禁止事項**:
- 列順を変更しない
- 列名を変更しない
- 空白やフォーマットを「改善」しない
```

### チェックポイント

マニュアル生成時、各変更について以下を確認:

- [ ] 行番号が指定されている
- [ ] 完全なコンテンツ（コピペ可能）が含まれている
- [ ] 変更後の完全形が示されている
- [ ] 禁止事項が明記されている

### Step 3: マニュアル生成

以下の形式で `docs/update_manual_<name>.md` を生成:

```markdown
# <設計名> ドキュメント更新マニュアル

> **目的**: `<設計ドキュメント>` を正本として、全関連ドキュメントを更新するための作業指示書。

---

## 正本

**参照すべき正規定義**: `<設計ドキュメントパス>`

---

## 更新対象ファイル

| # | ファイル | 必須変更 | 優先度 |
|---|----------|----------|--------|
| 1 | ... | ... | HIGH |

---

## 更新ルール

### 必須事項

1. ...
2. ...

---

## 各ファイルの具体的変更

### 1. <ファイル名>

**変更箇所**:
- ...

**追加コンテンツ**:
```markdown
...
```

---

## チェックリスト

### 更新前
- [ ] 設計ドキュメントを読み、構造を理解した
- [ ] 変更対象ファイルをバックアップした

### 更新中
- [ ] 表記が統一されている
- [ ] 新定義が追加されている

### 更新後
- [ ] 全ファイルで表記が一貫している
- [ ] 相互リンクが正しく機能する
- [ ] 引継書が生成された

---

*このマニュアルは `<設計ドキュメント>` を正本として生成された。*
```

### Step 4: 引継書テンプレートの埋め込み

マニュアル末尾に以下を追加:

```markdown
---

## 作業完了時の引継書生成

作業完了後、以下の形式で引継書を生成すること:

```
docs/handoff_<YYYYMMDD>_<タスク名>.md
```

内容:
- 実行したコミット一覧
- 変更ファイルリスト
- 残課題（あれば）
- 次のセッションへの推奨事項
```

## 出力形式

```
[Hegemonikon] M6 Praxis
  入力: /manual <path>
  生成: docs/update_manual_<name>.md
  影響: <N>ファイル
```

---

## 使用例

```
/manual kernel/taxis_design.md          # Gemini 向け
/manual kernel/taxis_design.md --jules  # Jules 向け
```

生成されるファイル:
- Gemini: `docs/update_manual_taxis.md`
- Jules: `docs/jules_issue_taxis.md`

---

## Jules Issue 形式テンプレート (--jules)

`--jules` オプション使用時は、GitHub Issue としてそのまま使える形式で出力:

```markdown
# [Jules Task] <タスク名>

## 概要
<1行で何をするか>

## 前提条件
- [ ] リポジトリ: <repo URL>
- [ ] ブランチ: `feature/<name>`

## タスク詳細

### 変更1: <ファイル名>
**操作**: <追加/更新/削除>
**位置**: <行番号>
**内容**:
```<lang>
<完全なコード>
```

### 変更2: ...

## 禁止事項
- <具体的な禁止事項>

## 完了条件
- [ ] 全変更が適用された
- [ ] テストが通る
- [ ] PR が作成された

## ラベル
`jules`
```

---

*このワークフローはGemini/JulesとClaudeの協働を効率化するために設計された。*

