---
description: チャット履歴とコンテキストから今日のレビューを生成する。
hegemonikon: Dokimē-H, Anamnēsis-H
modules: [M7, M8]
---

# /rev ワークフロー

> **Hegemonikón Module**: M7 Dokimē (検証) + M8 Anamnēsis

過去7日間のチャット履歴と現在のコンテキストをスキャンし、「今日のレビュー」を生成する。

## 実行手順

// turbo-all

1. **ナイトレビュー生成**: Gemini APIを使用してセッション履歴からレビューを自動生成
   ```powershell
   python -m mekhane.anamnesis.night_review generate
   ```
   - オプション: `--all` で過去全履歴を遡及処理
   - オプション: `--date YYYY-MM-DD` で特定日を指定

2. **結果表示**: 生成されたレビューを表示
   ```powershell
   Get-Content "M:\Brain\.hegemonikon\session_summaries\review_$(Get-Date -Format 'yyyy-MM-dd').md"
   ```

## 入力ソース

1. Antigravity Brain (`C:\Users\makar\.gemini\antigravity\brain\`)
2. LanceDB Index (`M:\Hegemonikon\forge\knowledge_base\_index\lancedb`)
3. カレンダー情報（Phase 2で追加予定）

## タスク抽出ロジック（night_review.py内で処理）

### 高確度シグナル（抽出対象）
- "ToDo", "やります", "やる", "する予定"
- "期限", "締め切り", "までに"
- "確認", "チェック", "検証"
- 明示的なコミットメント表現

### 除外シグナル
- "完了", "done", "終わった"
- "情報収集のみ", "参考まで"
- 過去形での報告

## 出力形式

```markdown
# 📋 Night Review (YYYY-MM-DD)

## 今日の変更サマリ
（3〜7行の変更サマリ）

## 学び・気づき
- 気づき1
- 気づき2
- 気づき3

## 明日に引き継ぐタスク候補
- [ ] タスク1
- [ ] タスク2
- [ ] タスク3

---
*Generated by Hegemonikón M8 Anamnēsis*
*Sessions processed: [N]*
```

## 出力先

- Markdown: `M:\Brain\.hegemonikon\session_summaries\review_YYYY-MM-DD.md`
- JSON: `M:\Brain\.hegemonikon\session_summaries\review_YYYY-MM-DD.json`

## 制約

- 各セクション最大5件
- 重複タスクはマージ
- 7日以上前のタスクは「長期保留」として別枠

## 実行後

生成されたレビューを表示し、ユーザーに確認を求める。

