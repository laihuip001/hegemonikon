---
description: 局所最適から脱却し、大域最適を探索する熟考プロトコル。壁にぶち当たった時の Deep Thinking。
hegemonikon: Phronēsis-S, Theōria-S, Peira-H
modules: [M4-S, M3-S, M5]
tempo: Slow
---

# /think: 熟考プロトコル（大域最適化）

> **Hegemonikón Module**: M4 Phronēsis-**S** + M3 Theōria-**S** + M5 Peira
> **目的**: 前提を疑い、局所最適を脱却し、全体の中の最善を追求する
> **発動条件**: 壁にぶち当たった時、行き詰まり時、パラダイムシフトが必要な時

---

## /plan との対比

| 観点 | /plan | /think |
|------|-------|--------|
| **FEP Tempo** | Fast (F) | **Slow (S)** |
| **目的** | 現状の最善解（局所最適） | 前提を疑い全体最適を探索 |
| **知識源** | 内部知識 | **内部 + 外部探索** |
| **出力** | implementation_plan.md | thinking_log.md |

---

## Step 0: 壁の認識 + 複雑度判定

1. **問題特定**: 何が局所最適に陥っているか
2. **複雑度判定** (Complexity Classifier):
   - **Simple**: 単一の前提見直しで解決
   - **Medium**: 複数視点が必要
   - **Complex**: 外部探索 + 多視点 + 批判が必要

---

## Step 1: 前提の洗い出し

1. 暗黙の前提を全て列挙
2. 「当然」「当たり前」と思っていることをリストアップ
3. 各前提に確信度（0-1）を付与

---

## Step 2: 多視点分析（Multi-Persona）

3つのペルソナで同一問題を分析:

| ペルソナ | 問いかけ |
|---------|---------|
| 🔴 **Pessimist** | 「最悪のケースは？どこが壊れる？欠陥は？」 |
| 🟢 **Optimist** | 「最善のケースは？隠れた可能性は？利点は？」 |
| 🟡 **Realist** | 「現実的に何が可能か？制約は？リソースは？」 |

各ペルソナの出力を統合し、盲点を発見する。

---

## Step 3: 外部探索（Agentic RAG）

内部知識で不足している場合、外部情報を取得:

1. **Search Strategy Selector**:
   - 内部知識で十分 → Step 4 へ
   - 不足 → 以下の順で探索

2. **Source Router**:
   - **Gnōsis** (最優先): `python gnosis/cli.py search "query"` で論文検索
   - Web検索（Perplexity / `/ask`）
   - Vault（過去の知見）

3. **Sufficiency Judge**:
   - 「十分な情報が得られたか？」を判定
   - 不足なら追加検索（Gnōsisになければ `/ask` でリサーチ実行）

---

## Step 3.5: T3 自問（Why）

> **目的**: 目的と手段の入れ替わりを防ぐ

外部探索（Step 3）の後、結論を出す前に「なぜ」を問う。

### 3層自問

| 層 | 問い | 例 |
|:---|:-----|:---|
| **表層** | なぜこのアプローチを選んだか？ | 「Perplexity が推奨していたから」 |
| **深層** | このアプローチで何を犠牲にしたか？ | 「シンプルさを犠牲にして拡張性を取った」 |
| **検証** | 犠牲は妥当だったか？ | 「今回は拡張性が必要、妥当」 |

### 出力形式

```
[T3] 自問
  表層: {設計意図}
  深層: {犠牲にしたもの}
  検証: {妥当性判断}
```

### 注意

- 形式的に回答するのでは意味がない
- 「本当にこれで良いか？」と genuine に問うこと
- 問いが浅いと感じたら、さらに「なぜ？」を重ねる

---

## Step 4: 統合と批判（Reflexion）

1. **統合**: Step 2-3.5 の結果を統合
2. **Critique**: 統合結果を自己批判
   - 「この結論の弱点は？」
   - 「何を見落としている？」
3. **Refine**: 批判に基づき結論を改良

---

## Step 5: 結論

- **パラダイムシフト採用** → 新しい /plan を開始
- **局所解維持** → 根拠を明示して元の /plan を継続

---

## Step 6: Memory Logging (Auto)

プロセス完了を自己記録する:
```bash
python forge/gnosis/logger.py log "system" "/think Completed" --session "AutoLog"
```

---

## 出力形式

```
┌─[Hegemonikón]──────────────────────┐
│ M4 Phronēsis-S: 深層戦略完了       │
│ M3 Theōria-S: パラダイム分析完了   │
│ M5 Peira: 外部探索 [実行/スキップ] │
│ 複雑度: [Simple/Medium/Complex]    │
│ 局所解: [現状のアプローチ]         │
│ 大域解: [代替パラダイム]           │
│ 結論: [採用/棄却 + 根拠]           │
└────────────────────────────────────┘

📝 /think 完了

## Thinking Log
[思考過程の記録]
```
