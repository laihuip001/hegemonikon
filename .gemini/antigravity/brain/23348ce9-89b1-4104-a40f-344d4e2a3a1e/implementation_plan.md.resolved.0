# 品質体系統合 実装計画

> **目的**: Metrika/Chreos/Palimpsest/Graphē を /s, /ene に発動ロジックとして統合
> **前回の失敗**: 参照リンクのみで「統合」と誤認した

---

## 3プラン比較

| Plan | 特徴 | 工数 | 推奨 |
|:-----|:-----|:----:|:----:|
| **A Conservative** | /s STAGE 2 にチェックリスト追加のみ | 小 | |
| **B Robust** | /s + /ene に品質門ゲートを追加 | 中 | ✅ |
| **C Aggressive** | Python バリデータ実装 | 大 | |

---

## Plan B 詳細設計 (推奨)

### 変更ファイル

#### [MODIFY] [s.md](file:///home/laihuip001/oikos/.agent/workflows/s.md)

STAGE 2 (S3 Stathmos) に Metrika 5門チェックを追加:

```yaml
# STAGE 2 での追加
品質門チェック (Metrika):
  - [ ] Dokimē: テスト先行の確認
  - [ ] Syntomia: 複雑度制限の確認
  - [ ] Prosbasimotēs: a11yの確認 (該当時)
  - [ ] Atomos: コンポーネント分割の確認 (該当時)
  - [ ] Katharos: 死コード確認
```

#### [MODIFY] [ene.md](file:///home/laihuip001/oikos/.agent/workflows/ene.md)

PHASE 1 に Graphē 同期チェック、PHASE 4 に /dia 推奨を追加:

```yaml
# PHASE 1 での追加
Graphē 同期チェック:
  - [ ] Docstring 更新
  - [ ] README 使用例更新 (該当時)
  - [ ] コミットメッセージ形式

# PHASE 4 での追加
完了後推奨:
  → /dia で自己監査を推奨
```

---

## 検証計画

### 手動検証 (Creator)

1. `/s` を発動し、STAGE 2 で Metrika チェックリストが表示されることを確認
2. `/ene` を発動し、PHASE 1 で Graphē チェックが表示されることを確認
3. `/ene` 完了後に `/dia` 推奨が表示されることを確認

---

## 成功基準 (再掲)

| Must | 達成条件 |
|:-----|:---------|
| 発動 | /s STAGE 2 で Metrika 5門がチェックリストとして出現 |
| 連携 | /ene PHASE 4 で /dia 自動推奨が出現 |
| 記録 | 品質門の通過/不通過が出力に含まれる |

---

## 確認事項

> [!IMPORTANT]
> **Plan A/B/C のどれで進めますか？**
> 
> B (Robust) を推奨しますが、Creator の判断をお願いします。
