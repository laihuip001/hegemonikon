# HermÄ“neus é–‹ç™ºè¨ˆç”» â€” Phase 1: Expander + Parser æ­£å¼ç‰ˆ

> **HermÄ“neus (á¼™ÏÎ¼Î·Î½ÎµÏÏ‚)** = ç¿»è¨³è€…ã€è§£é‡ˆè€…
> CCL ã‚’ LMQL/LangGraph ã«ç¿»è¨³ã—ã€å®Ÿè¡Œä¿è¨¼ï¼ˆ>96%ï¼‰ã‚’æä¾›ã™ã‚‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©

---

## ğŸ“œ æ–‡è„ˆå¾©å…ƒ (2026-01-31 ä¼šè©±ã‚ˆã‚Š)

### è¨­è¨ˆçµŒç·¯

| ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ | æˆæœ |
|:-------------|:-----|
| `/zet+` | CCL å®Ÿè¡Œä¿è¨¼ã®æ¬ è½ã‚’5å±¤ã§åˆ†æ |
| `/noe!*~/u+` | LLM = äºˆæ¸¬ã‚¨ãƒ³ã‚¸ãƒ³ã€100% ä¿è¨¼ã¯åŸç†çš„ã«ä¸å¯èƒ½ã¨èªè­˜ |
| `/sop+` | ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£èª¿æŸ» (Perplexity) |
| `/tak+` | 9ã‚¿ã‚¹ã‚¯ã€27-37h ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— |

### åˆ°é”ã—ãŸæ´å¯Ÿ

> **LLM å˜ä½“ã§ã¯åŸç†çš„ã«å®Ÿè¡Œä¿è¨¼ã¯ä¸å¯èƒ½ã€‚**
> ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆDSL + æ¤œè¨¼å™¨ + Multi-Agentï¼‰ã§ **>96% ä¿¡é ¼åº¦** ã¯é”æˆå¯èƒ½ã€‚

### æ¨å¥¨ 4å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æœ€é©åŒ–å±¤ (Optimization)            â”‚
â”‚  DSPy Optimizer / Teleprompter         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      åˆ¶å¾¡å±¤ (Control / DSL)              â”‚
â”‚  LMQL / Guidance / Outlines              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      å®Ÿè¡Œå±¤ (Execution)                  â”‚
â”‚  CodeAct / LangGraph / AutoGen          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æ¤œè¨¼å±¤ (Verification)               â”‚
â”‚  Constrained Decoding + Multi-Agent     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¾çŠ¶åˆ†æ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | çŠ¶æ…‹ | ãƒ•ã‚¡ã‚¤ãƒ« |
|:---------------|:-----|:---------|
| **AST å®šç¾©** | âœ… PoCå®Œäº† | [mekhane/ccl/lmql_translator.py](file:///home/laihuip001/oikos/hegemonikon/mekhane/ccl/lmql_translator.py) |
| **CCLParser** | âœ… PoCå®Œäº† | åŒä¸Š |
| **LMQLTranslator** | âœ… PoCå®Œäº† | åŒä¸Š |
| **MacroExpander** | âœ… å­˜åœ¨ | [mekhane/ccl/macro_expander.py](file:///home/laihuip001/oikos/hegemonikon/mekhane/ccl/macro_expander.py) |
| **æ­£å¼ç‰ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«** | âŒ æœª | `hermeneus/src/` (ç©º) |
| **ãƒ†ã‚¹ãƒˆ** | âŒ æœª | `hermeneus/tests/` (ç©º) |

---

## Proposed Changes

### [NEW] `hermeneus/src/ast.py` â€” AST ãƒãƒ¼ãƒ‰åˆ†é›¢

[lmql_translator.py](file:///home/laihuip001/oikos/hegemonikon/mekhane/ccl/lmql_translator.py) ã‹ã‚‰æŠ½å‡º:
- [OpType](file:///home/laihuip001/oikos/hegemonikon/mekhane/ccl/lmql_translator.py#25-41), [Workflow](file:///home/laihuip001/oikos/hegemonikon/mekhane/ccl/lmql_translator.py#43-51), [Condition](file:///home/laihuip001/oikos/hegemonikon/mekhane/ccl/lmql_translator.py#53-60), [ConvergenceLoop](file:///home/laihuip001/oikos/hegemonikon/mekhane/ccl/lmql_translator.py#62-68), [Sequence](file:///home/laihuip001/oikos/hegemonikon/mekhane/ccl/lmql_translator.py#70-75)
- **è¿½åŠ **: CPL v2.0 æ§‹æ–‡ (`ForLoop`, `IfCondition`, `WhileLoop`)

---

### [NEW] `hermeneus/src/expander.py` â€” çœç•¥å½¢å±•é–‹

- `/noe+` â†’ `lim[V[]<0.3]{/o1++ --mode=nous}`
- `>>` â†’ `lim[cond]{...}`
- `@macro` â†’ å±•é–‹æ¸ˆã¿ CCL

---

### [NEW] `hermeneus/src/parser.py` â€” CCL ãƒ‘ãƒ¼ã‚µãƒ¼

- Lark ãƒ™ãƒ¼ã‚¹ã®æ­£å¼å®Ÿè£…
- CPL æ§‹æ–‡ ([F:](file:///home/laihuip001/oikos/hegemonikon/LICENSE), [I:](file:///home/laihuip001/oikos/hegemonikon/LICENSE), [W:](file:///home/laihuip001/oikos/hegemonikon/LICENSE), [L:](file:///home/laihuip001/oikos/hegemonikon/LICENSE)) å¯¾å¿œ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–

---

### [NEW] `hermeneus/src/translator.py` â€” LMQL å¤‰æ›

PoC [LMQLTranslator](file:///home/laihuip001/oikos/hegemonikon/mekhane/ccl/lmql_translator.py#184-292) ã‹ã‚‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿

---

### [NEW] `hermeneus/tests/test_parser.py` â€” å˜ä½“ãƒ†ã‚¹ãƒˆ

```python
test_cases = ['/noe+', '/bou-', '/s+_/ene', '/noe+ >> V[] < 0.3']
```

---

## Verification Plan

```bash
cd /home/laihuip001/oikos/hegemonikon
source .venv/bin/activate
pytest hermeneus/tests/test_parser.py -v
```

---

## /tak+ ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— (2026-01-31)

| æœŸé™ | å„ªå…ˆåº¦ | ã‚¿ã‚¹ã‚¯ | å·¥æ•° |
|:-----|:-------|:-------|:-----|
| **WEEK** | Must | Expander å®Ÿè£… | 4-6h |
| **WEEK** | Must | Parser (Lark) å®Ÿè£… | 6-8h |
| **WEEK** | Must | AST åˆ†é›¢ | 2-3h |
| **3WEEKS** | Should | LMQL ãƒ©ãƒ³ã‚¿ã‚¤ãƒ çµ±åˆ | 6-8h |
| **3WEEKS** | Should | Constrained Decoding | 4-6h |
| **2MONTHS** | Could | LangGraph çµ±åˆ | 6-8h |

**åˆè¨ˆ**: 27-37h

---

*Created: 2026-02-01 | Origin: 2026-01-31 CCL Execution Guarantee Architecture ä¼šè©±*
