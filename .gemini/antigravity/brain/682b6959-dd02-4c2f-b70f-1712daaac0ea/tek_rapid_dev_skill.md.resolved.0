---
# Skill Metadata (必須)
id: "U2"
name: "rapid-dev"
series: "Utils"

description: |
  Hegemonikón 開発速度向上スキル — コード生成、タスク分解、自動化を最適化。
  ⚡ Speed + 🤖 Autonomy ハイブリッドアーキタイプ。
  
  Triggers:
  - 「開発を高速化したい」
  - 「効率よく実装したい」
  - 「タスクを分解して」
  - 「コード生成」
  - 「自動化」
  - 「rapid」

# 発動条件 (必須)
triggers:
  - 開発速度向上
  - タスク分解
  - コード生成
  - 効率化
  - 自動化

# キーワード (必須)
keywords:
  - rapid
  - speed
  - automation
  - code-generation
  - task-decomposition

# 関連スキル (必須)
related:
  upstream: ["O4 Energeia", "S4 Praxis"]
  downstream: ["tekhne-maker"]
  x_series: ["X-OS: Praxis→Energeia連携による行動実行"]

# メタデータ (必須)
lineage: "/tek v2.0 生成 — Hegemonikón開発速度向上スキル"
anti_skip: enabled
version: "1.0.0"
---

# U2 Rapid-Dev: 開発速度向上スキル

> **Archetype**: ⚡ Speed (Primary) + 🤖 Autonomy (Secondary)
>
> **勝利条件**: レイテンシ < 2秒 / 人間介入 < 10%
>
> **犠牲**: 精度 (95%許容)

---

## Overview

Hegemonikón 開発において「考える時間より手を動かす時間を増やす」ためのスキル。
タスクの自動分解、コードスケルトン生成、定型処理の自動化を通じて、Creator の認知負荷を最小化する。
Antigravity IDE, Claude, Gemini いずれの環境でも発動可能。
主な対象は Hegemonikón フレームワーク内のスキル・ワークフロー開発、Python/TypeScript 実装。
Speed アーキタイプの「即時応答」と Autonomy アーキタイプの「自律実行」を組み合わせ、
Creator の承認待ち時間を最小化しつつ、破壊的操作はエスカレーションする。

---

## Core Behavior

1. **タスク受信時**: 即座に分解可能か判断 (2秒以内)
2. **分解可能**: 3-5個のサブタスクに分解し、依存関係を明示
3. **コード生成要求**: スケルトン + TODO コメント付きで生成
4. **ファイル操作**: 新規作成は即実行、削除は確認待ち
5. **テスト生成**: 実装と同時にテストスケルトンを生成
6. **エラー発生時**: 3回リトライ後、Fallback 実行
7. **不確実な場合**: 「A or B?」形式で最小限の確認
8. **並列実行可能**: 独立タスクは並列実行
9. **進捗報告**: 5ツール呼び出しごとに状態更新
10. **完了時**: 成果物サマリーを1行で報告

---

## Quality Standards

| 指標 | 基準値 | 測定方法 |
|:-----|:-------|:---------|
| 応答レイテンシ | < 2秒 (判断) | ツール呼び出し間隔 |
| タスク分解精度 | 依存関係 100% 正確 | 実行順序の妥当性検証 |
| コード生成品質 | 構文エラー 0 | linter 自動実行 |
| 自律実行率 | > 90% | 人間確認要求回数 |
| リトライ上限 | 3回 | エラーカウント |

---

## Edge Cases

| ケース | 対応 | Fallback |
|:-------|:-----|:---------|
| 超大規模タスク (10+ サブタスク) | 3階層に分解 | 上位3つのみ提示し残りは次フェーズ |
| 曖昧な要件 | 「A or B?」確認 | 最悪ケース仮定で進行 |
| 依存パッケージ不明 | pyproject.toml/package.json 参照 | 一般的なバージョンを仮定 |
| 破壊的操作 (削除/上書き) | 明示的確認 | 操作中断 |
| コンテキスト長超過 | 履歴を要約 | 最新5ターンのみ保持 |

---

## Examples

### Example 1: タスク分解

**Input**: 「FEP エージェントにログ機能を追加したい」

**Output**:
```markdown
## タスク分解

1. [ ] fep_agent.py に Logger インスタンスを追加
   - 依存: なし
2. [ ] 主要メソッド (infer_action, update_beliefs) にログ出力を追加
   - 依存: 1
3. [ ] tests/test_fep_agent.py にログ出力テストを追加
   - 依存: 2
4. [ ] ログレベル設定を環境変数化
   - 依存: 1

→ 1 から順に実行しますか? (y/n)
```

**解説**: タスクを最小単位に分解し、依存関係を明示。Creator は全体像を把握した上で承認できる。
依存関係がない場合は並列実行可能であることも示唆している。

---

### Example 2: コードスケルトン生成

**Input**: 「dispatch log に記録するユーティリティ関数」

**Output**:
```python
# dispatch_utils.py
"""Dispatch Log ユーティリティ関数"""

from pathlib import Path
from datetime import datetime
from typing import Optional

# TODO: DISPATCH_LOG_PATH を環境変数から取得
DISPATCH_LOG_PATH = Path(".agent/dispatch_log.md")


def record_dispatch(
    workflow: str,
    status: str,
    duration_sec: Optional[float] = None,
    notes: Optional[str] = None,
) -> None:
    """
    Dispatch Log にエントリを追記。
    
    Args:
        workflow: 実行したワークフロー名 (例: "/boot", "/bye")
        status: 実行結果 ("SUCCESS" | "PARTIAL" | "FAILED")
        duration_sec: 実行時間 (秒)
        notes: 追加メモ
    
    # TODO: 実装
    """
    pass


def get_dispatch_count() -> int:
    """
    Dispatch Log のエントリ数を取得。
    
    Returns:
        エントリ数 (Phase B 移行条件: 50)
    
    # TODO: 実装
    """
    pass
```

**解説**: 関数シグネチャ、docstring、TODO コメントを含むスケルトンを生成。
Creator は TODO を埋めるだけで実装完了できる。型ヒントも必ず付与。

---

### Example 3: 自動化判断

**Input**: 「tests/ 全体に対して pytest を実行して結果をまとめて」

**Output**:
```
> 自律実行: pytest tests/ --tb=short -q

結果: 15 passed, 0 failed (4.2s)

→ 詳細レポートが必要ですか? (y/n)
```

**解説**: 非破壊的操作は即実行し、結果のみ報告。
詳細が必要な場合のみ追加情報を提供する「情報プル」設計。

---

## Pre-mortem

| 失敗シナリオ | 確率 | 対策 |
|:-------------|:-----|:-----|
| タスク分解が細かすぎて逆に遅延 | 中 | 分解上限5、超過時は階層化 |
| 生成コードが実行不能 | 低 | スケルトン + TODO 形式で確実性優先 |
| 自律実行が暴走 | 低 | 破壊的操作は必ず確認、10回リトライで停止 |

---

## References

- references/archetypes.md — Speed + Autonomy ハイブリッド構成
- references/quality-checklist.md — S1-S5, A1-A6 チェック適用
- references/wargame-db.md — Token Explosion, Context Overflow 対策

---

## Version History

| Version | Date | Changes |
|:--------|:-----|:--------|
| 1.0.0 | 2026-01-28 | /tek v2.0 による初版生成 |
