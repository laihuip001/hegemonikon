# Claude-Jules マルチエージェントシステム実装計画

## 概要

Claude（親エージェント）から Jules API（子ワーカー）を呼び出し、18並列でコード生成タスクを処理するシステムを構築する。

---

## Proposed Changes

### Phase 1: MCP Wrapper 実装（1-2週間）

#### [NEW] [jules_client.py](file:///home/laihuip001/oikos/hegemonikon/mekhane/symploke/jules_client.py)

Jules API クライアント実装:
- セッション作成 (`POST /v1alpha/sessions`)
- ポーリング (`GET /sessions/{id}`)
- 18キーローテーション
- 指数バックオフによるリトライ

#### [NEW] [jules_mcp_server.py](file:///home/laihuip001/oikos/hegemonikon/mcp/jules_mcp_server.py)

MCP Server 実装:
- `jules_create_task`: タスク作成ツール
- `jules_get_status`: ステータス確認ツール
- `jules_batch_execute`: 並列実行ツール

#### [MODIFY] [tools.yaml](file:///home/laihuip001/oikos/.agent/tools.yaml)

MCP セクションに Jules を追加

---

### Phase 2: Claude 統合（3-5日）

#### [NEW] [jules_orchestrator.py](file:///home/laihuip001/oikos/hegemonikon/mekhane/symploke/jules_orchestrator.py)

オーケストレーション機能:
- タスク分割・配分
- 結果集約
- エラーハンドリング

---

### Phase 3: 検証（1週間）

#### [NEW] [test_jules_client.py](file:///home/laihuip001/oikos/hegemonikon/tests/test_jules_client.py)

単体テスト:
- API モック
- エラーケース

---

## User Review Required

> [!IMPORTANT]
> **Ultra プラン必須**: 18並列実行には Ultra ($124.99/month) が必要

> [!WARNING]
> **API キー制限**: 1ユーザー = 3キーまで。18キー運用には 6アカウント必要

---

## Verification Plan

### Automated Tests

```bash
# Phase 1 完了後
cd /home/laihuip001/oikos/hegemonikon
python -m pytest tests/test_jules_client.py -v

# MCP Server 動作確認
python mcp/jules_mcp_server.py --test
```

### Manual Verification

1. Jules API 単体呼び出し（1タスク）
2. 3並列テスト
3. 18並列負荷テスト

---

## 実装ロードマップ

| Phase | 期間 | タスク |
|------|------|--------|
| 1 | 1-2週間 | MCP Wrapper + ポーリング |
| 2 | 3-5日 | Claude 統合 |
| 3 | 1週間 | 検証 |
| 4 | 継続 | 本番監視 |

---

*Generated by Hegemonikón O4 Energeia 2026-01-27*
