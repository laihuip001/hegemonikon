# S2 Mekhanē+: 出力省略問題の原因究明

> **CCL**: `/mek+ --mode=inve`
> **対象**: 「出力省略しすぎ」問題

---

## 原因分析

### 1. 根本原因: Universal Artifact Standard の副作用

```yaml
# workflow_artifact_standard.md より
原則: "チャットには最小限の出力のみ。詳細は全てファイルに保存。"
```

**問題**: この原則が**過剰適用**されている

| 期待 | 現実 |
|:-----|:-----|
| 詳細 → ファイル保存 | ✅ 正しい |
| サマリー → チャット | ❌ サマリーすら省略 |

---

### 2. 具体的な省略パターン

| シナリオ | 省略されたもの | あるべき姿 |
|:---------|:---------------|:-----------|
| `/zet+` | PHASE詳細 | 各PHASEの出力形式を遵守 |
| `@dig` | 振動の各ステップ | 各演算子の結果を明示 |
| CCL 複合 | 中間結果 | 各オペレータの結果を表示 |

---

### 3. 二重拘束 (Double Bind)

```
「省略せよ」(Artifact Standard)
   vs
「省略するな」(Anti-Skip Protocol)
```

**現在の曖昧さ**:
- Anti-Skip = SKILL.md 読み込み必須
- しかし「出力形式を守れ」とは**明示されていない**

---

## 対応パッチ設計

### Patch 1: Output Integrity Protocol

```yaml
# 追加原則
output_integrity:
  rule: "各PHASE/演算子の出力形式を必ず遵守"
  scope: "ワークフロー実行時"
  exemption: "ユーザーが明示的に `-` 演算子を使用した場合のみ省略可"
```

**実装先**: [.agent/standards/workflow_artifact_standard.md](file:///home/laihuip001/oikos/.agent/standards/workflow_artifact_standard.md)

---

### Patch 2: 演算子の明確化

| 演算子 | 意味 | 出力量 |
|:-------|:-----|:-------|
| `+` | 詳細 | **最大** (省略禁止) |
| (なし) | 標準 | 中程度 |
| `-` | 縮約 | 最小限 (省略OK) |

**重要**: `+` を使用した場合、**省略は許可されない**

---

### Patch 3: CCL 複合コマンドの中間出力

```
@dig = /s+~(/p*/a)_/dia*/o+

展開時の出力規則:
1. /s+ → 出力
2. ~(/p*/a) → 出力
3. /dia* → 出力
4. /o+ → 出力
```

**実装**: マクロ展開時に各ステップの出力を強制

---

## 実装対象ファイル

| ファイル | 変更内容 |
|:---------|:---------|
| `workflow_artifact_standard.md` | Output Integrity Protocol 追加 |
| [boot.md](file:///home/laihuip001/oikos/.agent/workflows/boot.md) | 出力規則のリマインド追加 |
| 各 SKILL.md | 出力形式遵守の明示化 |

---

## /bye への Doxa 蓄積機能追加

```yaml
# Step 3.13: CCL パターン蓄積
ccl_pattern_collection:
  trigger: "/bye 実行時"
  action:
    1. セッション中の CCL 使用履歴を表示
    2. ユーザーに「記録価値あり」を選択させる
    3. 選択されたパターンを /dox に投入
  target: 30 patterns
```

---

*Generated by S2 Mekhanē+ (inve)*
