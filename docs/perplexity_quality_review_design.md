# Perplexityタスク活用設計 — 品質レビュー機構

## 核心発見（パプ君調査結果）

> **Perplexity Tasks は Web UI 専用。API経由での定時自動実行は未対応。**

### 推奨アーキテクチャ

```
[GitHub Actions cron] → [Perplexity API] → [レビューレポート]
         ↓
    毎週月曜 9:00 JST
         ↓
[Ruff/SonarQube] → [コード品質JSON]
         ↓
[Perplexity sonar-pro] → [専門家レビュー生成]
         ↓
[GitHub Check / Slack通知]
```

---

## レビュー観点マトリクス

| ドメイン | 観点 | 基準 | 自動化度 |
|----------|------|------|----------|
| **コード** | 複雑度 | CC≤15, CC_cog≤25 | 95% |
| | テスト | Coverage≥80% | 90% |
| | セキュリティ | OWASP Bandit | 90% |
| | 命名規則 | PEP8/ESLint | 100% |
| **文書** | 用語統一 | JTF標準 | 95% |
| | 文体 | です・ます統一 | 90% |
| **3M品質** | ムリ | 複雑度アラート | 80% |
| | ムダ | デッドコード=0 | 90% |
| | ムラ | カバレッジ分散≤10% | 70% |
| **思想・理論** | FEP整合性 | 最新論文照合 | 60% |
| | ギリシャ語 | 正確性検証 | 手動 |

---

## Perplexityタスク用 Instructions

### パターン1: コード品質レビュー（技術面）

```markdown
あなたは Hegemonikon リポジトリの品質レビュー AI エージェントです。
https://github.com/laihuip001/hegemonikon を分析してください。

### チェック項目

1. **コード品質**（ISO 25010準拠）
   - 複雑度: CC > 15 の関数を検出
   - テスト: カバレッジ 80% 未満のファイル
   - セキュリティ: OWASP Top 10 該当パターン

2. **3M品質**（トヨタ生産方式）
   - ムリ: 過負荷な関数（複雑度過大）
   - ムダ: 未使用コード、重複ロジック
   - ムラ: テストカバレッジのばらつき

3. **文書品質**（JTF標準）
   - 用語統一: 推論/エージェント等
   - 文体: です・ます体の一貫性

### 出力形式

# ✅ Hegemonikón Quality Review — {date}

## 📊 総合スコア: XX/100

### 修正優先度
1. **HIGH** — {具体的指摘}
2. **MEDIUM** — {具体的指摘}

出力言語: 日本語
```

### パターン2: 理論・思想レビュー（抽象面）

```markdown
あなたは神経科学・認知科学の専門家として Hegemonikon を評価してください。
https://github.com/laihuip001/hegemonikon

### 評価観点

1. **FEP（自由エネルギー原理）との整合性**
   - Active Inference の正確な実装か
   - 用語の使用法が学術的に正確か
   - 最新論文（2024-2026）との整合性

2. **ギリシャ語用語の正確性**
   - Aisthēsis, Theōria, Praxis 等の語源的正確性
   - ストア派哲学との概念的整合性

3. **認知アーキテクチャの妥当性**
   - 12機能体系の理論的根拠
   - O/T/K/X series の数学的構造

出力言語: 日本語
```

---

## 次ステップ

1. [ ] GitHub Actions ワークフロー作成
2. [ ] Perplexity API キー設定
3. [ ] レビュープロンプト最適化
4. [ ] パイロット運用（週1回）
