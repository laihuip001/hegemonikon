# 比喩一貫性の詩人 レビュー

## 対象ファイル
`mekhane/pks/push_dialog.py`

## 判定
発言（要改善）

## 発見事項
- **(Medium) 比喩混在: 工場 vs 庭園 vs 鉱山**
  - **鉱山 (Nugget)**: `KnowledgeNugget` という「鉱石/資源」を扱うオブジェクトが核となっている。
  - **工場 (Push/Score)**: `Push` (配送/強制), `Score` (指標/評価), `Source` (原料/供給元) という工場的用語が散見される。
  - **庭園/対話 (Dialog/Deepened)**: `Dialog` (対話/社会), `deeper` (根を張る/掘る?), `related` ( rhizome?) という有機的・探索的な動詞/形容詞がメソッド名に使用されている。
  - **矛盾**: 無生物である `Nugget` に対して `Dialog` (対話) を行うという比喩的不整合がある。「対話」ならば相手は `Agent` であるべきだし、「鉱石」ならば `Inspector` (検査官) や `Explorer` (探査機) であるべき。

- **(Low) 命名規則不統一: 動詞の欠如**
  - `why()`, `deeper()`, `related()` は動詞を含まないメソッド名（疑問詞/形容詞のみ）である。
  - 同ドメインの `pks_engine.py` (`score`, `extract`, `save_history`) は標準的な `verb_noun` 形式を採用しており、統一感を欠く。
  - 推奨される形式: `explain_why()`, `explore_deeper()` / `dig_deeper()`, `find_related()`。

- **(Low) 抽象度の不統一: Manager vs Helper**
  - `PushDialog` は対話の管理者 (Manager) として振る舞うべきだが、内部で `_why_template` という低レベルな文字列操作 (Helper/Formatter) を直接行っている。
  - また `related` メソッド内で `GnosisIndex` を直接 import しており、依存関係の隠蔽 (Hidden Dependency) が発生している。

## 重大度
Medium

## 改善案 (Conceptual)

```python
# 案1: 「探査 (Exploration/Mining)」に統一する場合
# クラス名を KnowledgeExplorer に変更し、動詞を「掘る/探す」系に統一
class KnowledgeExplorer:
    def explain_origin(self, nugget: KnowledgeNugget) -> str: ...  # why -> explain_origin (鉱脈の起源)
    def dig_deeper(self, nugget: KnowledgeNugget, query: str) -> str: ...  # deeper -> dig_deeper (深掘り)
    def prospect_adjacent(self, nugget: KnowledgeNugget) -> list[KnowledgeNugget]: ...  # related -> prospect_adjacent (隣接鉱区の試掘)

# 案2: 「対話 (Dialog/Social)」に統一する場合
# Nugget を Agent 化し、Nugget 自体が語るように見せる
class KnowledgeAgent:
    def speak_reason(self) -> str: ...  # why -> speak_reason
    def answer_question(self, query: str) -> str: ...  # deeper -> answer_question
    def introduce_peers(self) -> list['KnowledgeAgent']: ...  # related -> introduce_peers
```
