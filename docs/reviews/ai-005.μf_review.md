# コード/コメント矛盾検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/gnosis_chat.py`

## 判定
発言（要改善）

## 発見事項
- **(High) `GnosisChat.ask` Returns不一致**
  - docstringには `answer, sources, retrieval_time, generation_time` のみが記載されていますが、実際の戻り値には `context_docs`, `turn` も含まれています。
  - 提案: docstringのReturnsに `context_docs`, `turn` を追加してください。

- **(High) `KnowledgeIndexer._chunk_text` Args不一致**
  - docstringに `Args` セクションがなく、引数 `text`, `chunk_size`, `overlap` の説明が不足しています。
  - 提案: docstringにArgsセクションを追加し、各引数を説明してください。

- **(High) `KnowledgeIndexer.index_knowledge` Args不一致**
  - docstringに引数 `force_reindex` の説明がありません。
  - 提案: docstringのArgsに `force_reindex` の説明を追加してください。

- **(Medium) `KnowledgeIndexer.discover_knowledge_files` 処理乖離**
  - コメント `# 2. Session logs (mneme/sessions)` は一般的なセッションログを示唆していますが、コードは `2026-*_conv_*.md` と2026年のファイルに限定しています。年が変わった際に意図せずファイルが無視される可能性があります。
  - 提案: コメントを `# 2. Session logs (2026)` と具体化するか、コードのグロブパターンを汎用的に修正してください。

## 重大度
High
