# 再試行ロジック評価者 レビュー

## 対象ファイル
`mekhane/symploke/jules_client.py`

## 発見事項
1. **ジッター（揺らぎ）の欠如**: `with_retry` デコレータおよび `poll_session` 内のバックオフ実装において、待機時間にランダムなジッターが含まれていません。複数の並行リクエストが同時にレート制限にかかった場合、同期して再試行を行い、再び同時に制限にかかる「サンダリング・ハード（Thundering Herd）」問題を引き起こす可能性があります。`random.uniform` 等を用いて待機時間を分散させることが推奨されます。

2. **Retry-After ヘッダー解析の堅牢性**: `_request` メソッド内で `Retry-After` ヘッダーを `int()` でキャストしていますが、HTTP仕様上、このヘッダーは日付形式（HTTP-date）で返される場合もあります。数値以外の文字列が返された場合、`ValueError` が発生し、適切な再試行処理が行われずにクラッシュするリスクがあります。キャスト失敗時の例外処理を追加し、デフォルトのバックオフにフォールバックする安全策が必要です。

3. **再試行設定の固定化**: `create_session` と `get_session` に適用されている `@with_retry` のパラメータ（`max_attempts=3` 等）がコード内にハードコードされており、クライアントの初期化時や実行時に調整できません。これらをクラス定数または設定可能なパラメータとして外部化することで、柔軟性が向上します。

## 重大度
- Medium

## 沈黙判定
- 発言（要改善）
