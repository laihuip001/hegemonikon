# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/fep/tests/test_attractor_advisor.py`

## 判定
発言（要改善）

## 発見事項
- **Recommendation Dataclass フィールド未対応 (High)**: `mekhane/fep/attractor_advisor.py` の `Recommendation` クラスに `cognitive_types`, `boundary_crossings`, `pw_suggestion`, `knowledge_context` フィールドが追加されましたが、`test_recommend_clear` 等のテストケースでこれらが検証されていません。利用側（テストコード）がデータ構造の全容を把握しておらず、暗黙の契約違反となっています。
- **LLM フォーマット出力の未検証 (Medium)**: `AttractorAdvisor.format_for_llm` の出力に `[CognitiveType]`, `[Boundary]`, `[PW boost]`, `[Knowledge]` 行が追加されましたが、`test_format_for_llm_clear` 等で検証されていません。出力形式の変更に対する検証が不足しています。

## 重大度
High
