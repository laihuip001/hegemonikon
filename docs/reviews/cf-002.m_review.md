# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/pks/push_dialog.py`

## 判定
発言（要改善）

## 発見事項
- **フィールド不足 (High)**: `related()` メソッド内で `KnowledgeNugget` を生成する際、`GnosisIndex` の検索結果には `url` や `authors` が含まれているにもかかわらず、これらを無視してデフォルト値 (`None`) のままにしています。これにより、`to_markdown()` 等で出力される情報が不完全になります。
- **関連度スコア算出ロジックの不一致 (High)**: `pks_engine.py` の `RelevanceDetector` では `1.0 - (distance / 2.0)` でスコアを算出していますが、`push_dialog.py` では `1.0 - distance` となっており、同一の検索エンジン結果に対して異なる評価基準を適用しています。
- **依存関係のハードコード (Medium)**: `related()` メソッド内で `GnosisIndex()` を引数なしでインスタンス化しており、`PKSEngine` で設定可能な `lance_dir` などの構成を共有できない設計になっています。

## 重大度
High
