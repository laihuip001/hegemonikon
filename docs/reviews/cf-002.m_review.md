# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/mcp/sympatheia_mcp_server.py`

## 判定
発言（要改善）

## 発見事項
- **プライベート関数への依存 (High)**: `mekhane/api/routes/sympatheia.py` の内部ヘルパー関数 `_read_json` および `_load_config` を直接呼び出している。これらはモジュール外への公開を意図しておらず、シグネチャや挙動が予告なく変更される可能性がある。
- **内部ファイルパスのハードコード (High)**: `sympatheia_status` ツール内で `wbc_state.json`, `heartbeat.json`, `git_sentinel.json` 等のファイル名を直接指定している。これらは `sympatheia.py` の実装詳細（内部定数やローカル変数）であり、一元管理されていないため、変更時に同期漏れが発生する。
- **JSON構造への暗黙の依存 (Medium)**: 各 state ファイル（例: `wbc_state.json` の `totalAlerts`, `git_sentinel.json` の `dirty`）の内部構造を仮定してアクセスしている。正規のデータモデル（Pydanticモデルなど）を介さず、生JSONを直接パースしているため、構造変更に脆弱である。

## 重大度
High
