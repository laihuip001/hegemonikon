# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/pks/push_dialog.py`

## 判定
発言（要改善）

## 発見事項
- **フィールド未対応 (High)**: `KnowledgeNugget` は `url`, `authors` フィールドを持つが、`PushDialog.related` でのインスタンス化時にこれらが無視されている。`GnosisIndex` はこれらのデータを返却しているため、不必要な情報欠落が発生している。
- **ロジック/定数の不一致 (Medium)**: `relevance_score` の計算式が `PKSEngine` (`1.0 - distance / 2.0`) と `PushDialog` (`1.0 - distance`) で異なっている。`GnosisIndex` (LanceDB + BGE) の距離尺度に対する解釈が統一されていない。
- **構成の暗黙的仮定 (Medium)**: `GnosisIndex` をデフォルト引数で初期化しているため、`PKSEngine` でカスタム `lance_dir` が使用されている場合に、異なるインデックスを参照する可能性がある。

## 重大度
High
