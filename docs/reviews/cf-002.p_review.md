# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/export_chats.py`

## 判定
発言（要改善）

## 発見事項

### 1. 外部呼び出しとの契約不一致 (Critical)
`mekhane/anamnesis/auto_export.sh` (L31) が `export_chats.py` を `--all` オプション付きで呼び出しているが、`export_chats.py` の `argparse` 定義に `--all` が存在しない。
これにより、自動エクスポート処理が `unrecognized arguments: --all` エラーで失敗する。これは明示的なインターフェース契約違反である。

### 2. 外部アプリケーション構造への過度な依存 (High)
本スクリプトは Antigravity IDE の内部 DOM 構造（`jetski-agent.html` や `button.select-none`、`.flex.flex-col.gap-y-3` 等の具体的クラス名）に強く依存している。
これは「File A が File B の内部構造を仮定している」典型例であり、File B（Antigravity IDE フロントエンド）が更新されると即座に機能不全に陥る脆弱な暗黙契約である。

### 3. 環境依存のハードコード (Medium)
`DEFAULT_OUTPUT_DIR` (L43) や `LOG_FILE` (auto_export.sh 内) に `/home/makaron8426/...` という特定のユーザー環境の絶対パスがハードコードされている。
これはポータビリティの暗黙契約に違反しており、他の開発者や環境での実行を妨げる。

## 重大度
Critical
