# 暗黙契約違反検出者 レビュー

## 対象ファイル
`hermeneus/src/dispatch.py`

## 判定
発言（要改善）

## 発見事項
- **Critical**: `hermeneus/src/dispatch.py` をスクリプトとして実行すると、同一ディレクトリ内の `ast.py` が標準ライブラリ `ast` を隠蔽（シャドウイング）してしまい、`dataclasses` -> `inspect` -> `ast` のインポート連鎖で循環参照エラーが発生する。このため、ドキュメント通りの使用法 (`python hermeneus/src/dispatch.py ...`) が機能しない。
- **High**: `extract_workflows` 関数が `hermeneus/src/ast.py` で定義された制御構文ノード (`ForLoop`, `IfCondition`, `WhileLoop`, `Lambda`) を処理していないため、これら内部のワークフローが抽出漏れする。
- **Medium**: `format_ast_tree` 関数で `ForLoop`, `IfCondition`, `WhileLoop` をインポートしているが、分岐処理 (`elif`) が実装されていないため、AST の木構造表示が不完全になる。
- **Low**: `format_ast_tree` 内の `ops_map` に `OpType.DESCEND` (`√`) が欠落している。

## 重大度
Critical
