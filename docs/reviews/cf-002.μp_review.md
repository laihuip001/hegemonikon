# 暗黙契約違反検出者 レビュー

## 対象ファイル
`hermeneus/src/dispatch.py`

## 判定
発言（要改善）

## 発見事項
- **Enum非網羅 (High)**: `hermeneus/src/ast.py` に追加された制御構造 (`ForLoop`, `IfCondition`, `WhileLoop`, `Lambda`) が `extract_workflows` で処理されていません。これらに含まれるワークフロー ID が抽出されず、実行計画テンプレートに反映されません。
- **Enum非網羅 (High)**: `OpType` に追加された演算子 (`DESCEND`, `FUSE`, `OSC` 等) が `format_ast_tree` 内の `ops_map` に存在しません。`Workflow.operators` にこれらの演算子が含まれる場合、AST 表示で無視されます。
- **フィールド未対応 (Medium)**: `format_ast_tree` が新しい制御構造ノード (`ForLoop`, `IfCondition`, `WhileLoop`, `Lambda`) のフィールド (`body`, `then_branch`, `else_branch` 等) を認識しておらず、汎用の `__str__` 表記にフォールバックしています。これにより、AST の木構造インデントが崩れ、視認性が低下しています。

## 重大度
High
