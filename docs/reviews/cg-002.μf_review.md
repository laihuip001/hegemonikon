# 認知チャンク分析者 レビュー

## 対象ファイル
`scripts/attractor_dashboard.py`

## 判定
発言（要改善）

## 発見事項
- **Line 113 (Medium)**: 1行に5演算/関数呼び出し以上（インデックス操作と計算の混在）
  - 現状: `windows_sampled = analysis["entropy_windows"][::max(1, len(analysis["entropy_windows"]) // 500)]`
  - 提案: ステップ計算を変数に分離する
- **Line 207 (Medium)**: 1行に複雑なリスト内包表記と文字列操作（f-string内のループ）
  - 現状: `{"".join(f'<span class="phase-tag">Phase {i+1}: cycles {p["start"]}-{p["end"]} (entropy ≈ {p["mean_entropy"]:.2f})</span>' for i, p in enumerate(analysis["phases"]))}`
  - 提案: HTML生成ロジックを事前に変数または関数に分離する
- **Line 268 (Low)**: 1行に5演算/関数呼び出し（条件演算子とパス操作の連結）
  - 現状: `output_path = args.output or str(Path.home() / "oikos/hegemonikon/logs/fep_dashboard.html")`
  - 提案: デフォルトパスの構築を分離する

**注記**: 対象ファイル `scripts/attractor_dashboard.py` が存在しないため、同等の機能を持つ `scripts/fep_dashboard.py` を分析しました。

## 重大度
Medium
