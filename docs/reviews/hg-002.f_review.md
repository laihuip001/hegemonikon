# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/dendron/models.py`

## 判定
発言（要改善）

## 発見事項
- **VariableProof.check_type の型が不明瞭 (Medium)**
  - `check_type` が `str` で定義されており、許容される値（"type_hint", "short_name"）がコメントでしか予測できない。呼び出し元でどのような値をセットすべきか、読み取り側で何が来るかが型定義から不明。
  - **提案**: `CheckType` Enum を定義し、それを使用する。

- **CheckResult の状態不整合リスク (Medium)**
  - `total_files` や `files_with_proof` などの集計値と、`file_proofs` リストが独立したフィールドとして定義されている。リストの内容と集計値が食い違う「驚き」が発生しうる（例: `file_proofs` は空なのに `total_files` が 10 など）。
  - **提案**: `file_proofs` を正とし、集計値は `@property` で動的に算出するか、ファクトリメソッドで生成時に整合性を保証する（不変オブジェクト化推奨）。

- **CheckResult.level_stats の冗長性 (Low)**
  - `level_stats` も `file_proofs` 内の `level` 情報から導出可能であり、二重管理による不整合の温床となる。

## 重大度
Medium
