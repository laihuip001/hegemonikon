# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/dendron/checker.py`

## 判定
発言（要改善）

## 発見事項
- (High) `check`, `check_functions_in_file`, `check_variables_in_file` メソッドにおいて、`path.read_text()` が `OSError` (FileNotFoundError, PermissionError等) を捕捉していません。`check_file_proof` は捕捉して `ProofStatus.INVALID` を返していますが、これらのメソッドでは例外が伝播し、チェッカー全体の実行が予期せず停止する可能性があります。関数シグネチャから予測できない例外です。
  - **修正案**: `check` メソッドおよび個別の検証メソッド内の `read_text` 呼び出しを `try...except (OSError, SyntaxError, UnicodeDecodeError):` で囲み、読み込み失敗時は `tree = None` または空リストを返すように変更してください（ファイルエラーは `check_file_proof` で報告済みであるため、ここでは安全にスキップ可能です）。

- (Medium) ファイル読み込みとASTパースのロジックが `check` メソッドと個別の検証メソッド(`check_functions_in_file` 等)で重複しており、エラーハンドリングの一貫性が保たれていません（上記の `OSError` 漏れの原因）。
  - **修正案**: ファイル読み込みとASTパースを行う共通の安全なメソッド（例: `_read_and_parse(path) -> Optional[ast.Module]`）を作成し、各箇所から呼び出すことでロジックを集約してください。

## 重大度
High
