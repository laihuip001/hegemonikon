# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/pks/pks_cli.py`

## 判定
発言（要改善）

## 発見事項
- **Medium: 暗黙的な内部状態への依存**
  - `cmd_feedback` 関数において、`engine._feedback` というプライベート属性に直接アクセスしています (L166, L167)。
  - 内部実装の詳細への依存は、将来的な変更に対する脆弱性を生み、呼び出し側にとって予期せぬ動作（Surprise）の原因となります。公開インターフェース経由でのアクセスが求められます。

- **Medium: 予測困難な例外挙動**
  - `cmd_push`, `cmd_dialog` 等、外部システム（Gnosis, LLM）と連携する関数群において、例外境界が設定されていません。
  - 通信エラーやリソース不足時に、制御されたエラーメッセージではなく生のスタックトレースが露出することは、CLI利用者にとって高い予測誤差となります。

- **Low: 副作用（リソース消費）の隠蔽**
  - 各コマンドハンドラ内で `PKSEngine` を遅延インポート・初期化しています。
  - 関数シグネチャからは、これらの関数がMLモデルのロードなど高コストな副作用を持つことが読み取れません。
  - 構造的に初期化コストを明示するか、適切なドキュメント化が推奨されます。

## 重大度
Medium
