# 予測誤差審問官 レビュー

## 対象ファイル
`hermeneus/src/dispatch.py`

## 判定
発言（要改善）

## 発見事項
- **副作用非明示 (High):** モジュールレベルで `sys.path.insert(0, ...)` を実行しており、インポートしただけでグローバルな状態（検索パス）を変更してしまいます。これはライブラリとして使用される場合に予期せぬ挙動を引き起こす可能性があります。
- **戻り値の型が予測困難 (Medium):** `dispatch` 関数の戻り値が `dict` 型であり、具体的なキーや値の型がシグネチャから判断できません。`TypedDict` や `dataclass` を使用すべきです。
- **引数の型が予測困難 (Medium):** `format_ast_tree` および `extract_workflows` 関数の引数 `node` に型ヒントがなく、どのようなオブジェクトを受け取るかが不明確です。
- **例外処理の隠蔽 (Low):** `dispatch` 関数内で `Exception` を広範囲に捕捉しており、プログラミングエラー（`AttributeError` 等）も「処理失敗」として返されるため、エラーの原因特定が困難になる可能性があります。

## 重大度
High
