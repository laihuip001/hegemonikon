# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/dendron/checker.py`

## 判定
発言（要改善）

## 発見事項
- **例外の発生が関数シグネチャから不明 (Medium)**
  `check` メソッド内の AST 解析ブロック (L353-366付近) で `path.read_text()` を実行していますが、`OSError` (権限エラー等) が捕捉されていません。`check_file_proof` は `OSError` をハンドリングして `ProofStatus.INVALID` を返しますが、その直後のこのブロックで `read_text` が失敗するとクラッシュする可能性があります。チェッカーとしての堅牢性に欠けます（驚き）。

- **戻り値の型が呼び出し元で予測困難 (Medium)**
  検証系メソッドの戻り値の型が一貫していません。
  - `validate_parent`: `tuple[bool, str]` (True, "OK")
  - `_validate_level`: `tuple[bool, str]` (True, "OK")
  - `_validate_purpose_quality`: `Optional[str]` (None = OK, str = Error)
  同じ「validate」という動詞を持ちながら振る舞いが異なるのは予測誤差を生みます。

- **状態変更が暗黙的 / コンテキストの不一致 (Medium)**
  `validate_parent` はインスタンス変数 `self.root` に依存して親パスの存在検証を行いますが、メインの `check` メソッドは引数 `root` を受け取って探索を行います。
  `__init__` で `root` を設定せずに `check(path)` を呼び出した場合、親パスの存在検証が（警告なく）スキップされる挙動は、呼び出し元の期待（「指定したパス以下の検証を行う」）と食い違う可能性があります。

## 重大度
Medium
