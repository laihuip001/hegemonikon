# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/pks/pks_cli.py`

## 判定
発言（要改善）

## 発見事項
- **(High) 副作用非明示**: `cmd_push`, `cmd_suggest`, `cmd_backlinks`, `cmd_auto`, `cmd_infer`, `cmd_feedback`, `cmd_dialog` の各関数内で `mekhane.pks.pks_engine` 等のモジュールを `import` しています。これにより、関数呼び出し時に予期せぬ `ImportError` やモジュール初期化に伴う副作用（ファイル読み込み等）が発生する可能性があり、シグネチャ `(args) -> None` から振る舞いを予測することが困難です。依存関係はファイル先頭で明示されるべきです。
- **(Medium) 暗黙状態変更**: `cmd_push` 等において、`PKSEngine` インスタンス生成直後に `engine.set_context(...)` を呼び出して状態を変更しています。エンジンの振る舞いが手続き的な呼び出し順序（状態変異）に依存しており、`proactive_push` 実行時の内部状態がコード上で分散して定義されているため、予測可能性を低下させています。
- **(Medium) 暗黙状態変更（内部依存）**: `cmd_feedback` 関数内で `engine._feedback` という protected 属性（アンダースコア始まり）に直接アクセスしており、クラスのカプセル化を破壊しています。これは `PKSEngine` の内部実装に依存しており、将来的な変更に対する予測不可能性を高めます。

## 重大度
High
