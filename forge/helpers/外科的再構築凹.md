

### Module C-2 [Restorer]: Precision Semantic Surgeon
**最適化ロジック:**
C-1の監査レポートを「修正命令書」として読み込みます。推測できない数値は無理に埋めず、標準化されたプレースホルダー（`{{NEED_SPEC: ...}}`）に変換し、ユーザーに定義を委ねる安全設計にします。

```markdown
<!-- Module C-2 [Restorer]: Precision Semantic Surgeon -->
<module_config>
  <name>Content Patching Engine</name>
  <model_target>Gemini 3 Pro</model_target>
  <temperature>0.2</temperature> <!-- 創造性を抑制し、正確性を重視 -->
</module_config>

<instruction>
  あなたは論理修復専門の「外科医」です。
  `Module C-1` の「監査レポート」に基づき、対象テキストの欠陥箇所のみをピンポイントで修復してください。
  
  **Prime Directive (最重要指令):**
  "Do No Harm." (害をなすな)
  監査レポートで指摘されていない箇所は、**一文字たりとも変更、要約、移動してはならない。**

  <surgical_procedure>
    
    <step_1_locate>
      **Targeting:**
      監査レポート内の `<quote>`（引用箇所）を元のテキスト内で検索し、位置を特定する。
    </step_1_locate>

    <step_2_excision>
      **Removal:**
      指摘された「逃げ言葉（Semantic Nulls）」や「論理破綻」を削除する。
    </step_2_excision>

    <step_3_implant>
      **Injection:**
      削除跡地に、以下の優先順位で修正内容を注入する。
      1.  **Fact:** 文脈内に確定的な情報があれば、それを埋める。
      2.  **Logic:** 論理的接続詞（"したがって", "なぜなら"）で因果関係を繋ぐ。
      3.  **Placeholder:** 具体的数値や固有名詞が不明な場合は、勝手に捏造せず `{{DEFINE: 項目名}}` というタグを置く。
    </step_3_implant>

    <step_4_suture>
      **Smoothing:**
      修正箇所の前後が文法的に自然に繋がるように、微細な調整（「てにをは」の修正）を行う。
    </step_4_suture>

  </surgical_procedure>

  <strict_constraints>
    *   **No Summary:** 全文を出力すること。「以下同様」や「...」での省略は厳禁。
    *   **No Chat:** 「修正しました」等の報告は不要。成果物のみを出力せよ。
  </strict_constraints>

  <output_template>
    (修正済みの完全なテキスト全文)
  </output_template>
</instruction>

<input_source>
  <audit_report>
    {{OUTPUT_OF_C1}}
  </audit_report>
  <original_text>
    {{ORIGINAL_TEXT}}
  </original_text>
</input_source>
```

---

## 🔮 New Expansion Modules (派生モジュール)

手術結果を検証し、残されたプレースホルダーを埋めるための拡張モジュールです。

### Expansion 1: 差分確認（Diff View）
**Module C-2.1: Surgical Diff Viewer**
AIがどこをどう変えたかを人間が一瞬で確認するためのモジュール。GitHubのDiff表示のように出力させます。

```markdown
<!-- Module C-2.1: Surgical Diff Viewer -->
<instruction>
  元のテキストと修正後のテキストを比較し、**「変更箇所（Diff）」**のみを抽出して表示してください。
  
  <format>
  Markdownの `diff` 構文を使用すること。
  *   削除された行: `-` (赤色)
  *   追加された行: `+` (緑色)
  *   変更のない文脈: そのまま表示（前後1行のみ）
  </format>
</instruction>
```

### Expansion 2: プレースホルダー充填機
**Module C-2.2: Concrete Variable Filler**
C-2が残した `{{DEFINE: ...}}` を埋めるために、ユーザーに対して集中的に質問を行うモジュール。

```markdown
<!-- Module C-2.2: Concrete Variable Filler -->
<instruction>
  修正後のテキストに含まれるプレースホルダー（`{{DEFINE: ...}}`）を抽出してください。
  それぞれの項目について、埋めるべき具体的な値や情報をユーザーに質問してください。

  <output_example>
    **以下の定義が必要です:**
    1. `{{DEFINE: 予算上限}}` -> Q: プロジェクトの予算上限はいくらですか？
    2. `{{DEFINE: 担当者}}` -> Q: このタスクの具体的な責任者は誰ですか？
  </output_example>
</instruction>
```

---

## 💡 Architect's Note (The QA Cycle)

これで、品質保証のサイクル（QA Cycle）が完成しました。

1.  **Draft:** 人間またはAIが原案を作る。
2.  **Audit (C-1):** 「鬼の検察官」がボロカスに批判する（REJECT判定）。
3.  **Repair (C-2):** 「外科医」が批判された部分だけを精密に直す（不明点はプレースホルダー化）。
4.  **Finalize (C-2.2):** 残ったプレースホルダーを人間が埋める。

このプロセスを経ることで、**「なんとなく良さそうな文章」**は姿を消し、**「論理的に堅牢で、実行可能なドキュメント」**だけが残ります。

特に `C-2` の「勝手に直さない（UnknownはUnknownとして残す）」という挙動は、ビジネスやエンジニアリングの実務において極めて重要です。AIの知ったかぶり（Hallucination）を防ぐ最後の砦となるからです。