{"openapi":"3.1.0","info":{"title":"Hegemonikón API","description":"Hegemonikón mekhane モジュールの REST API","version":"0.1.0"},"paths":{"/api/status/health":{"get":{"tags":["status"],"summary":"Health Check","description":"Tauri ヘルスチェック用の軽量エンドポイント。","operationId":"health_check_api_status_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckResponse"}}}}}}},"/api/status":{"get":{"tags":["status"],"summary":"Full Status","description":"全サービスの詳細ヘルスレポート。\n\nsystemd/docker コマンドを呼ぶため非同期スレッドで実行。","operationId":"full_status_api_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthReportResponse"}}}}}}},"/api/fep/step":{"post":{"tags":["fep"],"summary":"Fep Step","description":"推論-行動サイクルを1ステップ実行。","operationId":"fep_step_api_fep_step_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FEPStepRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FEPStepResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/fep/state":{"get":{"tags":["fep"],"summary":"Fep State","description":"Agent の現在の内部状態を取得。","operationId":"fep_state_api_fep_state_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FEPStateResponse"}}}}}}},"/api/fep/dashboard":{"get":{"tags":["fep"],"summary":"Fep Dashboard","description":"FEP ダッシュボードデータを取得。","operationId":"fep_dashboard_api_fep_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FEPDashboardResponse"}}}}}}},"/api/postcheck/run":{"post":{"tags":["postcheck"],"summary":"Run Postcheck","description":"ワークフロー出力の品質検証を実行。","operationId":"run_postcheck_api_postcheck_run_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostcheckRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostcheckResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/postcheck/list":{"get":{"tags":["postcheck"],"summary":"List Sel","description":"全WF の sel_enforcement を一覧表示。","operationId":"list_sel_api_postcheck_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SELListResponse"}}}}}}},"/api/dendron/report":{"get":{"tags":["dendron"],"summary":"Dendron Report","description":"Dendron コード品質レポート。","operationId":"dendron_report_api_dendron_report_get","parameters":[{"name":"detail","in":"query","required":false,"schema":{"type":"string","description":"summary | full","default":"summary","title":"Detail"},"description":"summary | full"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DendronReportResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dendron/check":{"post":{"tags":["dendron"],"summary":"Dendron Check","description":"個別ファイルの PROOF チェック。","operationId":"dendron_check_api_dendron_check_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DendronCheckRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DendronCheckResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/gnosis/search":{"get":{"tags":["gnosis"],"summary":"Gnosis Search","description":"Gnōsis ベクトル検索。","operationId":"gnosis_search_api_gnosis_search_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":1,"description":"検索クエリ","title":"Q"},"description":"検索クエリ"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"description":"結果件数","default":10,"title":"Limit"},"description":"結果件数"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GnosisSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/gnosis/stats":{"get":{"tags":["gnosis"],"summary":"Gnosis Stats","description":"Gnōsis インデックス統計。","operationId":"gnosis_stats_api_gnosis_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GnosisStatsResponse"}}}}}}}},"components":{"schemas":{"DendronCheckRequest":{"properties":{"path":{"type":"string","title":"Path","description":"チェック対象のファイルパス"}},"type":"object","required":["path"],"title":"DendronCheckRequest","description":"個別ファイルチェックリクエスト。"},"DendronCheckResponse":{"properties":{"path":{"type":"string","title":"Path"},"result":{"anyOf":[{"$ref":"#/components/schemas/DendronFileResult"},{"type":"null"}]},"error":{"type":"string","title":"Error","default":""}},"type":"object","required":["path"],"title":"DendronCheckResponse","description":"個別ファイルチェック結果。"},"DendronFileResult":{"properties":{"path":{"type":"string","title":"Path"},"has_proof":{"type":"boolean","title":"Has Proof"},"level":{"type":"string","title":"Level","default":""},"parent":{"type":"string","title":"Parent","default":""},"issues":{"items":{"type":"string"},"type":"array","title":"Issues","default":[]}},"type":"object","required":["path","has_proof"],"title":"DendronFileResult","description":"個別ファイルのチェック結果。"},"DendronReportResponse":{"properties":{"summary":{"$ref":"#/components/schemas/DendronSummary"},"file_results":{"items":{"$ref":"#/components/schemas/DendronFileResult"},"type":"array","title":"File Results","description":"detail=full 時のみ展開"}},"type":"object","required":["summary"],"title":"DendronReportResponse","description":"Dendron レポート。"},"DendronSummary":{"properties":{"total_files":{"type":"integer","title":"Total Files","default":0},"files_with_proof":{"type":"integer","title":"Files With Proof","default":0},"files_without_proof":{"type":"integer","title":"Files Without Proof","default":0},"coverage_percent":{"type":"number","title":"Coverage Percent","default":0.0},"total_dirs":{"type":"integer","title":"Total Dirs","default":0},"dirs_with_proof":{"type":"integer","title":"Dirs With Proof","default":0},"issues":{"items":{"type":"string"},"type":"array","title":"Issues","default":[]}},"type":"object","title":"DendronSummary","description":"Dendron レポートサマリー。"},"FEPDashboardResponse":{"properties":{"total_steps":{"type":"integer","title":"Total Steps","default":0},"action_distribution":{"additionalProperties":{"type":"integer"},"type":"object","title":"Action Distribution","default":{}},"series_distribution":{"additionalProperties":{"type":"integer"},"type":"object","title":"Series Distribution","default":{}},"available":{"type":"boolean","title":"Available","default":true},"message":{"type":"string","title":"Message","default":""}},"type":"object","title":"FEPDashboardResponse","description":"ダッシュボード分析データ。"},"FEPStateResponse":{"properties":{"beliefs":{"items":{"type":"number"},"type":"array","title":"Beliefs"},"epsilon":{"additionalProperties":{"type":"number"},"type":"object","title":"Epsilon"},"history_length":{"type":"integer","title":"History Length"},"precision_weights":{"anyOf":[{"additionalProperties":{"type":"number"},"type":"object"},{"type":"null"}],"title":"Precision Weights"}},"type":"object","required":["beliefs","epsilon","history_length"],"title":"FEPStateResponse","description":"Agent の内部状態。"},"FEPStepRequest":{"properties":{"observation":{"type":"integer","exclusiveMaximum":48.0,"minimum":0.0,"title":"Observation","description":"観測インデックス (0-47)"}},"type":"object","required":["observation"],"title":"FEPStepRequest","description":"FEP step リクエスト。"},"FEPStepResponse":{"properties":{"action_name":{"type":"string","title":"Action Name"},"action_index":{"type":"integer","title":"Action Index"},"selected_series":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Selected Series"},"explanation":{"type":"string","title":"Explanation","default":""},"beliefs_entropy":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Beliefs Entropy"}},"type":"object","required":["action_name","action_index"],"title":"FEPStepResponse","description":"FEP step 結果。"},"GnosisSearchResponse":{"properties":{"query":{"type":"string","title":"Query"},"results":{"items":{"$ref":"#/components/schemas/GnosisSearchResult"},"type":"array","title":"Results"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["query","results","total"],"title":"GnosisSearchResponse","description":"検索レスポンス。"},"GnosisSearchResult":{"properties":{"title":{"type":"string","title":"Title","default":""},"source":{"type":"string","title":"Source","default":""},"authors":{"type":"string","title":"Authors","default":""},"abstract":{"type":"string","title":"Abstract","default":""},"url":{"type":"string","title":"Url","default":""},"citations":{"type":"string","title":"Citations","default":""},"score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score"}},"type":"object","title":"GnosisSearchResult","description":"検索結果1件。"},"GnosisStatsResponse":{"properties":{"total":{"type":"integer","title":"Total","default":0},"unique_dois":{"type":"integer","title":"Unique Dois","default":0},"unique_arxiv":{"type":"integer","title":"Unique Arxiv","default":0},"sources":{"additionalProperties":{"type":"integer"},"type":"object","title":"Sources","default":{}},"last_collected":{"type":"string","title":"Last Collected","default":""},"available":{"type":"boolean","title":"Available","default":true},"message":{"type":"string","title":"Message","default":""}},"type":"object","title":"GnosisStatsResponse","description":"インデックス統計。"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthCheckResponse":{"properties":{"status":{"type":"string","title":"Status","default":"ok"},"version":{"type":"string","title":"Version","default":""},"uptime_seconds":{"type":"number","title":"Uptime Seconds","default":0.0}},"type":"object","title":"HealthCheckResponse","description":"軽量ヘルスチェック。"},"HealthItemResponse":{"properties":{"name":{"type":"string","title":"Name"},"status":{"type":"string","title":"Status","description":"ok | warn | error | unknown"},"detail":{"type":"string","title":"Detail","default":""},"metric":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Metric"},"emoji":{"type":"string","title":"Emoji","default":""}},"type":"object","required":["name","status"],"title":"HealthItemResponse","description":"個別ヘルスチェック結果。"},"HealthReportResponse":{"properties":{"timestamp":{"type":"string","title":"Timestamp"},"items":{"items":{"$ref":"#/components/schemas/HealthItemResponse"},"type":"array","title":"Items"},"score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Score","description":"0.0-1.0 総合スコア"}},"type":"object","required":["timestamp","items","score"],"title":"HealthReportResponse","description":"全体ヘルスレポート。"},"PostcheckRequest":{"properties":{"wf_name":{"type":"string","title":"Wf Name","description":"ワークフロー名 (例: dia, noe, boot)"},"mode":{"type":"string","title":"Mode","description":"モード (+, -, *, 空)","default":""},"content":{"type":"string","title":"Content","description":"チェック対象テキスト"}},"type":"object","required":["wf_name","content"],"title":"PostcheckRequest","description":"ポストチェック実行リクエスト。"},"PostcheckResponse":{"properties":{"wf_name":{"type":"string","title":"Wf Name"},"mode":{"type":"string","title":"Mode"},"passed":{"type":"boolean","title":"Passed"},"checks":{"items":{"$ref":"#/components/schemas/PostcheckResult"},"type":"array","title":"Checks"},"formatted":{"type":"string","title":"Formatted","default":""}},"type":"object","required":["wf_name","mode","passed","checks"],"title":"PostcheckResponse","description":"ポストチェック結果。"},"PostcheckResult":{"properties":{"requirement":{"type":"string","title":"Requirement"},"passed":{"type":"boolean","title":"Passed"},"detail":{"type":"string","title":"Detail","default":""}},"type":"object","required":["requirement","passed"],"title":"PostcheckResult","description":"個別チェック結果。"},"SELItem":{"properties":{"wf_name":{"type":"string","title":"Wf Name"},"modes":{"additionalProperties":true,"type":"object","title":"Modes","default":{}}},"type":"object","required":["wf_name"],"title":"SELItem","description":"SEL enforcement 項目。"},"SELListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/SELItem"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["items","total"],"title":"SELListResponse","description":"全WF の SEL enforcement 一覧。"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"},"input":{"title":"Input"},"ctx":{"type":"object","title":"Context"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}