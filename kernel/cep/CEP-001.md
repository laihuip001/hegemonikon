# CEP-001: CCL FEP 記号拡張仕様

> **CCL**: `[CEP]/mek+{target=CEP-001}`
> **Status**: Draft
> **Created**: 2026-01-31
> **Author**: Creator + Hegemonikón AI

---

## Abstract

本 CEP は、CCL に FEP (自由エネルギー原理) の核心概念を直接表現する記号を追加する。これにより、CCL は認知制御言語から**認知計算言語**へと進化し、予測誤差・エントロピー・期待値などの数学的操作を記号的に表現可能になる。

---

## Motivation

### 現状の限界

1. **FEP 概念の暗黙性**: CCL は FEP に基づくが、予測誤差やエントロピーを直接記述できない
2. **演算子の対称性の欠如**: `^` (上昇) に対する真の対義語 `√` (根) がない
3. **変化の記述困難**: 時間変化や累積を表現する演算子がない

### FEP との整合

| FEP 概念 | 数学的表現 | 現在の CCL | 提案 |
|:---------|:-----------|:-----------|:-----|
| 予測誤差の変化 | dε/dt | なし | `'` |
| エントロピー | H(X), V[X] | なし | `V[]` |
| 期待値 | E[X] | なし | `E[]` |
| 収束 | lim | なし | `→` |
| メタ化の逆 | √ | `/` (不正確) | `√` |

---

## Specification

### 1. 演算子体系の拡張

#### 現在 (10個)

```
単項: + - ^ / ? \
二項: * ~ _
封印: !
```

#### 提案後 (15個)

```
単項: + - ^ √ / ? \ '
二項: * ~ _
関数: E[] V[] P() C()
封印→展開: !
収束: →
```

---

### 2. 個別仕様

#### 2.1 微分演算子 `'` (Prime)

| 項目 | 仕様 |
|:-----|:-----|
| **記号** | `'` (アポストロフィ) |
| **名称** | 微分 / Prime / Derivative |
| **型** | 単項演算子 (後置) |
| **意味** | 変化率、差分、時間微分 |
| **FEP 対応** | 予測誤差の変化 dε/dt |

**構文**:

```ccl
/WF'       # WF の変化率
/bou'      # 意志の変化（どう変わっているか）
/noe''     # 認識の二次微分（変化の変化）
```

**認知的意味**:

| 式 | 意味 |
|:---|:-----|
| `/bou'` | 意志の変化率 — 前回からどう変わったか |
| `/h'` | 傾向の変化 (メタ傾向) |
| `/noe'` | 認識の差分 — 何が新しく分かったか |

**用途例**:

```ccl
# セッション間の変化を追跡
/boot' → /bou'    # 起動時に意志の変化を確認

# 学習の進捗
/doxa'            # 信念の変化率
```

---

#### 2.2 根演算子 `√` (Root)

| 項目 | 仕様 |
|:-----|:-----|
| **記号** | `√` (ルート記号) |
| **名称** | 根 / Root / 基底 |
| **型** | 単項演算子 (前置) |
| **意味** | メタの逆、抽象から具象の根源抽出 |
| **対義語** | `^` (上昇/メタ化) |

**構文**:

```ccl
√/WF       # WF の根（基底）を抽出
√/noe      # 認識の根源（なぜそう認識したか）
√^/bou     # メタ化した意志を元に戻す
```

**対称性**:

```
^   = メタ化 (上昇)   → 抽象度↑
√   = 根源抽出 (下降) → 抽象度↓、原因探索

例: √^/noe ≈ /noe (上昇して下降すると元に戻る)
```

**`/` との違い**:

| 演算子 | 方向 | 意味 |
|:-------|:-----|:-----|
| `/` | 下降 | 具体化、インスタンス化 |
| `√` | 根源 | 原因探索、基底抽出 |

```ccl
/noe/     # 認識を具体化 → 「結局、今日何をする？」
√/noe     # 認識の根源 → 「なぜそう認識したのか？」
```

**キーボード入力**: 多くの環境で `√` は直接入力困難。代替案:

| 代替 | 説明 |
|:-----|:-----|
| `sqrt()` | 関数形式 |
| `rt` | 省略形 |
| `v` | 形状類似（推奨しない） |

---

#### 2.3 期待値演算子 `E[]`

| 項目 | 仕様 |
|:-----|:-----|
| **記号** | `E[]` |
| **名称** | 期待値 / Expected Value |
| **型** | 関数演算子 |
| **意味** | 平均的な結果、予測される出力 |
| **FEP 対応** | 予測 (Prediction) |

**構文**:

```ccl
E[/WF]     # WF の期待される結果
E[/ene]    # 実行の期待結果
E[/bou]    # 意志が導く平均的な結果
```

**認知的意味**:

```ccl
E[/ene]    # 「この実行で何が得られるか（平均的に）」
E[/s+]     # 「この設計の期待される成果」
```

---

#### 2.4 分散演算子 `V[]`

| 項目 | 仕様 |
|:-----|:-----|
| **記号** | `V[]` |
| **名称** | 分散 / Variance / エントロピー |
| **型** | 関数演算子 |
| **意味** | 不確実性、ばらつき、予測の信頼性 |
| **FEP 対応** | エントロピー H(X) |

**構文**:

```ccl
V[/WF]     # WF の不確実性
V[/noe]    # 認識のばらつき（どれだけ確信がないか）
V[/s+]     # 設計の不確実性
```

**認知的意味**:

```ccl
V[/noe] → 高い    # 認識が不確実 → さらに調査必要
V[/bou] → 低い    # 意志が明確 → 実行に移れる
```

**`?` との違い**:

| 演算子 | 意味 |
|:-------|:-----|
| `?` | 特定条件の照会 (`/bou?h2` = 確信度は？) |
| `V[]` | 全体的な不確実性の評価 |

---

#### 2.5 収束演算子 `→`

| 項目 | 仕様 |
|:-----|:-----|
| **記号** | `→` |
| **名称** | 収束 / Limit / Tends to |
| **型** | 二項演算子 |
| **意味** | 極限、収束先、振動の終着点 |
| **FEP 対応** | 予測誤差 → 1 (最大確信) |

**構文**:

```ccl
/WF1 → /WF2    # WF1 が WF2 に収束
/bou → /ene    # 意志が実行に収束
/noe~ → E[/noe]  # 認識の振動が期待値に収束
```

**認知的意味**:

```ccl
/zet~noe → /dia    # 探求と認識の振動が判定に収束
```

**キーボード入力**: `→` は直接入力困難。代替案:

| 代替 | 説明 |
|:-----|:-----|
| `->` | ASCII 代替 |
| `lim` | 関数形式 |
| `>>` | 強い収束 |

---

#### 2.6 順列・組合せ演算子 `P()` / `C()`

| 項目 | 仕様 |
|:-----|:-----|
| **記号** | `P()`, `C()` |
| **名称** | 順列 / 組合せ |
| **型** | 関数演算子 |
| **意味** | 網羅的探索、全パターン生成 |
| **関係** | `!` (展開) の上位版 |

**構文**:

```ccl
P(/a, /s, /h)      # a, s, h の全順列 (3! = 6通り)
C(/o, 2)           # O系列4定理から2つ選ぶ (C(4,2) = 6通り)
P(/noe, /dia)      # 認識→判定, 判定→認識 の両順序
```

**`!` との違い**:

| 演算子 | 意味 |
|:-------|:-----|
| `!` | 単一 WF の全派生を展開 |
| `P()` | 複数 WF の順列を探索 |
| `C()` | 複数 WF の組み合わせを選択 |

---

### 3. 演算子体系の対称性 (更新)

```
量:     +  深化     ↔  -  縮約
次元:   ^  上昇     ↔  √  根源     (NEW: √ 追加)
具象:   /  下降     (単独)
照会:   ?  条件確認
反転:   \  位相反転
変化:   '  微分     (NEW)

合成:   *  融合     ↔  ~  振動     ↔  _  シーケンス
収束:   →  極限     (NEW)

展開:   !  展開     (名称変更: 封印→展開)

関数:   E[]  期待値  (NEW)
        V[]  分散    (NEW)
        P()  順列    (NEW)
        C()  組合せ  (NEW)
```

---

### 4. キーボード入力の現実解

| 記号 | 直接入力 | ASCII 代替 | 推奨 |
|:-----|:---------|:-----------|:-----|
| `'` | ✅ 可能 | - | `'` |
| `√` | ❌ 困難 | `sqrt()` or `rt` | `√` (Unicode) or `rt` |
| `→` | ❌ 困難 | `->` or `>>` | `->` |
| `E[]` | ✅ 可能 | - | `E[]` |
| `V[]` | ✅ 可能 | - | `V[]` |
| `P()` | ✅ 可能 | - | `P()` |
| `C()` | ✅ 可能 | - | `C()` |

---

## Rationale

### なぜ FEP 変数を記号化するか

1. **理論的一貫性**: CCL は FEP に基づく → FEP 概念を直接表現すべき
2. **表現力向上**: 「不確実性」「期待値」「変化率」を一語で表現
3. **計算可能性**: 将来的に数値評価と接続可能

### なぜ `√` を `^` の対義語とするか

1. **数学的正確性**: べき乗と根は逆演算
2. **認知的意味**: メタ化の逆は「根源抽出」
3. **`/` との差別化**: `/` は具体化、`√` は原因探索

---

## Rejected Alternatives

| 代替案 | 却下理由 |
|:-------|:---------|
| `&` 並列 | `~` の劣化版、使われない |
| `|` 条件 | 既に `{T|F}` で存在 |
| `>/<` 方向 | 文の順序で十分 |
| `d` 微分記号 | `'` の方が簡潔 |
| `H[]` エントロピー | `V[]` の方が直感的 |

---

## Backwards Compatibility

- **既存 CCL プログラム**: 影響なし（新規記号の追加のみ）
- **`^` の意味**: 変更なし（`√` は新規追加）
- **`/` の意味**: 変更なし（`√` と区別して使用）

---

## Reference Implementation

### 5. 代替構文 (Alternative Syntax)

#### 5.1 収束の代替表記

| 表記 | 意味 | 用途 |
|:-----|:-----|:-----|
| `→` | 収束 (Unicode) | 正式 |
| `->` | 収束 (ASCII) | 互換性 |
| `>>` | 強い収束 | **打ちやすい、推奨** |
| `lim[]{}` | 関数形式 | 複雑な式 |

**`>>` の使用例**:

```ccl
/zet~noe >> /dia    # 探求↔認識 が判定に強く収束
/bou >> /ene        # 意志が実行に収束
V[/s] >> 0          # 不確実性が0に収束（完全な確信）
```

**`lim[]{}` の使用例**:

```ccl
lim[/dia]{ /zet~noe }       # 探求↔認識 の振動が判定に収束
lim[E[/bou]]{ /bou~zet }    # 意志↔探求 が期待値に収束
lim[V[]=0]{ /noe~ }         # 認識の振動が不確実性0に収束
```

#### 5.2 根の代替表記

| 表記 | 意味 | 用途 |
|:-----|:-----|:-----|
| `√` | 根 (Unicode) | 正式 |
| `rt` | 根 (ASCII) | 互換性 |
| `sqrt()` | 関数形式 | 明示的 |

```ccl
√/noe      # 認識の根源
rt/noe     # 同上 (ASCII)
sqrt(/noe) # 同上 (関数形式)
```

---

### 6. 高度な組み合わせ (Advanced Combinations)

#### 6.1 V[] / E[] と制御構文の組み合わせ

**条件分岐 (I:cond)**:

```ccl
# 不確実性が高い場合のみ深掘り
I: V[/s] > 0.5 {
    /noe+
}

# 期待値が低い場合は再設計
I: E[/ene] < 0.3 {
    /s+~dia
}
```

**反復 (F:range)**:

```ccl
# 全定理系列を順に評価
F: [O, S, H, P, K, A] {
    V[/$_]               # 各系列の不確実性を評価
}

# 複数の問いを順に深掘り
F: [q1, q2, q3] {
    /noe+ >> E[/dia]     # 各問いを深掘り→判定の期待値に収束
}
```

**収束ループ (~:until)**:

```ccl
# 不確実性が閾値以下になるまで振動
~: V[/s] > 0.2 {
    /s~dia               # 設計↔判定を往復
}

# 期待値が安定するまで
~: E[/bou]' > 0.1 {      # 意志の期待値の変化率が0.1以上の間
    /bou~zet             # 意志↔探求を往復
}
```

#### 6.2 FEP 変数を使った認知プログラム例

**例1: 適応的深掘り**

```ccl
# 不確実性に応じて深掘りレベルを調整
I: V[/noe] > 0.7 { /noe++ }   # 超高不確実性 → 超深掘り
I: V[/noe] > 0.4 { /noe+ }    # 高不確実性 → 深掘り
I: V[/noe] <= 0.4 { /noe- }   # 低不確実性 → 縮約で十分
```

**例2: 収束保証付き振動**

```ccl
# 予測誤差の変化率が0に近づくまで振動
lim[ε'=0]{
    /bou~zet~noe         # 意志↔探求↔認識 の三者振動
} >> /dia                # 収束したら判定へ
```

**例3: 期待値最大化**

```ccl
# 複数の選択肢から期待値最大のものを選択
max E[]{
    C(/s, /noe, /dia, 2)  # 3つから2つを選ぶ全組み合わせ
} >> /ene                 # 最良の組み合わせを実行
```

**例4: 変化率追跡付きセッション**

```ccl
# セッション開始時
/boot' >> {               # 前回からの変化を追跡
    I: /bou' > 0.3 {      # 意志が大きく変化していたら
        /bou+             # 意志を詳細に再確認
    }
    I: V[/doxa] > 0.5 {   # 信念の不確実性が高ければ
        /noe~dia          # 認識↔判定で安定化
    }
}
```

#### 6.3 圧倒的知的労働の実現

**問題解決の一般パターン**:

```ccl
# Phase 1: 問題空間の探索
V[problem] >> {
    I: V[] > 0.7 { /zet+ }      # 高不確実性 → 問いを発見
    I: V[] > 0.4 { /noe+ }      # 中不確実性 → 深い認識
    I: V[] <= 0.4 { /s- }       # 低不確実性 → 軽い設計
}

# Phase 2: 収束
lim[V[]=0.1]{
    /s~dia                       # 設計↔判定を往復
}

# Phase 3: 実行
E[/ene] > 0.6 >> /ene           # 期待値60%以上で実行
```

**研究プロジェクトのテンプレート**:

```ccl
# 1. 問いの発見
/zet+ >> questions[]

# 2. 各問いを評価
F: questions[] {
    E[/noe+]                    # 深掘りの期待値
    V[/s+]                      # 設計の不確実性
} >> priority_sorted[]

# 3. 優先順に解決
F: priority_sorted[] {
    lim[V[]<0.2]{               # 不確実性20%以下まで
        /noe~s~dia              # 認識↔設計↔判定を振動
    }
}

# 4. 統合
*{ results[] } >> /ene          # 全結果を融合して実行
```

---

### 7. 使用例（旧版を拡張）

```ccl
# セッション間の変化追跡
/boot'            # 起動時の変化

# 不確実性評価
V[/s+] >> 高い    # 設計が不確実 → /noe+ で深掘り

# 期待値と実行
E[/ene] >> 成功率80%  # 期待される結果
/ene              # 実行

# 根源探索
√/noe             # 認識の根源は何か

# 収束
/bou~zet >> /dia   # 意志と探求の振動が判定に収束

# 高度な組み合わせ
lim[V[]<0.1]{ /s~dia } >> /ene  # 不確実性10%以下で実行
```

---

## Status

**Draft** — 2026-01-31

---

*Generated by /mek+ | S2 Mekhanē*
*CCL を認知計算言語へ進化させる*
