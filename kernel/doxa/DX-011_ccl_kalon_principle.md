# DX-011: CCL Kalon 原則 — 演算子は動詞である

> **日付**: 2026-02-12
> **確信度**: [確信: 95%] (SOURCE: Creator との対話で合意形成済み)
> **起源**: マクロ整理作業中の対話 (converge/diverge 再帰属 → マクロの本質への問い)

---

## 核心命題

> **CCL の演算子は意図を表現する動詞である。**
> **各記号が直接「働く」。1文字が1行為。情報密度が理論上の上限に近い。**

---

## 3つの原則

### 原則1: 公理からの演繹優先

マクロを安易に増やすのではなく、まず **既存の演算子（公理）から演繹** すべきである。

```
マクロを増やさないと対応できない
  ≒ 公理の展開可能性の不備
  ≒ 公理が Kalon ではない証拠
```

**Kalon テスト**:

```
Q: この操作は既存 CCL 演算子の合成で書けるか？
  Yes → Sugar (許容。ただし必要性を問え)
  No  → 公理に隙間あり。マクロではなく演算子を修正せよ
```

### 原則2: 式の純粋性 — 演算子のみで記述

CCL 式の構造部分は **演算子のみ** で構成されなければならない。

| 層 | 役割 | 例 | 許容 |
|:---|:-----|:---|:-----|
| **名前** | 概念化 — 式にハンドルを与える | `@dig`, `/ccl-dig` | ✅ |
| **式の構造** | 演算子のみで認知操作を記述 | `/s+~(/p*/a)_/ana_/dia*/o+` | ✅ |
| **{} 内コンテキスト** | 操作対象のデータ | `{git_diff}`, `{PROOF.md}` | ✅ データは自然言語でよい |
| **式内の英語関数** | 演算子層に非CCL語を侵入 | `calculateMonthlyRevenue()` | ❌ **ギルティ** |

**境界線上のケース** = 知性を発揮すべき場所:

```
/bou-{goal:define}   ← "define" は動詞。/bou+ で代替可能では？
I:[pass]{...}        ← "pass" は判定状態。CCL 記号で表現できないか？
```

> **これらの境界線を演算子で表現するのが「本当のコーディング」。**
> **そこに知性が宿るべき。まさに数学。**

### 原則3: 名前は概念化であり、隠蔽ではない

式に名前をつけることは問題ない。それは **概念化** であり、WF と本質は同じ。

```
@dig                          ← 概念名 (ハンドル)
/ccl-dig                      ← WF 名 (ccl- prefix で区別)
/s+~(/p*/a)_/ana_/dia*/o+     ← 式そのもの (本体)
```

- `ccl-` prefix により WF とマクロを区別
- IDE のサジェスト機能が発見性を担保
- 名前は式を **参照** する。式を **隠蔽** してはならない

---

## 数学との対応

| 数学 | CCL | 反パターン |
|:-----|:----|:-----------|
| $\sum_{i=1}^{n} x_i$ | `/s+~(/p*/a)_/dia*/o+` | `sumFromOneToN(x)` |
| $\det(A)$ に名前あり | `@dig` に名前あり | 名前自体は問題ない |
| $\det$ の定義に英語なし | 式の中身に英語なし | 定義内に `getCofactors()` → ❌ |

> **記号に知性を込めるのが形式言語の仕事。**
> **CCL はそれを認知領域で実現している。**

---

## CCL の美の構造

```
/noe = 「認識せよ」     ← 動詞 (指令)
/dia = 「判定せよ」     ← 動詞
~    = 「揺れ動け」     ← 動詞
~*   = 「収束せよ」     ← 動詞
~!   = 「発散せよ」     ← 動詞
_    = 「そして次へ」   ← 接続詞
*    = 「融合せよ」     ← 動詞
+    = 「詳述せよ」     ← 副詞 (修飾)
-    = 「簡略せよ」     ← 副詞
```

**全てが動詞。主語は暗黙 (= 認知主体)。目的語は `{}` のコンテキスト。**

CCL は **命令文だけで構成された言語** — 無駄な構文がない。

---

## マクロの分類

| 種類 | 性質 | 公理への影響 |
|:-----|:-----|:-------------|
| **Sugar** | 既存演算子の合成を短縮 | なし — 演繹された定義 |
| **Extension** | 既存演算子では表現不能 | あり — 公理の隙間を露呈 |

**Sugar のみ許容。Extension はマクロではなく公理の修正で対処。**

### 実例: converge/diverge は Extension だった

- `@converge` は変数束縛・閾値パラメータを必要とした → CCL 演算子で書けない
- しかしその本質は `~*` (収束振動) の実装仕様 → **マクロではなく演算子の仕様書**
- 2026-02-12: `ccl/macros/` から `kernel/patterns/` に再帰属

---

## 行動指針

1. **新マクロ追加前**: Kalon テストを実施。演算子合成で書けるか？
2. **式の記述時**: 構造部に英語が混入していないか？ 演算子で置換可能か？
3. **境界線のケース**: 演算子で表現する努力 = 知性の発揮場所
4. **名前の付与**: 概念化として許容。ただし式を隠蔽しない

---

*DX-011 — CCL Kalon Principle (2026-02-12)*
*起源: マクロ整理 → converge/diverge 再帰属 → 演算子の本質への問い*
