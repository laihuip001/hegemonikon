# Implementation Status: n8n Environment (v4.0)

## 1. Environment Readiness (as of 2026-02-06)

| Component | Status | Note |
| :--- | :--- | :--- |
| **Debian PC** | Ready | Primary host for the local Oikos. |
| **Docker** | **Blocked** | `docker` not found. Attempt to install via Agent failed due to `sudo` restriction. |
| **n8n Container** | **Pending** | Waiting for Docker setup. |
| **Network** | Ready | Tailscale connectivity established. |

## 1.5 Environment Constraint Discovery (2026-02-06)

During the attempted installation of Docker, the Agent encountered a critical permission error:
`sudo: 権限変更不可フラグがセットされていて、sudo を root として実行できません。`

**Conclusion**: The AI Agent operating in Execution mode on this host does not have `sudo` privileges. System-level installations must be performed manually by the Creator or via rootless alternatives.

## 2. Existing PoC Artifacts

Located in `mekhane/ergasterion/n8n/`:

- `boot_automation_poc.md`: Design for the morning notification flow.
- `boot_morning_flow.json`: Exported n8n JSON for the morning trigger (Git log + Latest Handoff -> Slack).
- `perplexity_n8n_automation_design.md`: Comprehensive design for automating Perplexity report ingestion.

## 3. Immediate Implementation Roadmap

1. **Step 0: Infrastructure**
   - Install `docker.io` and `docker-compose` on Debian.
   - Configure n8n `docker-compose.yml` with persistent volumes mapping to `~/oikos/mneme/.hegemonikon/incoming`.
2. **Step 1: Morning Trigger**
   - Import `boot_morning_flow.json`.
   - Setup Slack credentials.
3. **Step 2: Perplexity Integration (WF-04)**
   - Verification of Perplexity Tasks API.
   - Implementation of the Fetcher node.

## 4. Key Configurations

- **Volume Mapping**: n8n container must access `~/oikos/` to manage Gnōsis artifacts directly.
- **Environment Variables**: `N8N_API_KEY`, `SLACK_TOKEN`, `PERPLEXITY_API_KEY`.

---
*Status Update: 2026-02-06*
