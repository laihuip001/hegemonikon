# Archetypes Reference

5つのアーキタイプの詳細定義。技術選定と禁忌マトリクス。

---

## 🎯 Precision

**勝利条件:** 誤答率 < 1%
**犠牲:** 速度、コスト
**典型ユースケース:** 医療AI、法務支援、金融アドバイス

**モデルパラメータ推奨値:**

| パラメータ | 値 | 備考 |
|:----------|:---|:-----|
| Claude `effort` | `high` | 深い推論を強制 |
| Gemini `thinking_level` | `high` | 思考プロセスを最大化 |
| Split-Step Verification | **必須** | verify_protocol を常に有効化 |

### 必須技術

| 技術 | 役割 | Phase |
|:---|:---|:---:|
| CRAG | 検索信頼度評価と修正 | 1 |
| CoVe | 自己検証ループ | 3 |
| WACK | 知識有無確認 | 1 |
| Confidence Expression | 確信度の言語化 | 4 |
| Abstention | 回答保留機構 | 4 |

### 弱点カウンター

| 弱点 | カウンター技術 |
|:---|:---|
| 検索結果なしでハルシネーション | WACK + Abstention |
| 過信表現 | MetaFaith + Confidence Expression |
| 矛盾情報源 | Multi-Source Reconciliation |

### 禁忌

| 禁忌技術 | 理由 |
|:---|:---|
| EmotionPrompt | 出力不安定化 |
| 高Temperature (>0.3) | 再現性喪失 |
| Creative系技術全般 | 精度低下 |

### コスト配分目安

```
P0(入力): 10% | P1(収集): 25% | P2(推論): 30% | P3(検証): 30% | P4(出力): 5%
```

---

## ⚡ Speed

**勝利条件:** レイテンシ < 2秒
**犠牲:** 精度（95%許容）
**典型ユースケース:** チャットボット、リアルタイム応答、検索補助

**モデルパラメータ推奨値:**

| パラメータ | 値 | 備考 |
|:----------|:---|:-----|
| Claude `effort` | `low` | 最小限の推論でレイテンシ確保 |
| Gemini `thinking_level` | `minimal` | 思考を省略し高速化 |
| Split-Step Verification | 不要 | 速度優先 |

### 必須技術

| 技術 | 役割 | Phase |
|:---|:---|:---:|
| LLMLingua-2 | トークン圧縮 | 0 |
| Cheat Sheet ICL | 学習内容圧縮 | 1 |
| 短文CoT | 最小限の推論 | 2 |

### 弱点カウンター

| 弱点 | カウンター技術 |
|:---|:---|
| 浅すぎる回答 | 次ステップ提示 |
| 情報欠落 | 要約品質チェック |

### 禁忌

| 禁忌技術 | 理由 |
|:---|:---|
| Many-shot ICL | トークン爆発 |
| Self-Consistency | 複数生成でレイテンシ超過 |
| ToT | 探索時間超過 |
| 深いCoT | 推論時間超過 |

### コスト配分目安

```
P0(入力): 15% | P1(収集): 15% | P2(推論): 55% | P3(検証): 5% | P4(出力): 10%
```

---

## 🤖 Autonomy

**勝利条件:** 人間介入 < 10%
**犠牲:** 制御性
**典型ユースケース:** エージェント、バッチ処理、自動化ワークフロー

**モデルパラメータ推奨値:**

| パラメータ | 値 | 備考 |
|:----------|:---|:-----|
| Claude `effort` | `medium` | バランス型 |
| Gemini `thinking_level` | `low` | 速度と品質のバランス |
| Split-Step Verification | 条件付き | 不可逆操作時のみ有効化 |

### 必須技術

| 技術 | 役割 | Phase |
|:---|:---|:---:|
| ReAct | 推論と行動の交互実行 | 2 |
| Reflexion | 失敗からの学習ループ | 3 |
| Mem0 | 長期記憶管理 | 1 |
| Fallback Hierarchy | 耐障害設計 | 全Phase |

### 弱点カウンター

| 弱点 | カウンター技術 |
|:---|:---|
| 無限ループ | 最大試行回数 + タイムアウト |
| 判断ミス累積 | Reflexion + エスカレーション |
| コンテキスト喪失 | Episodic Memory RAG |

### 禁忌

| 禁忌技術 | 理由 |
|:---|:---|
| 過度なAbstention | 「分からない」で停止 |
| 人間確認必須設計 | 自律性喪失 |

### コスト配分目安

```
P0(入力): 20% | P1(収集): 20% | P2(推論): 25% | P3(検証): 25% | P4(出力): 10%
```

### エスカレーション条件

自律実行停止 → 人間判断委譲:

1. 10回以上リトライ or 実行時間5分超過
2. 連続3回、確信度30%未満の判断必要
3. 不可逆操作（削除/送信/購入）実行前
4. 内部状態に論理矛盾発生
5. ユーザー明示要求

---

## 🎨 Creative

**勝利条件:** 多様性スコア > 0.8
**犠牲:** 一貫性、精度
**典型ユースケース:** 執筆支援、アイデア出し、コンテンツ生成

**モデルパラメータ推奨値:**

| パラメータ | 値 | 備考 |
|:----------|:---|:-----|
| Claude `effort` | `medium` | 創造的余地を確保 |
| Gemini `thinking_level` | `low` | 直感的な出力を優先 |
| Split-Step Verification | 不要 | 創造性を阻害しない |

### 必須技術

| 技術 | 役割 | Phase |
|:---|:---|:---:|
| SAC | 性格特性の強度制御 | 0 |
| P2 Prompting | 文体・価値観の仮説適用 | 0 |
| 高Temperature (0.7-1.0) | 多様性確保 | 設定 |
| THOUGHTSCULPT | 思考の探索と修正 | 2 |

### 弱点カウンター

| 弱点 | カウンター技術 |
|:---|:---|
| 支離滅裂 | 最小限の構造制約 |
| ブランド逸脱 | キャラクター境界定義 |
| 退屈な出力 | 多様性スコア監視 |

### 禁忌

| 禁忌技術 | 理由 |
|:---|:---|
| Temperature=0 | 多様性喪失 |
| 厳格なフォーマット制約 | 創造性阻害 |
| 過度な検証ループ | 自由度低下 |

### コスト配分目安

```
P0(入力): 20% | P1(収集): 10% | P2(推論): 50% | P3(検証): 10% | P4(出力): 10%
```

---

## 🛡 Safety

**勝利条件:** リスク = 0
**犠牲:** 有用性（保守的）
**典型ユースケース:** カスタマーサポート、教育AI、公開チャットボット

**モデルパラメータ推奨値:**

| パラメータ | 値 | 備考 |
|:----------|:---|:-----|
| Claude `effort` | `high` | 安全性判断に十分な推論 |
| Gemini `thinking_level` | `high` | リスク分析を深く |
| Split-Step Verification | **必須** | 常に検証フェーズを強制 |

### 必須技術

| 技術 | 役割 | Phase |
|:---|:---|:---:|
| URIAL | 文脈内アライメント | 0 |
| Neutralizing Narrative | バイアス修正 | 3 |
| Constitutional AI原則 | 行動規範 | 全Phase |
| 有害コンテンツフィルタ | 出力検証 | 4 |

### 弱点カウンター

| 弱点 | カウンター技術 |
|:---|:---|
| 過剰拒否 | 無害判定の明確化 |
| Jailbreak | 多層防御 + パターン検知 |
| バイアス出力 | Neutralizing Narrative |

### 禁忌

| 禁忌技術 | 理由 |
|:---|:---|
| ロール逸脱許容 | 安全性境界喪失 |
| 無制限生成 | リスク管理不能 |

### コスト配分目安

```
P0(入力): 30% | P1(収集): 10% | P2(推論): 20% | P3(検証): 30% | P4(出力): 10%
```

---

## ハイブリッドパターン

| パターン | Primary | Secondary | ユースケース |
|:---|:---|:---|:---|
| Precision + Safety | 🎯 | 🛡 | 医療AI、金融アドバイス |
| Speed + Autonomy | ⚡ | 🤖 | リアルタイムエージェント |
| Creative + Safety | 🎨 | 🛡 | 子供向けコンテンツ |
| Precision + Autonomy | 🎯 | 🤖 | 自動監査システム |

**ハイブリッド構成ルール:**

1. Primary必須技術を全採用
2. Secondary弱点カウンターを追加
3. 両者禁忌の和集合を除外
4. コスト配分はPrimary基準で調整

---

## 禁忌マトリクス（横断）

| 技術A | 技術B | 問題 | 代替策 |
|:---|:---|:---|:---|
| CoT | o1モデル | 二重推論で冗長化 | o1ではCoT省略 |
| Self-Consistency | 単純タスク | オーバーキル | 単一生成で十分 |
| EmotionPrompt | Precision | 出力不安定化 | 感情要素排除 |
| Abstention | Autonomy | 停止多発 | 閾値緩和 |
| Many-shot | Speed | トークン爆発 | Few-shot or Zero-shot |
| ToT | Speed | 探索時間超過 | 線形CoT |
| 高Temperature | Precision | 再現性喪失 | 0.1-0.3に制限 |
