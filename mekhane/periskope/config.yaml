# Periskopē Search Configuration
# Customize category weights, defaults, and behavior.

# SearXNG category weights (must sum to ~1.0)
searxng:
  weights:
    general: 0.4
    science: 0.2
    it: 0.2
    news: 0.2
  # Engine quality filter: engines with consistently low relevance
  # are deprioritized. Set min_score to filter results by SearXNG score.
  min_score: 0.0
  # Preferred engines (results from these get a relevance boost)
  preferred_engines:
    - google
    - brave
    - duckduckgo
    - wikipedia
    - google scholar
    - arxiv
  # Blocked engines (results from these are discarded)
  blocked_engines: []


# Brave Search — 2,000 free queries/month
# Requires BRAVE_API_KEY environment variable
brave:
  enabled: true

# Tavily Search — 1,000 free credits/month
# Requires TAVILY_API_KEY environment variable
tavily:
  enabled: true
  search_depth: "basic"  # "basic" (1 credit) or "advanced" (2 credits)

# Semantic Scholar — free, unlimited (1 RPS with key)
# Optional: S2_API_KEY environment variable for higher limits
semantic_scholar:
  enabled: true
  year_range: ""  # e.g., "2023-2026" to filter by year

# Synthesis — depth-level model routing
synthesis:
  gemini_model: "gemini-3-pro-preview"  # HIGH tier, always used
  claude_models:
    standard: "claude-sonnet-4-5"   # L2 Standard
    deep: "claude-opus-4-6"         # L3 Deep research
  depth_routing:
    # L1: Gemini Pro only (single model, fast)
    # L2: Gemini Pro + Claude Sonnet (dual model)
    # L3: Gemini Pro + Claude Opus (dual model, deep)
  fallback_to_single: true  # If Claude fails, continue with Gemini only

# Default behavior
defaults:
  max_results_per_source: 10
  expand_query: true      # W3: bilingual expansion
  multipass: false         # W6: 2-pass refinement
  verify_citations: true
  depth: 2                 # Default depth level (L2 Standard)

# SearXNG instance
searxng_url: "http://localhost:8888"

# Query expansion model (W3)
expansion_model: "gemini-2.0-flash"

# W7: Selective full-page crawling (Summary→Full-text pattern)
crawling:
  timeout: 10.0            # Per-page fetch timeout (seconds)
  max_content_length: 15000 # Max chars to keep per page
  min_content_length: 500   # Skip pages shorter than this
  playwright_fallback: true  # Use Playwright for JS-rendered pages

# W6: Iterative gap analysis refinement
refinement:
  max_iterations: 2         # L3: up to 2 refinement rounds
  queries_per_iteration: 3  # Max queries per round

