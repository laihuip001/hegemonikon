# 視覚リズムの指揮者 レビュー

## 対象ファイル
`mekhane/mcp/ochema_mcp_server.py`

## 判定
発言（要改善）

## 発見事項
- **関数サイズの不均一 (Medium)**: `call_tool` 関数が約160行あり、100行制限を超過しています。巨大な `if-elif` ディスパッチブロックが視覚的なリズムを停滞させています。
- **密度の偏り (Low)**: `list_tools` 関数内の辞書定義が約70行にわたって密集しており、視覚的な休息点が不足しています。
- **インデントの波形の乱れ (Low)**: `call_tool` 内の各条件分岐が `if` -> `try` ブロック内に閉じ込められており、平坦なインデントが長く続くことで波形が単調になっています。

## 重大度
Medium

## 修正案
`call_tool` 内の各ツール処理（`ask`, `ask_cortex`, `cortex_quota`, `status`, `models`, `session_info`）を個別のプライベートメソッド（例: `_handle_ask`, `_handle_ask_cortex`）に抽出することで、メインのディスパッチロジックを簡潔にし、関数サイズを縮小することを提案します。これにより、視覚的なリズムが回復し、各ハンドラの責務が明確になります。
