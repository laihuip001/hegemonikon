# 視覚リズムの指揮者 レビュー

## 対象ファイル
`mekhane/mcp/sophia_mcp_server.py`

## 判定
発言（要改善）

## 発見事項

```json
[
  {
    "code": "AE-012",
    "name": "関数サイズの不均一",
    "severity": "medium",
    "line": 142,
    "message": "call_tool 関数が約220行あり、他の関数（数行〜60行程度）と比較して極端に大きい。",
    "suggestion": "call_tool 内の search, stats, backlinks ロジックをそれぞれ独立した関数に抽出してください。"
  },
  {
    "code": "AE-012",
    "name": "インデントの波形の乱れ",
    "severity": "low",
    "line": 164,
    "message": "call_tool 内の search ロジックにおいて、ネストが深く（最大8レベル）、急激な深さの変化が見られる。",
    "suggestion": "早期リターンやガード節を使用してネストを浅くしてください。"
  },
  {
    "code": "AE-012",
    "name": "視覚的な重心の偏り",
    "severity": "low",
    "line": 200,
    "message": "call_tool 内の search ロジックにおいて、コードが右側に寄りすぎている。",
    "suggestion": "ネストを解消し、左側にコードを寄せ、視覚的なバランスを整えてください。"
  }
]
```

## 重大度
Medium
