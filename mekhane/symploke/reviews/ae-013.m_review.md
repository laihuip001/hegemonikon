# シンプリシティの門番 レビュー

## 対象ファイル
`mekhane/fep/derivative_selector.py`

## 判定
発言（要改善）

## 発見事項
- **未使用 import (Low)**: `import json` が記述されていますが、使用されていません。
- **過剰な抽象化 / 未使用クラス (Medium)**: `class DerivativeStateSpace` は定義されていますが、`select_derivative` などの主要な選択ロジックでは使用されていません（ロジックはモジュールレベルの `*_PATTERNS` 辞書を直接使用）。テストコード以外では未使用のデッドコードまたは過剰な並行実装となっています。
- **不要な複雑さ / 重複コード (High)**: 24個の `_select_*_derivative` 関数および対応する `_generate_*_rationale` 関数がほぼ同一の構造を持ち、パラメータのみが異なります。これは「Reduced Complexity」および「Form Follows Function」の原則に違反しており、データ駆動型の単一関数に統合することで大幅に圧縮可能です。
- **将来のための過剰設計 / 未使用関数 (Low)**: `update_derivative_selector` 関数は空の実装であり、将来の機能拡張のためのプレースホルダーとなっています（YAGNI原則違反）。
- **未使用引数 (Low)**: `select_derivative` 関数の `use_fep` 引数は使用されておらず、将来の機能拡張のためのものです。

## 重大度
High
