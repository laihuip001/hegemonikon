# シンプリシティの門番 レビュー

## 対象ファイル
`mekhane/anamnesis/cli.py`

## 判定
発言（要改善）

## 発見事項
- **単一関数の行数超過 (High)**
  - `main` 関数が約150行あり、プロジェクトの禁止事項「100行超の単一関数」に違反している。
  - `argparse` の設定ブロックが肥大化しており、可読性を損なっている。
  - 改善提案: `argparse` の定義を別の関数（`_setup_parser()` など）に切り出すか、各コマンドの定義を分散させること。

- **不要なネストと抽象度の混在 (Medium)**
  - `main` 関数内で `cmd_session_index`, `cmd_handoff_index` 等の関数が定義されている。
  - これらはモジュールレベルに移動し、`main` は純粋なルーティング（構成）に徹するべきである。
  - 「機能→美 (Form Follows Function)」の観点から、エントリポイントは構成定義に集中し、実装は分離すべきである。

- **未使用の import (Low)**
  - `from typing import Optional` がインポートされているが、コード内で使用されていない。
  - YAGNI原則に従い削除すべきである。

## 重大度
High
