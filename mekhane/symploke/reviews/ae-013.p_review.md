# シンプリシティの門番 レビュー

## 対象ファイル
`mekhane/anamnesis/cli.py`

## 判定
発言（要改善）

## 発見事項
- **禁止事項違反 (High)**: `main` 関数が約160行あり、100行制限を超過している。
- **不要な複雑さ (Medium)**: `main` 関数内に定義された `cmd_session_index`, `cmd_handoff_index`, `cmd_rom_index`, `cmd_conversation_index` はトップレベル関数として抽出可能であり、不必要なネストを生んでいる。
- **不要な複雑さ (Medium)**: `cmd_logs`, `cmd_chat`, `cmd_retrieve` が `main` 関数内でインポートされており、他のコマンド実行時にもモジュール読み込みが発生する（起動遅延）。遅延インポート（関数内import）に統一すべき。
- **未使用import (Low)**: `typing.Optional` がインポートされているが使用されていない。

## 重大度
High
