# 比喩一貫性の詩人 レビュー

## 対象ファイル
`mekhane/fep/derivative_selector.py`

## 判定
発言（要改善）

## 発見事項
- [Medium] **比喩体系の混在 (Selector vs Recommendation)**
  - モジュール名は `derivative_selector` (選択機) であり、主要関数 `select_derivative` は「機械的選択」の比喩を用いているが、戻り値の型は `DerivativeRecommendation` (推奨) という「コンサルティング/助言」の比喩を用いている。
  - 「選択機」は「選択結果 (Selection)」を出力すべきであり、「推奨 (Recommendation)」を出力するならば「助言者 (Advisor)」であるべきである。この不一致は、モジュールの役割が「決定論的ツール」なのか「知的エージェント」なのかを曖昧にしている。

- [Low] **命名リズムの不協和 (Verb-first rule)**
  - `_select_with_llm`, `_select_o1_derivative` など多くのヘルパー関数が「動詞優先」のリズムを持っているのに対し、`_hybrid_select` は「形容詞+動詞」の語順を採用しており、視覚的・聴覚的なリズムを乱している。
  - `_select_hybrid` または `_select_via_hybrid` への統一を推奨する。

- [Low] **概念モデルの多重管理 (StateSpace vs Registry)**
  - `DerivativeStateSpace` という「空間モデル」の比喩を持つクラスと、`THEOREM_DERIVATIVES` という「台帳/レジストリ」の比喩を持つ辞書が重複した知識を管理している。
  - `DerivativeStateSpace` 内の定義が「正」であるならば、外部の辞書は不要な複製であり、世界観（World-building）の純度を下げている。

## 重大度
Medium
