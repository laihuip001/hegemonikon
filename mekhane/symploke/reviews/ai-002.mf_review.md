# ハルシネーション検出者 レビュー

## 対象ファイル
`mekhane/mcp/hgk_gateway.py`

## 判定
発言（要改善）

## 発見事項

### 1. 存在しないモジュールの import (Critical)
- `mcp.server.fastmcp`: `FastMCP` は `mcp` ライブラリ（公式SDK）には存在しません。`fastmcp` パッケージ（別ライブラリ）との混同、または架空のモジュールです。
- `mcp.server.auth`: 公式 `mcp` SDK には `auth` モジュール（特に `OAuthAuthorizationServerProvider` 等の複雑な実装）は含まれていません。
- `mcp.shared.auth`: `OAuthClientInformationFull`, `OAuthToken` 等も公式 SDK には存在しません。
- `mcp.server.transport_security`: `TransportSecuritySettings` も公式 SDK には存在しません。

**推奨修正**:
- `mcp` 標準の `Server` クラスを使用するか、もし `fastmcp` ライブラリを使用する意図であれば `from fastmcp import FastMCP` に修正し、`requirements.txt` を更新してください。
- 認証（OAuth）や Transport Security は `mcp` ライブラリの範疇外（または標準機能ではない）ため、独自実装するか、適切なライブラリを使用してください。

### 2. Pydantic の誤った使用 (High)
- `AnyHttpUrl("https://...")`: Pydantic V2 において `AnyHttpUrl` は型アノテーションであり、直接コンストラクタとして文字列を検証・生成することは推奨されません（または動作しません）。
    - V2 では `TypeAdapter(AnyHttpUrl).validate_python("...")` またはモデルフィールドとして使用する必要があります。

### 3. バージョン番号の疑義 (Medium)
- `requirements.txt` の `mcp==1.26.0`: `mcp` パッケージ（Model Context Protocol SDK）のバージョンとしては不自然に大きいです（2025年初頭時点で 1.0.x 系が主流）。架空のバージョンである可能性が高いです。

## 重大度
Critical
