# ハルシネーション検出者 レビュー

## 対象ファイル
`mekhane/pks/tests/test_pks_e2e.py`

## 判定
発言（要改善）

## 発見事項
- `PKSNarrator._parse_llm_response` の呼び出しシグネチャ不一致 (Medium)
  - テスト `test_llm_parse_response_valid` および `test_llm_parse_response_invalid` において、`narrator._parse_llm_response(text, _make_nugget())` という呼び出しが行われています。
  - `_parse_llm_response` の実際の定義は `(self, text: str, fmt: NarratorFormat, nugget: Optional[KnowledgeNugget] = None, ...)` です。
  - 現状の呼び出しでは、第2引数 `fmt`（必須）に `KnowledgeNugget` オブジェクトが渡されており、想定された `NarratorFormat` ではありません。また、第3引数 `nugget` が指定されていません。
  - テスト作成者がメソッドのシグネチャを `(text, nugget)` であると誤認（ハルシネーション）している可能性があります。

## 重大度
Medium
