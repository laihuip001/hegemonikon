# ハルシネーション検出者 レビュー

## 対象ファイル
`mekhane/mcp/hgk_gateway.py`

## 判定
発言（要改善）

## 発見事項
- **Critical**: `hgk_paper_search` 関数内で `signal.SIGALRM` および `signal.alarm()` を使用している (lines 683, 686, 693, 694)。これらは Unix 固有の API であり、Windows 環境では `signal` モジュールに存在しないため `AttributeError` (存在しない属性へのアクセス) を引き起こす。`sys.platform` チェックなしでの使用はクロスプラットフォーム性を損なうハルシネーションである。
- **Medium**: `hgk_digest_run` 関数 (line 885) が `DigestorPipeline.run()` の戻り値を `dict` と想定して `isinstance(report, dict)` で分岐しているが、実際には `DigestResult` データクラスインスタンスが返される。結果として `else` ブロックに落ち、`str(report)` による生のデータクラス表現 (例: `DigestResult(...)`) が出力される。これは API コントラクトのハルシネーションであり、意図した整形出力を妨げる。
- **Low**: `AntigravityClient` のプライベートメソッド `_send_message` および `_poll_response` を直接呼び出している (lines 1066-1067)。メソッド自体は存在するが、内部 API への依存は将来的な破損リスクがある。

## 重大度
Critical
