# コード/コメント矛盾検出者 レビュー

## 対象ファイル
`mekhane/fep/derivative_selector.py`

## 判定
発言（要改善）

## 発見事項
- (High) `select_derivative` 関数の docstring Args `theorem` の説明が "O-series (O1-O4), S-series (S1-S4), or H-series (H1-H4) theorem" となっているが、実装は全24定理（P/K/A series含む）をサポートしている。
- (High) `update_derivative_selector` 関数の docstring Args `theorem` の説明が "O-series theorem" となっているが、実装は汎用的な `str` 型であり、システム全体で全定理を扱う前提と矛盾している。
- (Medium) `select_derivative` 関数のコメントに "uses LLM fallback when keyword confidence < 50%" とあるが、コード上の閾値定数 `LLM_FALLBACK_THRESHOLD` は `0.55` (55%) である。
- (Medium) `select_derivative` 関数は未知の定理に対して `ValueError` を送出するが、docstring に `Raises` セクションがない。
- (Low) `_select_with_llm` 関数のコメントに "Gemini 3 style" とあるが、使用モデル定数 `LLM_DERIVATIVE_MODEL` は "gemini-2.0-flash-lite" である。

## 重大度
High
