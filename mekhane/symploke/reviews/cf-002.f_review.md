# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/index.py`

## 判定
発言（要改善）

## 発見事項
- **Critical**: `Embedder.__init__` 内で `SentenceTransformer` コンストラクタに `model_kwargs` 引数を渡していますが、これは `langchain.embeddings.HuggingFaceEmbeddings` 等のラッパーライブラリの仕様であり、`sentence_transformers.SentenceTransformer` 自体は `model_kwargs` を受け付けません（`TypeError` の原因）。
- **Medium**: `MODELS_DIR` のパス定義が `Path(__file__).parent.parent / "models" / "bge-small"` となっており、これは `mekhane/models/bge-small` を指しますが、実際のモデルファイル（`tokenizer.json` 等）は `mekhane/anamnesis/models/bge-small` に存在します。`Path(__file__).parent` と修正する必要があります。
- **None**: `merge_papers` が `mekhane.anamnesis.models.paper` からインポートされていますが、ファイル内で未使用です。

## 重大度
Critical
