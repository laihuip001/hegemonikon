# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/fep/derivative_selector.py`

## 判定
発言（要改善）

## 発見事項
- **Enum非網羅 (High)**: `mekhane/workflow_runner.py` の `DERIVATIVE_PROCESSING_HINTS` が `derivative_selector.py` で定義された全72派生のうち、O1/A2 (6種) しかカバーしていない。
  - `derivative_selector.py` は O/S/H/P/K/A 全系列の派生を返すが、利用側 (`workflow_runner.py`) がそれに対応するヒント定義を持っていないため、大部分がデフォルト処理となり、意図された「派生ごとの最適化」という契約が破られている。

- **定数旧値参照/環境依存 (Medium)**: `SELECTION_LOG_PATH` にハードコードされた絶対パス (`/home/makaron8426/...`) が含まれている。
  - 実行環境（ユーザー名、ディレクトリ構成）に対する暗黙の仮定があり、他の環境ではログ記録が機能しない（例外抑制されているが、機能不全となる）。

## 重大度
High
