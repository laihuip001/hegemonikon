# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/ochema/antigravity_client.py`

## 判定
発言（要改善）

## 発見事項
- **(High)** Builder Bypass: `get_status` メソッド内、`_poll_response` メソッド内 (`RPC_GET_STEPS` 呼び出し時)、`session_info` メソッド内 (`RPC_GET_STEPS` 呼び出し時)、および `_detect_ls` メソッド内で、`proto.py` からインポートされた `build_get_status` や `build_get_steps` を使用せず、手動でペイロード辞書を構築している。これにより `proto.py` の変更が反映されないリスクがある。
- **(Medium)** Model Constant Duplication: `_MODEL_ROUTES` および `_MODEL_FALLBACK` 辞書のキーとして、`proto.py` で管理されるべきモデル ID 文字列（例: `"MODEL_CLAUDE_4_5_SONNET_THINKING"`）が直接ハードコードされている。`proto.py` 側の変更に追従できない可能性がある。
- **(Medium)** Environment Path Dependency: `BRAIN_DIR` 定数および `session_episodes` メソッド内で、Antigravity LS のファイルシステム構造（`~/.gemini/antigravity/brain`, `.system_generated/steps`）をハードコードしており、外部環境への暗黙の依存がある。

## 重大度
High
