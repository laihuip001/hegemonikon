# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/ochema/service.py`

## 判定
発言（要改善）

## 発見事項
- **引数の静かなる無視 (Implicit Contract Breach)**: `ask` メソッドは `system_instruction`, `temperature`, `max_tokens`, `thinking_budget` を受け取るが、LS (Claude/GPT) ルーティング時にはこれらを無言で破棄している。呼び出し側は制御が効いていると誤認する。（Severity: High）
- **Private メソッドへの依存 (Encapsulation Breach)**: `cortex_available` プロパティ内で `CortexClient` の内部メソッド `_get_token()` を直接呼び出している。これは `CortexClient` の実装詳細に対する不適切な依存である。（Severity: High）
- **型安全性の欠如 (Duck Typing Risk)**: `_ls_client`, `_cortex_client` が `Any` 型で保持されており、`quota_status` や `session_info` などのメソッド存在を暗黙的に仮定している。共通インターフェース (Protocol) が定義されていないため、クライアント側の変更に脆弱である。（Severity: Medium）

## 重大度
High
