# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/workflow_runner.py`

## 判定
発言（要改善）

## 発見事項
- **Critical**: `WORKFLOWS_DIR` が `/home/makaron8426/oikos/.agent/workflows` にハードコードされており、特定のユーザー環境に依存している (Environment Contract Violation)。他の環境やCIで動作しない可能性がある。
- **High**: `DERIVATIVE_PROCESSING_HINTS` が `O1` (nous, phro, meta) と `A2` (affi, nega, susp) の派生のみ定義しており、他の22定理 (O2-O4, S1-S4, H1-H4, P1-P4, K1-K4, A1, A3-A4) の派生 (計66種類) が欠落している (Enum Non-exhaustive)。これにより、大半の派生でデフォルト処理が適用される。
- **Medium**: `X_SERIES_RELATIONS` (定理間接続定義) が `mekhane/fep/encoding.py` の `X_SERIES_MATRIX` と重複しており、二重管理状態になっている (Single Source of Truth Violation)。`run_workflow` は `encoding.py` のロジックを使用するが、CLI表示 (`suggest_next_theorems`) はローカル定義を使用しており、変更時に不整合が生じるリスクがある。

## 重大度
Critical
