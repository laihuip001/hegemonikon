# 暗黙契約違反検出者 レビュー

## 対象ファイル
`hermeneus/src/executor.py`

## 判定
発言（要改善）

## 発見事項
- **Medium**: `WorkflowExecutor.execute` メソッドが `**kwargs` を受け取るシグネチャを持っているが、内部で `_phase_compile` や `_phase_execute` に渡さずに無視している。これにより、`compile_ccl` がサポートする `macros` 引数などを外部から注入できない。暗黙の拡張性契約違反である。
- **Medium**: `WorkflowExecutor.__init__` で `registry` (WorkflowRegistry) を受け取っているが、`execute` メソッド内で一切使用されていない。呼び出し側がカスタムレジストリを注入しても無視され、`compile_ccl` は常にグローバルな `get_all_macros()` を使用する。依存性注入契約の違反である。
- **Low**: `ExecutionPipeline.to_dict` メソッドが `lmql_code` や `phase_results` などの詳細フィールドを除外しているため、API利用者（例: `mcp_server.py` のフォールバックモード）がデバッグ情報を取得できない。情報の完全性契約違反である。

## 重大度
Medium
