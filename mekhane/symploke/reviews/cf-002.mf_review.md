# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/ochema/cortex_client.py`

## 判定
発言（要改善）

## 発見事項
- **(High) モデル名ドメインの不一致**: `CortexClient.ask` の `model` 引数は Google Cloud API のモデル名 (`gemini-2.0-flash` 等) を期待するが、`AntigravityClient` は `proto.py` で定義された Enum 文字列 (`MODEL_CLAUDE_4_5_SONNET_THINKING` 等) を期待する。ドキュメントで謳われている「AntigravityClient との統一インターフェース」および「透明な切り替え」が、モデル名変更なしには成立しない。
- **(Medium) デフォルトモデルの不一致**: `CortexClient` の `DEFAULT_MODEL` は `gemini-2.0-flash` だが、`proto.py` (AntigravityClient が参照) の `DEFAULT_MODEL` は `MODEL_CLAUDE_4_5_SONNET_THINKING` である。クライアントを切り替えるとデフォルトの挙動（モデル性能・コスト）が大きく変化する。
- **(Medium) 外部設定ファイルへの暗黙的依存**: `_OAUTH_CONFIG` が `~/.config/cortex/oauth.json` をハードコードしている。これはコードベース外の環境設定に対する強い暗黙の契約であり、移植性を損なう。

## 重大度
High
