# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/mcp/hgk_gateway.py`

## 判定
発言（要改善）

## 発見事項
- **パス設定の不整合 (High)**: `hgk_gateway.py` は環境変数 `HGK_MNEME` に基づいて `MNEME_DIR` を動的に決定するが、呼び出し先の `mekhane/ergasterion/digestor/pipeline.py` や `mekhane/pks/pks_cli.py` はハードコードされたパス (`~/oikos/mneme/.hegemonikon` または `~/.hegemonikon`) を使用している。これにより、`hgk_gateway` で設定を変更しても内部モジュールが追従できず、データ不整合や動作不良を引き起こす契約違反が発生している。
    - `hgk_gateway.py`: `_MNEME_DIR = Path(os.getenv("HGK_MNEME", ...))`
    - `pipeline.py`: `incoming_dir = Path.home() / "oikos" / "mneme" / ...` (ハードコード)
    - `pks_cli.py`: `MNEME_ROOT = Path.home() / "oikos" / "mneme" / ...` (ハードコード)

## 重大度
High
