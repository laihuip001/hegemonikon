# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/fep/attractor_advisor.py`

## 判定
発言（要改善）

## 発見事項
- (High) `SeriesAttractor` のプライベートメンバ `_embedder` に直接アクセスしている (`self._attractor._embedder.embed(query)`)。`SeriesAttractor` の内部実装への強い結合が生じており、将来的なリファクタリングで破損するリスクが高い。
- (Medium) `gnosis_data/lancedb` へのパスを独自に構築している。`mekhane.anamnesis.index.LANCE_DIR` を再利用すべきであり、パス変更時の追従漏れリスクがある。
- (Medium) テーブル名 "knowledge" をハードコードしている。`mekhane.anamnesis.index.GnosisIndex.TABLE_NAME` を参照すべき。
- (Low) `_classify_series_list` で `COGNITIVE_TYPES` を直接参照してロジックを再実装している。`mekhane.fep.cone_builder.classify_cognitive_type` をインポートしているのに使用しておらず、分類ロジックの変更に追従できない可能性がある。

## 重大度
High
