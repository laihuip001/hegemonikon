# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/session_indexer.py`

## 判定
発言（要改善）

## 発見事項
- **Critical (Private Method Usage)**: `GnosisIndex._table_exists` (from `mekhane/anamnesis/index.py`) is a private method but is called directly by `session_indexer.py`.
- **Critical (Private Method Usage)**: `AntigravityClient._rpc` (from `mekhane/ochema/antigravity_client.py`) is a private method but is called directly by `session_indexer.py`.
- **High (Implicit Schema Dependency)**: `session_indexer.py` hardcodes the dictionary structure for LanceDB records (e.g., in `sessions_to_records`, `conversations_to_records`), implicitly coupling it to the `Paper` schema in `mekhane/anamnesis/models/paper.py` without explicit contract or shared definition. If `Paper` adds a required field, this file will break silently or produce incompatible records.
- **Medium (Global Side Effect)**: `sys.path` is modified at the module level to include `_HEGEMONIKON_ROOT`. This implicit dependency on directory structure makes the module fragile to relocation and affects the global interpreter state.

## 重大度
High
