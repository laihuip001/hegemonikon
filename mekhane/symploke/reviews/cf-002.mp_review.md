# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/ochema/service.py`

## 判定
発言（要改善）

## 発見事項
- (High) **カプセル化違反**: `cortex_available` プロパティにて `client._get_token()` にアクセスしている。`CortexClient` のプライベートメソッドへの依存であり、内部構造変更に対する脆弱性がある。
- (High) **引数の黙殺 (Signature Mismatch)**: `ask` メソッドは `thinking_budget` 引数を受け取るが、LS (Claude) モデルへのルーティング時 (`_ask_ls` および `AntigravityClient.ask`) にこの引数が渡されず、静かに無視されている。
- (Medium) **単一情報源の欠如**: `AVAILABLE_MODELS`, `CLAUDE_MODEL_MAP`, `_LS_PROTO_MODELS` がハードコードされており、`AntigravityClient`/`CortexClient` の実際の対応モデルと乖離するリスクがある（暗黙の同期契約）。

## 重大度
High
