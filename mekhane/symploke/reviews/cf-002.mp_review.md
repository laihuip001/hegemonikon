# 暗黙契約違反検出者 レビュー

## 対象ファイル
`hermeneus/tests/test_verifier.py`

## 判定
発言（要改善）

## 発見事項
- **プライベートメソッドへの直接依存 (High)**
  - `DebateAgent._estimate_confidence`, `DebateAgent._parse_verdict`, `DebateEngine._build_consensus`, `AuditReporter._parse_period` などのプライベートメソッド（内部構造）を直接テストしている。これらは公開API（契約）の一部ではなく、変更される可能性が高い。
- **Dataclassの定位置引数利用 (Medium)**
  - `DebateArgument`, `RallyTurn` のインスタンス化において、キーワード引数ではなく定位置引数を使用している箇所がある（`test_build_consensus` 内）。フィールド順序の変更に対して脆弱である。
- **テスト対象クラスの曖昧性 (Medium)**
  - `test_verifier.py` は `hermeneus.src.audit` から `AuditStore` 等をインポートしてテストしているが、`hermeneus.src.verifier` 内部にも同名の（実装が異なる）クラスが定義されている。`src/verifier.py` の `record_verification` 関数は内部定義の `AuditStore` を使用しており、テストと実利用で異なるクラスが使われている（暗黙の不整合）。

## 重大度
High
