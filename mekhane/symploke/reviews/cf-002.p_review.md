# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/index.py`

## 判定
発言（要改善）

## 発見事項
- **Critical**: `MODELS_DIR` のパス計算が誤っており、存在しない `mekhane/models/bge-small` を参照しています。
    - 現状: `Path(__file__).parent.parent / "models" / "bge-small"` (→ `mekhane/models/bge-small`)
    - 正解: `Path(__file__).parent / "models" / "bge-small"` (→ `mekhane/anamnesis/models/bge-small`)
    - 影響: `_init_onnx` メソッドで `FileNotFoundError` が発生し、CPU環境でのフォールバックが機能しません。これはファイル構成に関する暗黙の契約（リソースの場所）が破られている状態です。

- **Low**: 未使用のインポート `merge_papers` が存在します。
    - `from mekhane.anamnesis.models.paper import Paper, merge_papers` ですが、`merge_papers` はコード内で使用されていません。契約違反ではありませんが、依存関係のノイズとなります。

## 重大度
Critical
