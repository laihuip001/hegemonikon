# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/session_monitor.py`

## 判定
発言（要改善）

## 発見事項
- **定数の暗黙的結合**: `MAX_SESSIONS = 20` が定義されているが、`AntigravityClient.session_info` が内部でハードコードされたスライス `[:20]` を返す仕様に依存している。API 側の変更（例: 上限変更）に追従できない脆弱な結合。 (Medium)
- **ファイル構造への依存**: `sys.path` を操作して `mekhane` パッケージをインポートしており、自身のファイルパスがプロジェクトルートから見て `mekhane/anamnesis/session_monitor.py` に固定されていることを前提としている。ファイル移動やパッケージ構成変更に弱い。 (High)
- **出力先ディレクトリの不一致**: `OUTPUT_DIR` が `.hegemonikon` を使用しているが、`AntigravityClient` は `.ochema` を標準として使用している（例: `archive_sessions`）。システム全体での保存先ポリシーとの不整合リスクがある。 (Medium)

## 重大度
High
