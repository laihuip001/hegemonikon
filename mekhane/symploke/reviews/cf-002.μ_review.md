# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/mcp/sophia_mcp_server.py`

## 判定
発言（要改善）

## 発見事項
- **High**: メタデータフィールド不一致 (`primary_task` vs `title`)。`sophia_mcp_server.py` は Kairos インデックスの全ての検索結果が `primary_task` フィールドを持つと仮定しているが、`kairos_ingest.py` が生成する `conversation` タイプのドキュメントは `title` フィールドを使用するため、検索結果で "N/A" と表示される。
- **Medium**: 絶対パスのハードコード (`/home/makaron8426/...`)。インデックスファイルのパスが特定の環境に依存しており、ポータビリティの暗黙的な契約に違反している（環境変数 `HGK_SOPHIA_INDEX` 等によるオーバーライドも考慮されていない）。

## 重大度
High
