# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/index.py`

## 判定
発言（要改善）

## 発見事項
- (Critical) ONNXモデルディレクトリの欠落: `Embedder`クラスが `mekhane/models/bge-small` の存在を前提としているが、リポジトリに存在せず、`.gitignore` で除外もされていない（`mekhane/anamnesis/models` との不整合）。
- (High) セットアップスクリプトの欠落: エラーメッセージ内で `python aidb-kb.py setup` の実行を指示しているが、`aidb-kb.py` がリポジトリに存在しない。
- (High) Paperモデル変更のサイレント無視: `GnosisIndex.add_papers` が既存テーブルスキーマに基づいてフィールドをフィルタリングするため、`Paper` データクラスに新フィールドが追加されても永続化されず、暗黙的にデータロスのリスクがある。
- (Medium) ドメインロジックの無視: `merge_papers` をインポートしているが使用せず、単純なスキップロジックで重複排除を行っているため、`Paper` モデルが定義する「重複時のメタデータ統合（citations更新等）」の契約に違反している。

## 重大度
Critical
