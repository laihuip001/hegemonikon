# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/ergasterion/digestor/scheduler.py`

## 判定
発言（要改善）

## 発見事項
- (Medium) **出力先ディレクトリパスのハードコード重複**: `cleanup_expired` 関数内で `~/oikos/mneme/.hegemonikon/incoming` を直接参照している。これは `pipeline.py` の `_generate_eat_batch` 内で定義されているパスと「偶然一致」しているだけであり、`pipeline.py` が出力先を変更した場合に追従できない（古いパスを監視し続けることになる）。
- (Medium) **ファイル命名規則の暗黙的仮定**: `eat_*.md` というパターンでファイルを検索しているが、これは `pipeline.py` の生成ロジックに依存した暗黙の契約である。`pipeline.py` がプレフィックスを変更するとクリーンアップが機能しなくなる。
- (Low) **ログ/状態ディレクトリの定義重複**: `LOG_DIR` が `~/.hegemonikon/digestor` と定義されているが、これは `state.py` の `STATE_DIR` や `pipeline.py` の `_default_output_dir` と値が重複している。一元管理されていないため、ディレクトリ構成の変更（例: `oikos` への完全移行）時に不整合が生じるリスクがある。

## 重大度
Medium
