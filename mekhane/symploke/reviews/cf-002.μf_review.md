# 暗黙契約違反検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/session_monitor.py`

## 判定
発言（要改善）

## 発見事項
- (Medium) 定数/設定値の不整合: `OUTPUT_DIR` および `STATE_FILE` のパスとして `.hegemonikon` ディレクトリがハードコードされているが、依存先の `AntigravityClient` (`mekhane.ochema`) 内の `archive_sessions` メソッドではデフォルト出力先として `~/oikos/mneme/.ochema/sessions` が使用されている。プロジェクトのデータディレクトリ命名規則が `hegemonikon` から `ochema` へ移行した可能性があるが、`session_monitor.py` 側が旧値を前提とした実装のままとなっている。
- (Low) ロジック重複とデータ表現の不一致: `format_session_md` 関数が `AntigravityClient` 内の `archive_sessions` と類似のMarkdown生成ロジックを独自に実装しており、出力形式（ヘッダー構成、ロール名表記など）が一致していない。`AntigravityClient` 側で定義されたセッション記録フォーマットの変更に追従できない構造となっている。

## 重大度
Medium
