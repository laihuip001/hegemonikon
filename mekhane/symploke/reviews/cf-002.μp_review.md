# 暗黙契約違反検出者 レビュー

## 対象ファイル
`hermeneus/tests/test_verifier.py`

## 判定
発言（要改善）

## 発見事項
- `hermeneus/src/verifier.py` は内部で `AuditRecord`, `AuditStore`, `AuditReporter` クラスを定義しているが、`hermeneus/tests/test_verifier.py` は `hermeneus.src.audit` から同名のクラスを import してテストしている。これにより、`verifier.py` 内の定義がテストされていない。 (Critical)
- `verifier.py` 内の `AuditRecord` 定義は `audit.py` (テスト対象) とシグネチャが完全不一致である (フィールド: `id` vs `record_id`, `ccl` vs `ccl_expression`, `input_hash` vs なし, `consensus` vs `consensus_accepted`)。利用側が `verifier.AuditRecord` を参照すると契約違反となる。 (Critical)
- `verifier.py` 内の `AuditStore.query` は `min_confidence` 引数を持たないが、テストコード `test_query` は `min_confidence` を使用している (テスト対象が `audit.AuditStore` であるため成功しているが、`verifier.AuditStore` なら失敗する)。 (High)
- `verifier.py` 内の `AuditReporter.parse_period` は static method だが、テストコード `test_parse_period` は instance method `_parse_period` (from `audit.AuditReporter`) をテストしている。 (Medium)

## 重大度
Critical
