# ネスト深度警報者 レビュー

## 対象ファイル
`mekhane/mcp/hgk_gateway.py`

## 判定
発言（要改善）

## 発見事項
- **hgk_search**: `if ki_base.exists()` ブロック内のネストが最大7段に到達 (High)
- **hgk_search**: `if DOXA_DIR.exists()` ブロック内のネストが5段に到達 (High)
- **hgk_search**: `if SESSIONS_DIR.exists()` ブロック内のネストが5段に到達 (High)
- **hgk_doxa_read**: `for df in doxa_files` ループ内の `if isinstance` -> `for` で4段に到達 (High)
- **hgk_paper_search**: `for i, paper` ループ内の `if abstract` -> `if len` で4段に到達 (High)
- **hgk_digest_check**: フロントマター解析ループ (`for line in content.split`) 内で5段に到達 (High)
- **hgk_health**: WBC Alerts処理 (`for a in reversed`) で4段に到達 (High)
- **hgk_health**: Health Metrics処理 (`with open` -> `for` -> `if`) で5段に到達 (High)
- **hgk_notifications**: ファイル読み込み (`with` -> `for` -> `if` -> `try`) で5段に到達 (High)
- **予防ルール**: `.pre-commit-config.yaml` で `ruff` がコメントアウトされており、lintによる予防が無効化されている (Medium)

## 重大度
High
