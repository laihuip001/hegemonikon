# 認知チャンク分析者 レビュー

## 対象ファイル
`mekhane/anamnesis/session_indexer.py`

## 判定
発言（要改善）

## 発見事項
- Line 167: `title = title_match.group(1).strip() if title_match else path.stem` (Medium - 5+ 演算子)
- Line 172: `date_str = date_match.group(1).strip() if date_match else ""` (Medium - 5+ 演算子)
- Line 187: `sections = [re.sub(r"^[^\w]+", "", s).strip() for s in sections]` (Medium - 5+ 演算子)
- Line 214: `url = f"session://{h['session_id']}" if h["session_id"] else ""` (Medium - 5+ 演算子)
- Line 262: `filtered_data = [{k: v for k, v in record.items() if k in schema_fields} for record in data_with_vectors]` (Medium - 10+ 演算子, 複雑な入れ子)
- Line 437: `filtered_data = [{k: v for k, v in record.items() if k in schema_fields} for record in data_with_vectors]` (Medium - 10+ 演算子, 複雑な入れ子)
- Line 475: `output_files = sorted(steps_dir.glob("*/output.txt"), key=lambda p: int(p.parent.name) if p.parent.name.isdigit() else 0, reverse=True)` (Medium - 10+ 演算子, 複雑なlambda)
- Line 558: `filtered_data = [{k: v for k, v in record.items() if k in schema_fields} for record in data_with_vectors]` (Medium - 10+ 演算子, 複雑な入れ子)
- Line 673: `filtered_data = [{k: v for k, v in record.items() if k in schema_fields} for record in data_with_vectors]` (Medium - 10+ 演算子, 複雑な入れ子)

## 重大度
Medium
