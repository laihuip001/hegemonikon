# 認知チャンク分析者 レビュー

## 対象ファイル
`mekhane/fep/attractor_advisor.py`

## 判定
発言（要改善）

## 発見事項
- 313行目: `alts = ", ".join(f"{r.theorem}({THEOREM_DEFINITIONS[r.theorem]['command']})" for r in results[1:])` (Medium)
  - 1行に演算子が10個以上（`=`, `.join`, `f-string`, `()`, `[]`, `.theorem`, `[]`, `for`, `in`, `[]`, `:`）
  - 辞書参照とf-stringのネストが認知負荷を高めている
  - **提案**: 中間変数 `alt_descriptions` を作成してリスト内包表記を分離する

- 383行目: `best_rec = max(segments, key=lambda x: x[1].confidence)[1] if segments else None` (Medium)
  - 1行に演算子が8個以上（`=`, `max`, `lambda`, `[]`, `.confidence`, `[]`, `if`, `else`）
  - 関数呼び出し、ラムダ式、インデックスアクセス、三項演算子が混在
  - **提案**: `if segments:` ブロックで条件分岐し、`max` の結果を一度変数に受ける

- 218行目: `morphisms = f" | morphisms: {', '.join(interp.morphisms)}" if interp.morphisms else ""` (Low)
  - 1行に演算子が6個以上（`=`, `f-string`, `.join`, `if`, `.morphisms`, `else`）
  - 三項演算子の中に複雑な文字列操作が含まれている
  - **提案**: `if interp.morphisms:` ブロックで `morphisms` 文字列を生成する

## 重大度
Medium
