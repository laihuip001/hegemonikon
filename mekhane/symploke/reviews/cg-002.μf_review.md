# èªçŸ¥ãƒãƒ£ãƒ³ã‚¯åˆ†æè€… ãƒ¬ãƒ“ãƒ¥ãƒ¼

## å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
`mekhane/pks/pks_cli.py`

## åˆ¤å®š
ç™ºè¨€ï¼ˆè¦æ”¹å–„ï¼‰

## ç™ºè¦‹äº‹é …
- Line 86: 1è¡Œã«æ¼”ç®—å­ãŒéå¤š (ternary + len + list + glob)
  - é‡å¤§åº¦: Medium
  - ææ¡ˆ:
    ```python
    if handoff_dir.exists():
        handoff_files = list(handoff_dir.glob("handoff_20??-??-??_????.md"))
        handoff_count = len(handoff_files)
    else:
        handoff_count = 0
    ```

- Line 90: 1è¡Œã«æ¼”ç®—å­ãŒéå¤š (ternary + len + list + glob)
  - é‡å¤§åº¦: Medium
  - ææ¡ˆ:
    ```python
    if ki_dir.exists():
        ki_files = list(ki_dir.glob("*.md"))
        ki_count = len(ki_files)
    else:
        ki_count = 0
    ```

- Line 227: 1è¡ŒãŒ100æ–‡å­—ã‚’è¶…ãˆã€è«–ç†çš„ã«åˆ†å‰²å¯èƒ½
  - é‡å¤§åº¦: Low
  - ææ¡ˆ:
    ```python
    if args.sources:
        sources = args.sources.split(",")
    else:
        sources = ["gnosis", "kairos", "sophia", "chronos"]
    ```

- Line 246: ãƒã‚¹ãƒˆã—ãŸé–¢æ•°å‘¼ã³å‡ºã—ã¨ã‚¹ãƒ©ã‚¤ã‚¹ã«ã‚ˆã‚‹èªçŸ¥è² è·
  - é‡å¤§åº¦: Low
  - ææ¡ˆ:
    ```python
    snippet_raw = r.get("abstract") or r.get("content") or ""
    snippet = snippet_raw[:120]
    ```

- Line 266: ãƒã‚¹ãƒˆã—ãŸé–¢æ•°å‘¼ã³å‡ºã— (get inside get)
  - é‡å¤§åº¦: Low
  - ææ¡ˆ:
    ```python
    doc_id = meta.get("doc_id") or meta.get("title") or str(hit.id)
    ```

- Line 285: 1è¡Œã«æ¼”ç®—å­ãŒéå¤š (ternary + slice + arithmetic + comparison)
  - é‡å¤§åº¦: Medium
  - ææ¡ˆ:
    ```python
    if len(title) > 40:
        title_short = title[:40] + "â€¦"
    else:
        title_short = title
    ```

- Line 292: è¤‡é›‘ãªã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿å¼ã¨joinã®çµ„ã¿åˆã‚ã›
  - é‡å¤§åº¦: Medium
  - ææ¡ˆ:
    ```python
    parts = []
    for s, c in sorted(src_counts.items()):
        icon = icons.get(s, 'ğŸ“¦')
        parts.append(f"{icon}{c}")
    breakdown = ", ".join(parts)
    ```

## é‡å¤§åº¦
Medium
