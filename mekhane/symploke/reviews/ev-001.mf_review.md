# Series適所配置検査官 レビュー

## 対象ファイル
`mekhane/api/routes/chat.py`

## 判定
発言（要改善）

## 発見事項
- [Medium] Series不一致: `mekhane/api/routes/chat.py` 内にインフラ層の実装（Gemini APIへの直接HTTPリクエスト `_stream_proxy`, `_cortex_chat_from_gemini_format`, `stream_cortex`）が含まれており、API層の責務を逸脱している。本来、これらは `mekhane/ochema` (Vehicle/LLM Routing) の責務である。
- [Medium] 責務の越境: ルートハンドラが `OchemaService` への委譲を行わず、APIリクエストの手動構築（URL, Header, SSE変換）を直接実装しており、サービス層のカプセル化を破壊している。本来は `OchemaService` またはその配下のクライアント（GeminiClient, CortexClient）がこれを行うべきである。
- [Suggestion] 修正提案: `chat_send` および `cortex_chat` 内の通信ロジックを `mekhane/ochema` 配下のクラス（例: `GeminiApiClient`, `CortexChatClient`）に移動し、`OchemaService` 経由で利用するようにリファクタリングすることを推奨する。

## 重大度
Medium
