# Series適所配置検査官 レビュー

## 対象ファイル
`mekhane/anamnesis/session_indexer.py`

## 判定
発言（要改善）

## 発見事項
- **P-Series (Perigraphē) 侵入 (Hardcoded Paths)**: `_HANDOFF_DIR`, `_BRAIN_DIR` 等で環境固有の絶対パス (`Path.home() / ...`) をハードコードしている。これは P-Series (環境条件) の責務であり、K-Series (Anamnesis/想起) の純粋なロジックに混入すべきではない。環境依存値は外部注入 (引数や設定) にすべきである。 (Severity: Medium)
- **S-Series (Schema/Method) 侵入 (CLI Logic)**: `main()` 関数や `argparse` による CLI 実行ロジック、および `subprocess` による外部スクリプト (`scripts/agq-sessions.sh`) の呼び出しが含まれている。これらは「実行・手段 (S-Series/Praxis)」の責務であり、「記憶・想起 (K-Series/Anamnesis)」のライブラリ層に含めるべきではない。純粋なインデックス構築ロジックのみを残し、CLI 部分は `scripts/` に移動すべきである。 (Severity: Low)
- **Dependency Inversion**: `mekhane` (Library層) が `scripts/` (Tool層) に依存している構造 (`index_from_api` -> `agq-sessions.sh`) は、依存方向の原則に違反している。 (Severity: Low)

## 重大度
Medium
