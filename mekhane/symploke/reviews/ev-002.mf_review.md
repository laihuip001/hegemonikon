# 定理カバレッジ分析者 レビュー

## 対象ファイル
`mekhane/ergasterion/digestor/scheduler.py`

## 判定
発言（要改善）

## 発見事項
- **PROOF行の定理分布の偏り (Medium)**
  - 現在の PROOF 行は `[L2/インフラ]` のみを宣言しており、このファイルが実装している時間的・空間的論理（スケジューリング、クリーンアップ）が定理体系上で表現されていない。
  - 特に `K2 (Chronos)` と `O4 (Energeia)` の欠落が顕著である。

- **定理未カバー (Low)**
  - 以下の機能が実装されているが、対応する定理が明示されていない：
    - **スケジューリング**: `K2 (Chronos - 時間)` / `K1 (Eukairia - 好機)` — `schedule.every().day...`
    - **パイプライン実行**: `O4 (Energeia - 行為)` — `run_digestor`
    - **クリーンアップ**: `P1 (Khōra - 場)` / `A2 (Krisis - 判定)` — `cleanup_expired`
    - **通知**: `A1 (Pathos - 情念/シグナル)` — `notify_desktop`
    - **ログ記録**: `A4 (Epistēmē - 知識/記録)` — `log`, `save_pid`

- **X-series 未実装 (Low)**
  - `Scheduler (K2)` と `Pipeline (S2/Mekhanē)` の間の X-series 関係（時間→機構）が暗黙的であり、宣言されていない。

## 修正提案

```python
# PROOF: [L2/インフラ] <- mekhane/ergasterion/digestor/ A0→消化処理が必要→scheduler が担う
# X-series: K2→S2 (Time triggers Mechanism), P1→A2 (Space requires Judgment)

...

# PURPOSE: [A4] ログ出力
def log(msg: str):
    """ログ出力"""
    ...

# PURPOSE: [A1] GNOME デスクトップ通知
def notify_desktop(title: str, body: str):
    """GNOME デスクトップ通知を送信"""
    ...

# PURPOSE: [O4] 消化パイプライン実行
def run_digestor():
    """消化パイプライン実行"""
    ...

# PURPOSE: [P1/A2] 古い候補の自動クリーンアップ
def cleanup_expired(max_age_days: int = 30):
    """30日以上 incoming/ に放置された候補を expired/ に移動する。"""
    ...

# PURPOSE: [K2] メインループ
def main():
    """メインループ"""
    ...
```

## 重大度
Low
