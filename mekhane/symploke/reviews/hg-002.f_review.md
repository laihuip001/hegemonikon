# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/symploke/run_specialists.py`

## 判定
発言（要改善）

## 発見事項
- **副作用非明示 (High)**: `create_session` および `run_batch`（内部関数 `bounded_create`）が標準出力への `print` を実行しています。関数名からは計算や通信のみを行うと予測され、ログ出力という副作用が含まれていることは驚きです。ロギングは呼び出し元（`main`）に委譲するか、専用のコールバック引数を受け取るべきです。
- **型予測困難 (Medium)**: `create_session` の戻り値が `dict` であり、成功時（`session_id` 等を含む）と失敗時（`error` 等を含む）でキー構成が異なります。戻り値の型が定まっていないため、呼び出し側でのハンドリングが脆弱になります。`TypedDict` や `dataclass` を導入し、構造を明確にすべきです。
- **例外の発生が隠蔽 (Medium)**: `create_session` 内で `except Exception as e:` により全ての例外を捕捉し、エラー辞書として返却しています。通信エラー以外の予期せぬプログラムエラー（バグ）も隠蔽され、デバッグを困難にする可能性があります。具体的な例外（`aiohttp.ClientError` 等）のみを捕捉するか、例外を再送出する設計が望ましいです。
- **暗黙状態変更 (Medium)**: `run_batch` がモジュールレベルのグローバル変数 `API_KEYS` に依存しています。関数の引数として明示的に渡すことで、外部状態への隠れた依存を排除すべきです。

## 重大度
High
