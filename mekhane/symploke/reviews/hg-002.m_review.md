# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/ergasterion/digestor/pipeline.py`

## 判定
発言（要改善）

## 発見事項
- **副作用非明示 (High)**: `DigestorPipeline.__init__` メソッド内で `output_dir.mkdir(parents=True, exist_ok=True)` を実行しており、オブジェクト生成時のファイルI/O副作用が予測困難です。
- **副作用非明示 (High)**: `DigestorPipeline` クラス全体および `mark_as_processed` 関数で `print()` 文による標準出力への書き込みが多用されており、ライブラリとして利用する際に制御できない副作用となります。
- **副作用非明示 (High)**: `mark_as_processed` という関数名ですが、実際にはファイルの移動（rename）という破壊的な副作用を伴います。「mark」という名前からは状態フラグの更新程度が想起され、ファイル移動は予測しづらいです。
- **型予測困難 (Medium)**: `_fetch_from_gnosis`, `_deduplicate_against_indices`, `_deduplicate_by_similarity` の戻り値型ヒントが `list` (bare generic) であり、リストの要素型が不明です。
- **型予測困難 (Medium)**: `mark_as_processed` や `_generate_eat_input` の戻り値型ヒントが `dict` ですが、具体的な構造（キーや値の型）が明示されていません（TypedDict等の不使用）。
- **暗黙状態変更/例外隠蔽 (Medium)**: `_fetch_from_gnosis`, `_deduplicate_by_similarity`, `mark_as_processed` などで広範な `Exception` を捕捉し、エラー内容を `print` するのみで握り潰しています。呼び出し元はエラー発生を検知できず、成功（空の結果）と失敗を区別できません。

## 重大度
High
