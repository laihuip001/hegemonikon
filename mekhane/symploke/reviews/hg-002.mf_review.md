# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/mcp/hgk_gateway.py`

## 判定
発言（要改善）

## 発見事項
- **副作用非明示 (High)**: モジュールレベルでの `sys.exit(1)` の実行。環境変数が未設定の場合にプロセスを強制終了するため、インポートしただけで呼び出し元プロセスが停止する危険性がある。
- **副作用非明示 (High)**: モジュールレベルでの `sys.path.insert`。インポート時にグローバルな `sys.path` を書き換えるため、他のモジュールのインポート解決に予期せぬ影響を与える。
- **暗黙状態変更 (Medium)**: `_ask_timestamps`, `_pks_engine`, `POLICY` などのグローバル変数が関数の挙動を決定しており、テストや並行実行時の予測が困難。
- **副作用非明示 (Medium)**: `hgk_sop_generate` は名前が "generate" だが、ファイルシステムへの書き込み（保存）という副作用を持つ。"save" や "create" を含む名称が望ましい。

## 重大度
High
