# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/ergasterion/digestor/pipeline.py`

## 判定
発言（要改善）

## 発見事項
- (High) 副作用非明示: `_generate_eat_batch` メソッドは名前に "generate" (生成) を含むが、実際にはファイルシステムへの書き込み（`eat_batch.json` および `incoming/*.md` の作成）を行っている。名前から予測される振る舞い（データの生成・返却）と実際の副作用が乖離している。
- (Medium) 副作用非明示: `__init__` メソッド内で `self.output_dir.mkdir` を実行しており、クラスのインスタンス化がファイルシステムへの変更（ディレクトリ作成）を伴う副作用を持っている。
- (Medium) 型予測困難: `_fetch_from_gnosis`, `_deduplicate_against_indices`, `_deduplicate_by_similarity` の戻り値が `list` としか型ヒントされておらず、要素の型（`Paper` オブジェクト等）が不明確である。
- (Medium) 型予測困難: `mark_as_processed` の戻り値が `dict` であり、その構造（"moved", "errors", "count" キーの存在）がシグネチャから予測できない。
- (Medium) 例外の発生が不明: `_fetch_from_gnosis` など複数のメソッドで `try...except Exception` により例外を捕捉・出力し、空リストや部分的な結果を返している。呼び出し元は処理の成功・失敗を区別できない。
- (Medium) 暗黙状態変更: `Path.home() / ".hegemonikon"` などのハードコードされたパスがクラス内部に散在しており、外部環境（ファイルシステムの状態）への暗黙的な依存がある。

## 重大度
High
