# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/anamnesis/session_indexer.py`

## 判定
発言（要改善）

## 発見事項
- 副作用非明示 (High): モジュールレベルで `sys.path.insert(0, str(_HEGEMONIKON_ROOT))` が実行されており、インポート時にグローバルな `sys.path` を変更する副作用がある。
- 副作用非明示 (High): `fetch_all_conversations` や `index_*` 関数内で `try...except Exception` により例外が握りつぶされており、呼び出し元が失敗を検知できない（成功したかのように振る舞う）。
- 型予測困難 (Medium): 多くの関数 (`parse_sessions_from_json`, `sessions_to_records` 等) が `list[dict]` を返すが、辞書の構造が明示されておらず（TypedDictやdataclass未使用）、戻り値の予測が困難。
- 暗黙状態変更 (Medium): `index_*` 関数内で `GnosisIndex` や `Embedder` を直接インスタンス化しており、外部から依存関係（DB接続先やモデル）を注入・制御できない。

## 重大度
High
