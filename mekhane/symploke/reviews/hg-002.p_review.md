# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/ochema/antigravity_client.py`

## 判定
発言（要改善）

## 発見事項
- **予測不能な副作用 (High):** コンストラクタ `__init__` 内で `_detect_ls()` が呼び出され、`ps` コマンドや `ss` コマンドによるシステム全体のプロセス検査が実行される。外部 Language Server が起動していない場合、インスタンス生成時に `RuntimeError` が発生するため、単なるオブジェクト生成とは予測できない副作用と失敗リスクを持つ。
- **予測困難な戻り値の型 (Medium):** `session_info` および `session_episodes` メソッドは、引数 (`cascade_id`, `brain_id`) の有無によって戻り値の構造が大きく異なる（リストの辞書 vs 単一オブジェクトの辞書）。これにより、呼び出し元での型予測と処理分岐が複雑化する。
- **不明瞭な戻り値の型 (Medium):** `get_status`, `quota_status`, `context_health` などのメソッドが汎用的な `dict` を返しており、具体的なキーや値の型が関数シグネチャから予測できない。TypedDict やデータクラスの使用が望ましい。
- **例外の明示不足 (Low):** `ask` メソッドは内部で `_poll_response` を呼び出し `TimeoutError` を発生させる可能性があるが、docstring に記載がない。

## 重大度
High
