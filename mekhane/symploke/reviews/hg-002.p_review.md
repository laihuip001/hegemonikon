# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/ergasterion/digestor/scheduler.py`

## 判定
発言（要改善）

## 発見事項
- **副作用非明示 (High)**:
    - モジュールレベルでの `sys.path` 変更が行われており、インポート時にグローバルな状態を予測不能に変更する。
    - `notify_desktop` が `subprocess` を起動し、環境変数を変更するが、シグネチャからはその副作用が読み取れない。
    - `cleanup_expired` がファイルシステム上のファイル移動を行うが、関数名からは「期限切れデータの削除」のように聞こえるものの、実際には移動を行っている（驚き）。
    - `run_digestor` 内で全ての例外が捕捉・ログ出力され、呼び出し元（スケジューラ）は成功したか失敗したかを知る術がない。

- **型予測困難 (Medium)**:
    - 全ての関数において戻り値の型ヒント（`-> None` 等）が欠落しており、呼び出し元が戻り値を予測できない。
    - `notify_desktop` や `run_digestor` は失敗時にも `None` を返すため、成功可否が型や値から判断できない。

- **暗黙状態変更 (Medium)**:
    - 関数群がモジュールレベルのグローバル変数（`LOG_DIR`, `PID_FILE` 等）に強く依存しており、外部から注入・制御できない。
    - `cleanup_expired` 内でハードコードされたパス（`Path.home() / "oikos" ...`）に依存している。

## 重大度
High
