# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/mcp/hgk_gateway.py`

## 判定
発言（要改善）

## 発見事項
- [High] インポート時のグローバルな副作用: `sys.path.insert(0, str(PROJECT_ROOT))` により、モジュールをインポートしただけでPythonのパスが変更される。
- [High] インポート時のプロセス終了: `GATEWAY_TOKEN` が未設定の場合に `sys.exit(1)` が実行され、プロセスが強制終了する。
- [High] 関数内のグローバルな副作用: `hgk_paper_search` 関数が `signal.signal` を使用してプロセス全体のシグナルハンドラを変更しており、予測困難な副作用を持つ。
- [Medium] 暗黙的な状態変更: `_check_rate_limit` 関数は名前から参照のみ（check）を想起させるが、実際にはグローバル変数 `_ask_timestamps` を更新している。
- [Medium] シングルトンの暗黙的な状態変更: `hgk_proactive_push` 関数が `_get_pks_engine()` で取得したシングルトンインスタンスに対し `set_context` を呼び出し、内部状態を変更している。

## 重大度
High
