# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/ergasterion/digestor/scheduler.py`

## 判定
発言（要改善）

## 発見事項
- **副作用非明示 (High)**: `sys.path` をモジュールレベルで変更している (L24-29)。この変更はグローバルであり、インポートしただけで環境に影響を与える。
- **副作用非明示 (High)**: `run_digestor` 関数内で例外をすべて捕捉し (`except Exception as e`)、ログ出力のみで処理を継続している (L108-110)。呼び出し元はエラーが発生したことを知る術がない。
- **副作用非明示 (High)**: `notify_desktop` 関数が `subprocess.run` を使用して外部コマンド `notify-send` を実行し、環境変数 `DISPLAY` を操作している (L63-68)。
- **副作用非明示 (Medium)**: `cleanup_expired` 関数がハードコードされたパス (`Path.home() / ...`) に基づいてファイル移動 (`rename`) を行っている (L122-132)。
- **暗黙状態変更 (Medium)**: `log` 関数が `print` に加えてファイルへの追記 (`open(..., "a")`) とディレクトリ作成 (`mkdir`) を暗黙的に行っている (L49-55)。
- **型予測困難 (Medium)**: 多くの関数 (`log`, `notify_desktop`, `run_digestor`, `cleanup_expired`, `save_pid`, `cleanup`, `main`) が明示的な戻り値の型ヒントを持たず、暗黙的に `None` を返している。

## 重大度
High
