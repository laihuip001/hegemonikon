# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/ergasterion/digestor/pipeline.py`

## 判定
発言（要改善）

## 発見事項
- **副作用非明示 (High)**: `DigestorPipeline.__init__` 内で `mkdir` を実行しており、オブジェクト生成時にファイルシステムを変更する副作用がある。
- **副作用非明示 (High)**: `_fetch_from_gnosis`, `_load_existing_keys`, `_deduplicate_by_similarity` が `Exception` を捕捉して `print` で出力し、処理を続行または空リストを返している。呼び出し元はエラー発生を検知できない（驚き）。
- **暗黙状態変更 (Medium)**: `Path.home()` を使用したハードコードされたパス（`~/.hegemonikon`）が多数のメソッド（`_default_output_dir`, `_load_existing_keys`, `_deduplicate_by_similarity` 等）に分散しており、実行環境という隠れた状態に依存している。
- **型予測困難 (Medium)**: `_fetch_from_gnosis` や重複排除メソッドの戻り値が `list` としか型付けされておらず、中身が `Paper` オブジェクトなのか辞書なのかシグネチャから予測できない。
- **型予測困難 (Medium)**: `mark_as_processed` の戻り値が `dict` であり、どのような構造（`moved`, `errors` 等）を持つかシグネチャから不明。`TypedDict` やデータクラスを使用すべき。
- **副作用予測困難 (Medium)**: `mark_as_processed` という関数名は状態変更（DB更新など）を示唆するが、実態はファイル移動（I/O）であり、名前と振る舞いの間に乖離がある。

## 重大度
High
