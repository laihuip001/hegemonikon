# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/ochema/antigravity_client.py`

## 判定
発言（要改善）

## 発見事項
- **__init__ の隠れた副作用**: コンストラクタ内で `subprocess` によるプロセス探索(`ps`, `ss`)とネットワークスキャンを実行しており、インスタンス化のコストと失敗リスクが予測困難。 (High)
  - 修正案: 接続ロジックを `connect()` メソッドに分離し、`__init__` は軽量な初期化のみに行う。または、`lazy_connect` フラグを導入する。
- **戻り値の型が予測困難**: `session_info`, `quota_status`, `context_health` 等が `dict` を返すが、成功時とエラー時で構造が異なり(`{"error": ...}` パターン)、型ヒントからも構造が読み取れない。 (Medium)
  - 修正案: `TypedDict` や `dataclass` を用いて戻り値の型を明示するか、例外を送出してエラーを通知する設計に変更する。
- **例外の明示不足**: `ask` メソッドが `TimeoutError` を、`__init__` が `RuntimeError` を送出する可能性があるが、docstring の `Raises` に記述がない。 (Low)
  - 修正案: docstring に `Raises` セクションを追加し、送出される可能性のある例外を明記する。

## 重大度
High
