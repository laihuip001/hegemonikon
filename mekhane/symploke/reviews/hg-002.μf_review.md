# PROOF: [L2/品質] <- mekhane/symploke/reviews/HG-002.μF 予測誤差審問官レビュー

# 予測誤差審問官 レビュー

## 対象ファイル
`mekhane/symploke/run_specialists.py`

## 判定
発言（要改善）

## 発見事項
- (High) `create_session` 関数が全ての例外 (`Exception`) をキャッチし、エラー情報を含む辞書を返却しています。関数シグネチャ `-> dict` からは、どのような例外が発生しうるか、あるいはエラー時にどのようなキーが含まれるかが予測不可能です。呼び出し元は戻り値の `error` キーの有無を確認する必要があり、Pythonの標準的な例外処理フローから逸脱しています。
- (Medium) `create_session` および `run_batch` の戻り値が `dict` / `list[dict]` となっており、具体的な構造（スキーマ）が型ヒントから読み取れません。成功時 (`session_id` 等が含まれる) と失敗時 (`error` が含まれる) で構造が変化するため、利用時の予測誤差が大きいです。`TypedDict` や `dataclass`、あるいは `Result` 型の使用を推奨します。
- (Low) `select_targets` 関数が、警告メッセージを標準出力 (`print`) に書き出しています。関数名は「ターゲットの選択」という計算処理を示唆しており、I/O 副作用（出力）は予測困難です。ロギング機構を使用するか、呼び出し元に警告情報を返す設計が望まれます。

## 重大度
High
