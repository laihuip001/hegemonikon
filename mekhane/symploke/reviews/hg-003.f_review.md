# ストア派制御審判 レビュー

## 対象ファイル
`mekhane/ergasterion/digestor/scheduler.py`

## 判定
発言（要改善）

## 発見事項
- **タイムアウト欠如 (High):** `run_digestor` 内の `pipeline.run()` 呼び出しにタイムアウトが設定されていません。`DigestorPipeline` 内で外部API呼び出しがハングした場合、スケジューラ全体が永久にブロックされるリスクがあります。
- **ファイルI/Oリカバリ戦略なし (Medium):** `log()` 関数内でのログファイル書き込み (`open`, `write`) に例外処理がありません。ディスク容量不足や権限エラーが発生した場合、エラーログを出力しようとしてプロセス自体がクラッシュします。これは `run_digestor` の例外ハンドラ内でも使用されているため、元のエラーも消失させる可能性があります。
- **ファイルI/Oリカバリ戦略なし (Medium):** `save_pid()` および `cleanup_expired()` におけるファイル操作 (`write`, `rename`) に例外処理やフォールバック戦略が欠如しています。特に PID ファイル作成失敗時は起動直後にクラッシュします。
- **フォールバック欠如 (Medium):** `DigestorPipeline` の実行失敗時、単にエラーを記録して終了するのみで、ネットワークの一時的な障害に対する即時再試行（Retry）やバックオフ戦略が存在しません。

## 重大度
High
