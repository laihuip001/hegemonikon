# ストア派制御審判 レビュー

## 対象ファイル
`mekhane/api/routes/chat.py`

## 判定
発言（要改善）

## 発見事項
- `chat_send` エンドポイント内の `stream_proxy` 関数において、`httpx.AsyncClient` にタイムアウトは設定されているものの、通信確立時やストリーミング中の `httpx.TimeoutException` 等のネットワークエラーが捕捉されておらず、障害時にストリームがクラッシュする (High)
- `_claude_chat_from_gemini_format` 関数が `OchemaService.ask_async` を呼び出す際、呼び出し側で明示的なタイムアウト制御（`asyncio.wait_for` 等）を行っておらず、内部実装のデフォルト値に依存している (Medium)
- 外部API（Gemini, Cortex, Claude）への呼び出しが失敗した際の再試行（Retry）ロジックや、連続障害を防止するサーキットブレーカーが存在しない (Medium)
- プライマリのモデル呼び出しが失敗した場合に、バックアップモデルやキャッシュ応答へ切り替えるフォールバック戦略が実装されていない (Medium)

## 重大度
High
