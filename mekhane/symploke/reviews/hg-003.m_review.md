# ストア派制御審判 レビュー

## 対象ファイル
`mekhane/ergasterion/digestor/scheduler.py`

## 判定
発言（要改善）

## 発見事項
- **外部API呼び出しにタイムアウト設定なし (High)**: `run_digestor` 内で呼び出される `pipeline.run()` 自体にタイムアウト制限がかけられていません。依存する外部APIが応答不能になった場合、スケジューラプロセス自体が永久にハングアップするリスクがあります。
- **外部サービス依存で retry/circuit breaker なし (Medium)**: 定期実行が失敗した場合、次のスケジュール時刻（翌日）まで再試行されません。一時的なネットワーク障害で失敗した場合でもリカバリが効かないため、Exponential Backoff等による再試行ロジックが必要です。
- **ファイルI/O失敗時のリカバリ戦略なし (Medium)**: `log` 関数や `save_pid` 関数でのファイル操作時、ディスクフルや権限エラーに対する例外処理が不十分です。特にエラーハンドリング処理内でのログ出力失敗が、プロセス全体のクラッシュを招く可能性があります。
- **ネットワーク障害時のフォールバック欠如 (Medium)**: `notify_desktop` 等の外部呼び出し失敗時、および `pipeline.run` の失敗時において、代替手段（ローカルへの蓄積、簡易通知への切り替え等）へのフォールバックが考慮されていません。

## 重大度
High
