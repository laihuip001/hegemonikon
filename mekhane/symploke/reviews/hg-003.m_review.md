# ストア派制御審判 レビュー

## 対象ファイル
`mekhane/ergasterion/digestor/pipeline.py`

## 判定
発言（要改善）

## 発見事項
- **外部API呼び出しのタイムアウト未設定** (High): `_fetch_from_gnosis` 内の `collector.search` および `_deduplicate_by_similarity` 内の `adapter.encode` において、明示的なタイムアウトが設定されていません。外部サービスの応答遅延により、プロセスが無期限に停止するリスクがあります。
- **ネットワーク障害時のフォールバック不十分** (Medium): `_fetch_from_gnosis` で全クエリが失敗した場合、空のリストが返されるのみで、ローカルキャッシュや代替ソースからの取得といったフォールバック戦略が実装されていません。
- **ファイルI/Oのリカバリ戦略欠如** (Medium): `_save_report` および `_generate_eat_batch` において、ファイル書き込み時の例外処理が存在しません。ディスク容量不足や権限エラー発生時にパイプライン全体がクラッシュします。また、アトミックな書き込み（一時ファイルへの書き込み後のリネーム）が行われておらず、書き込み中断時にファイル破損のリスクがあります。
- **外部サービス依存のRetry/Circuit Breaker不足** (Medium): `_fetch_from_gnosis` には再試行ロジックが存在しますが、連続失敗時に早期撤退するサーキットブレーカー機構がありません。また、`_deduplicate_by_similarity` の `adapter.encode` 呼び出しには再試行ロジックが含まれていません。

## 重大度
High
