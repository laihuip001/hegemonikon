# ストア派制御審判 レビュー

## 対象ファイル
`mekhane/mcp/hgk_gateway.py`

## 判定
発言（要改善）

## 発見事項
- **タイムアウト欠如 (High)**: `hgk_digest_run` が実行する `DigestorPipeline.run()` は外部APIを多用する長時間処理だが、Gatewayレベルでのタイムアウト設定が存在しない。プロセスがハングした場合に制御不能になる恐れがある。
- **フォールバック欠如 (Medium)**: `hgk_ask` (Antigravity LS) や `hgk_paper_search` (Semantic Scholar) は単一の外部サービスに依存しており、障害時の代替手段（別プロバイダへの切り替えやキャッシュ利用）が実装されていない。
- **ファイルI/Oリカバリ欠如 (Medium)**: `hgk_idea_capture` や `hgk_sop_generate` において、ファイル書き込み (`write_text`) が失敗した場合のリカバリ戦略（一時ディレクトリへの退避やリトライ）がなく、データ損失のリスクがある。
- **リトライ/Circuit Breaker欠如 (Medium)**: 外部サービス呼び出しにおいて、一時的なネットワークエラーに対する自動リトライや、連続失敗時に呼び出しを遮断する Circuit Breaker 機構が欠如している。

## 重大度
High
