# ストア派制御審判 レビュー

## 対象ファイル
`mekhane/api/routes/chat.py`

## 判定
発言（要改善）

## 発見事項
- **外部サービス依存の再試行 (Retry) 戦略の欠如 (Medium)**
  `chat_send` および `cortex_chat` において、Gemini API や Cortex API への `httpx` 呼び出しが一時的なネットワークエラー（例: 503, タイムアウト）で失敗した場合、即座にエラーレスポンスを返している。指数バックオフ (Exponential Backoff) 等を用いた再試行ロジックが存在しない。制御不能な外部要因に対する弾力性が不足している。

- **障害時のフォールバック (Fallback) 欠如 (Medium)**
  特定のモデルや API プロバイダがダウンしている場合、代替手段（例: 別のモデルへの自動切り替え、キャッシュされた応答の利用、グレースフルな機能縮退）が実装されていない。

## 重大度
Medium
