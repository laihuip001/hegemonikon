# ストア派制御審判 レビュー

## 対象ファイル
`mekhane/mcp/sophia_mcp_server.py`

## 判定
発言（要改善）

## 発見事項
- **タイムアウト欠如 (High)**: `call_tool` は非同期関数ですが、その中で同期呼び出しである `EmbeddingAdapter.encode`, `EmbeddingAdapter.search`, `SophiaBacklinker.build_graph` などが行われています。これらはイベントループをブロックし、外部API呼び出し（Embedding生成）や大規模なファイルI/Oの実行時間を制限する手段がありません。
- **フォールバック欠如 (Medium)**: 外部APIまたはインデックスファイルが利用できない場合（Embedding生成失敗など）に、代替手段（単純なキーワード検索など）へのフォールバックがありません。
- **リカバリ戦略なし (Medium)**: インデックスファイル（`sophia.pkl`, `kairos.pkl`）が破損している場合や、読み込みに失敗した場合に、再構築を試みるなどの回復戦略がありません。単にエラーメッセージを返して終了しています。

## 重大度
High
