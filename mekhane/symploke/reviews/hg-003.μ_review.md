# ストア派制御審判 レビュー

## 対象ファイル
`mekhane/anamnesis/session_indexer.py`

## 判定
発言（要改善）

## 発見事項
- **(High) `index_from_api`**: `subprocess.run` calls external script `agq-sessions.sh` without a `timeout` parameter, risking infinite hang if the script stalls.
- **(High) `fetch_all_conversations`**: `AntigravityClient` methods are called without explicit timeout controls from the caller side, relying on hidden internal defaults.
- **(Medium) `fetch_all_conversations`**: The initial `client._rpc` call to get all trajectories lacks a `try...except` block, meaning a single network failure crashes the entire process without fallback.
- **(Medium) `index_handoffs`, `index_exports`**: File parsing logic inside list comprehensions (`[parse_handoff_md(f) for f in md_files]`) lacks error handling; a single file I/O failure crashes the entire batch processing.
- **(Medium) `index_from_json`**: `json.load` is not guarded against malformed JSON data.
- **(Medium) `GnosisIndex` operations**: Database write operations (`add`, `create_table`) lack error handling and recovery strategies.

## 重大度
High
