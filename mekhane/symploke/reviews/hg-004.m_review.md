# CCL式美学者 レビュー

## 対象ファイル
`mekhane/mcp/sophia_mcp_server.py`

## 判定
発言（要改善）

## 発見事項
- (Medium) CCL式が60ポイントを超過しています。特に `call_tool` 関数が肥大化しており、単一の関数で複数のツール（Search, Stats, Backlinks, Graph Stats）のロジックを分岐・処理しているため、認知的負荷が高くなっています。
- (Medium) ネストレベルが3を超過しています。`call_tool` 内の `search` ロジックにおける Kairos 検索ループ内で、`recent_days` 判定、タイムスタンプ判定、例外処理などが重なり、深度が7に達しています。
- (Low) 冗長なCCL式が存在します。各分岐で `StdoutSuppressor` と `import` 文が繰り返されています。これらは共通化または分離が可能です。
- (Low) 演算子の意図が不明瞭です。`results[: limit * 2]` における `2` という定数が、ソース数（Sophia/Kairos）に依存していることが暗黙的です。

## 重大度
Medium
