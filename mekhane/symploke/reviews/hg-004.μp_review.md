# CCL式美学者 レビュー

## 対象ファイル
`mekhane/mcp/sophia_mcp_server.py`

## 判定
発言（要改善）

## 発見事項
- **Nesting Level 8 (Critical)**: `call_tool` 内の `search` ロジックにおいて、`Kairos` の日付フィルタリング処理がネストレベル8に達しています（基準値3を超過）。
  - `if name == "search"` -> `try` -> `if source` -> `for r` -> `if recent_days` -> `if ts` -> `try` -> `if (now - doc_date)`
- **CCL Expression > 60pts (Medium)**: `call_tool` 関数が肥大化しており、単一の関数内で `search`, `stats`, `backlinks`, `graph_stats` の全ロジックを分岐・実装しているため、認知負荷が過大です。各ツールの処理を独立した関数に分割することを推奨します。
- **Redundant Logic (Low)**: `EmbeddingAdapter` や `SophiaBacklinker` のインポートと `StdoutSuppressor` ブロックが複数箇所で重複しており、冗長です。

## 重大度
High
