# LLM臭気検出者 レビュー

## 対象ファイル
`mekhane/mcp/hgk_gateway.py`

## 判定
発言（要改善）

## 発見事項
- (Medium) 明白なことを説明する docstring が多数存在する (例: `hgk_sop_generate` の `# PURPOSE: hgk_gateway の hgk sop generate 処理を実行する` など)。関数名を見れば分かる内容が繰り返されているため、削除またはより具体的な内容（副作用や前提条件など）に置き換えるべきである。
- (Medium) 関数内のスタイル不統一 (複数ソース融合の痕跡)。`_traced` デコレータ内の `import functools` や、`_load_policy` 内の `import yaml` など、関数定義内での import が散見される。これらはファイル冒頭の import に移動し、コードの統一性を高めるべきである。
- (Medium) コピペ変異体 (`hgk_pks_*` 系関数など、構造が酷似した関数が並んでいる)。`subprocess.run` を呼び出す共通のヘルパー関数を作成し、重複コードを削減することを提案する。
- (Low) `HGKOAuthProvider` クラスの実装など、教科書的なパターンがそのまま適用されている箇所がある。現状の単一ユーザー用途に合わせて簡素化が可能である。

## 重大度
Medium
