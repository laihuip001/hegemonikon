# LLM臭気検出者 レビュー

## 対象ファイル
`mekhane/mcp/ochema_mcp_server.py`

## 判定
発言（要改善）

## 発見事項
- **Copy-paste variants (Medium)**: `call_tool` 関数内の `if/elif` ブロック（`ask`, `ask_cortex`, `cortex_quota` 等）において、エラーハンドリング (`try-except`) や `get_service()` 呼び出しの構造が過度に反復的である。共通処理をデコレータやディスパッチャに切り出すべきである。
- **Happy path bias (Medium)**: エラーハンドリングが `except Exception as e` による包括的な捕捉に依存しており、特定の例外（タイムアウト、認証エラー等）に対する構造化された処理が欠けている。成功ルート以外の考慮が浅い。
- **Obvious docstrings (Low)**: `list_tools` ("List available tools.") や `main` ("Run the MCP server.") など、関数名から自明な docstring が散見される。
- **Function size heterogeneity (Low)**: `call_tool` が160行を超えており、他の短い関数と比較して極端に巨大化している。可読性と保守性を損なっている。

## 重大度
Medium
