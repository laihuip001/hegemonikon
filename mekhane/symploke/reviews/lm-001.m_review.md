# LLM臭気検出者 レビュー

## 対象ファイル
`mekhane/mcp/hgk_gateway.py`

## 判定
発言（要改善）

## 発見事項
- (Medium) コピペ変異体: `hgk_pks_stats`, `hgk_pks_health`, `hgk_pks_search` は、コマンド引数だけが異なるほぼ同一の `subprocess.run` 実行ブロックを繰り返している。共通のヘルパー関数 (`_run_pks_cli` 等) に切り出すべきである。
- (Medium) コピペ変異体: `hgk_sessions`, `hgk_models`, `hgk_ls_status` は、`AntigravityClient` のインスタンス化とエラーハンドリング (`try...except RuntimeError...`) が完全に重複している。これらもデコレータやヘルパー関数で共通化できる。
- (Low) 明白な docstring: `_estimate_input_size`, `hgk_ccl_execute`, `hgk_paper_search` などの docstring は関数名や引数名の直訳に近く、付加価値が低い。
- (Low) 不要なローカル import: `_wbc_log_security_event` 内で `import json` や `from datetime import datetime` が行われているが、これらは既にトップレベルで import されており冗長である。

## 重大度
Medium
