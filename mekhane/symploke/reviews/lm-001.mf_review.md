# LLM臭気検出者 レビュー

## 対象ファイル
`mekhane/api/routes/chat.py`

## 判定
発言（要改善）

## 発見事項
- (Medium) **コピペ変異体**: `chat_send` 内の `stream_proxy`、`_claude_chat_from_gemini_format` 内の `stream_claude`、`cortex_chat` 内の `stream_cortex` が非常に似通った構造（処理実行→エラーハンドリング→SSE形式への手動JSON構築）を持っています。特に `stream_claude` と `stream_cortex` は、バックエンド呼び出し以外はほぼ同一のボイラープレートです。
- (Low) **自明なDocstring**: `ChatContent`, `ChatRequest` などの Pydantic モデルの docstring (`Single message content`, `Chat send request`) はクラス名から自明であり、情報量がありません。
- (Low) **スタイル不統一**: 関数 docstring は日本語（`"""Gemini API にプロキシし..."""`）であるのに対し、Pydantic モデルの docstring は英語（`"""Single message content."""`）で記述されており、言語の一貫性がありません。
- (Low) **見せかけのストリーミング**: `stream_claude` と `stream_cortex` は `StreamingResponse` を使用していますが、実際にはバックエンドからの応答を全待機（`await`）してから一括で yield しています。これはストリーミングの利点（TTFT短縮）を活かせていません（バックエンドの制約かもしれませんが、構造上は `stream_proxy` のコピペに見えます）。

## 重大度
Medium
