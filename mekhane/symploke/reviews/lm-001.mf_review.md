# LLM臭気検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/session_indexer.py`

## 判定
発言（要改善）

## 発見事項
- **Copy-paste Variants (Medium)**: `index_handoffs`, `index_conversations`, `index_steps`, `index_exports`, `index_roms`, `index_from_json` の6つの関数で、レコードの重複排除、埋め込み生成、LanceDBへの挿入ロジックがほぼ完全に複製されている。共通のインデックス処理関数（例: `_index_records`）に統合し、約100行の重複コードを削減すべきである。
- **Obvious Docstrings (Low)**: `parse_sessions_from_json`, `parse_handoff_md`, `sessions_to_records` などの関数で、docstring が `# PURPOSE:` ヘッダーの完全なコピーであり、引数や戻り値の詳細、例外についての説明などの付加価値がない。
- **Exception Swallowing (Low)**: 重複排除ロジックにおいて `try...except Exception: pass` が多用されており、テーブルが存在しない場合（正常系）と深刻なスキーマ不整合や接続エラー（異常系）を区別せずに握りつぶしている。

## 重大度
Medium
