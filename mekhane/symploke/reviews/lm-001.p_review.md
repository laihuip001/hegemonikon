# LLM臭気検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/session_indexer.py`

## 判定
発言（要改善）

## 発見事項
- コピペ変異体 (Medium): `index_handoffs`, `index_conversations`, `index_steps`, `index_exports`, `index_from_json` の5つの関数において、データの重複排除（Dedupe）、埋め込み（Embed）、DB登録（Add to LanceDB）のロジックがほぼ完全に複製されています。共通化すべきです。
- コピペ変異体 (Low): `sessions_to_records`, `handoffs_to_records`, `conversations_to_records`, `steps_to_records`, `exports_to_records` も構造が類似していますが、変換ロジックが個別のドメイン知識に依存しているため許容範囲内ですが、共通のインターフェースを持つことが望ましいです。

## 重大度
Medium
