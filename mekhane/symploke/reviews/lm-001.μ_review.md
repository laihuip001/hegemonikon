# LLM臭気検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/session_indexer.py`

## 判定
発言（要改善）

## 発見事項
- **コピペ変異体 (Medium)**: `index_handoffs`, `index_conversations`, `index_steps`, `index_exports`, `index_from_json` の5関数において、LanceDBへのインデックス処理（既存重複チェック、Embeddingバッチ処理、データ挿入）がほぼ完全にコピペされている。構造が同一で変数名と初期のパース処理のみが異なる典型的な変異体。
- **明白なことを説明する docstring (Low)**: 各関数の docstring が `"""PURPOSE: ..."""` という形式で統一されているが、その内容は関数名の直訳や自明な動作の説明に留まっている箇所が多い（例: `parse_handoff_md` -> "Handoff マークダウンファイルをパースし構造化 dict に変換する"）。また、直前のコメント `# PURPOSE: ...` と docstring の内容が完全に重複しており、冗長である。
- **教科書的すぎるパターン適用 (Low)**: 全てのインデックス関数内で `GnosisIndex`, `Embedder` を毎回インポート・インスタンス化しており、共通化されていない。

## 重大度
Medium
