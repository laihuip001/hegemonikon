# LLM臭気検出者 レビュー

## 対象ファイル
`mekhane/anamnesis/session_indexer.py`

## 判定
発言（要改善）

## 発見事項
- **Copy-paste variants (Medium)**: `index_handoffs`, `index_conversations`, `index_steps`, `index_exports`, `index_from_json` の5つの関数において、既存レコードとの重複排除、Embedderによるベクトル生成（バッチ処理）、LanceDBへのINSERT（スキーマフィルタリング）のロジックがほぼ完全に複製されています。これらは共通関数に抽出されるべきです。
- **Happy path only (Low)**: `parse_handoff_md` および `parse_export_md` において、`path.read_text()` がエラーハンドリングなしで呼び出されています。`glob` で検出されたファイルであっても、読み取り権限や競合状態により失敗する可能性があります。

## 重大度
Medium
