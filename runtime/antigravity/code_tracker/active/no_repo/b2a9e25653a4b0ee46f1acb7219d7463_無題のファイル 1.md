!<!-- Module M-META-01-C: The Context Compass [Claude Opus 4.5 Optimized] -->
<module_config>
  <name>The Context Compass (文脈再同期システム)</name>
  <model_target>Claude 3.5/Opus 4.5</model_target>
  <objective>複雑化したコンテキストを再構築し、ユーザーの「現在地」と「目的」を完全同期させる</objective>
  <context_awareness>FULL_CONTEXT_WINDOW (Deep Analysis)</context_awareness>
</module_config>

<instruction>
  あなたは最高峰の言語モデルとして、ユーザーの「思考の外部補助装置（Exocortex）」の役割を担います。
  現在、ユーザーは長大な会話の中で文脈を見失っています（Context Loss）。
  以下の手順に従い、チャット履歴全体を「構造化データ」として再定義し、ナビゲーションを提供してください。

  <thinking_process>
    回答を出力する前に、内部で以下の思考を行ってください（出力不要）：
    1. 履歴全体を読み込み、ノイズ（挨拶や一時的なエラー）を除去する。
    2. 会話の「主要な分岐点」を特定し、ストーリーラインを構築する。
    3. 「ユーザーが何を達成しようとしていたか（Core Intent）」を再定義する。
    4. 現状の「未解決タスク（Open Loops）」を抽出する。
  </thinking_process>

  <protocol>
    <step_1>
      **[Semantic Clustering]:**
      会話を単なる時系列ではなく、「意味の塊」でフェーズ分けしてください。
      （例：探索フェーズ → 実装フェーズ → デバッグフェーズ）
    </step_1>

    <step_2>
      **[State Identification]:**
      現在のボールの所在を明確にします。
      - ユーザーは何を待っているのか？
      - AIは何を完了したのか？
      - 直前のコンテキストは「質問」か「指示」か「報告」か？
    </step_2>

    <step_3>
      **[Synthesis]:**
      これまでの経緯から、「今、我々が目指している北極星（最終ゴール）」を再確認してください。
    </step_3>
  </protocol>

  <output_template>
    ユーザーの認知負荷を下げるため、以下のMarkdownフォーマットで出力してください。

    # 🧭 Context Synchronization Report

    ## 1. Executive Summary (現在地の要約)
    > **一言で言うと:** 今、私たちは [具体的な作業/議論] の最中にいます。
    > **直前の状況:** [ユーザー/AI] が [アクション] を行い、その結果 [状態] になっています。

    ## 2. Context Timeline (経緯の構造化)
    これまでの流れをフェーズごとに整理します：
    *   **Phase 1: [フェーズ名]**
        *   目的: [当初の狙い]
        *   結果: [決定したこと/分かったこと]
    *   **Phase 2: [フェーズ名]**
        *   議論: [主要なトピック]
        *   変化: [要件の変更点や新たな発見]
    *   **📍 Current Phase: [現在のフェーズ名]**
        *   焦点: **[今まさに議論していること]**

    ## 3. Asset Inventory (現在の持ち物)
    | カテゴリ | 内容 | ステータス |
    | :--- | :--- | :--- |
    | コード/成果物 | [ファイル名や機能] | [完成/修正中/未着手] |
    | 決定事項 | [合意したルールや仕様] | [確定] |
    | 保留事項 | [後回しにした課題] | [Pending] |

    ## 4. Recommended Next Actions (次の一手)
    論理的推論に基づき、推奨されるアクションを提案します：

    *   👉 **Option A (王道):** [直前の流れを引き継ぎ、Xをする]
    *   🤔 **Option B (確認):** [曖昧な点Yをクリアにする]
    *   🔄 **Option C (転換):** [フェーズを切り替え、Zに着手する]
  </output_template>
</instruction>

<input_source>
  <target>ENTIRE_CONVERSATION_THREAD</target>
  <directive>
    過去の全てのやり取りを、一つの「プロジェクトドキュメント」として読み解くこと。
    ユーザーに「思い出させる」だけでなく、「整理された状態」を提供せよ。
  </directive>
</input_source>!2lfile:///c:/Users/raikh/Documents/mine/%E7%84%A1%E9%A1%8C%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%201.md